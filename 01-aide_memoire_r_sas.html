<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Nassab ABDALLAH">
<meta name="author" content="Damien EUZENAT">
<meta name="author" content="Sébastien LI-THIAO-TE">
<meta name="description" content="Un aide-mémoire pour les statisticiens qui connaissent SAS et souhaitent travailler avec R.">

<title>Aide-mémoire SAS - R - Aide-mémoire SAS - R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Pas de résultats",
    "search-matching-documents-text": "documents trouvés",
    "search-copy-link-title": "Copier le lien vers la recherche",
    "search-hide-matches-text": "Cacher les correspondances additionnelles",
    "search-more-match-text": "correspondance de plus dans ce document",
    "search-more-matches-text": "correspondances de plus dans ce document",
    "search-clear-button-title": "Effacer",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Annuler",
    "search-submit-button-title": "Envoyer",
    "search-label": "Recherche"
  }
}</script>


</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01-aide_memoire_r_sas.html">Aide-mémoire</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Aide-mémoire SAS - R</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Basculer le mode sombre"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Recherche"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-aide_memoire_r_sas.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Aide-mémoire</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Trucs et astuces en R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Trucs et astuces</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-avantages_inconvenients_env_R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Avantages et inconvénients des environnements R</span></a>
  </div>
</li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="2">
    <h2 id="toc-title">Sur cette page</h2>
   
  <ul>
  <li><a href="#importation-des-packages" id="toc-importation-des-packages" class="nav-link active" data-scroll-target="#importation-des-packages"><span class="header-section-number">1</span> Importation des packages</a></li>
  <li><a href="#chemin-vers-le-bureau-et-affichage-de-la-date-et-de-lannée" id="toc-chemin-vers-le-bureau-et-affichage-de-la-date-et-de-lannée" class="nav-link" data-scroll-target="#chemin-vers-le-bureau-et-affichage-de-la-date-et-de-lannée"><span class="header-section-number">2</span> Chemin vers le bureau et affichage de la date et de l’année</a></li>
  <li><a href="#création-dune-base-de-données" id="toc-création-dune-base-de-données" class="nav-link" data-scroll-target="#création-dune-base-de-données"><span class="header-section-number">3</span> Création d’une base de données</a></li>
  <li><a href="#préparer-les-données-importées" id="toc-préparer-les-données-importées" class="nav-link" data-scroll-target="#préparer-les-données-importées"><span class="header-section-number">4</span> Préparer les données importées</a>
  <ul class="collapse">
  <li><a href="#casse-des-noms-des-variables" id="toc-casse-des-noms-des-variables" class="nav-link" data-scroll-target="#casse-des-noms-des-variables"><span class="header-section-number">4.1</span> Casse des noms des variables</a></li>
  <li><a href="#harmoniser-le-format-des-variables" id="toc-harmoniser-le-format-des-variables" class="nav-link" data-scroll-target="#harmoniser-le-format-des-variables"><span class="header-section-number">4.2</span> Harmoniser le format des variables</a></li>
  </ul></li>
  <li><a href="#information-sur-la-base-de-données" id="toc-information-sur-la-base-de-données" class="nav-link" data-scroll-target="#information-sur-la-base-de-données"><span class="header-section-number">5</span> Information sur la base de données</a>
  <ul class="collapse">
  <li><a href="#extraire-les-10-première-lignes-de-la-base" id="toc-extraire-les-10-première-lignes-de-la-base" class="nav-link" data-scroll-target="#extraire-les-10-première-lignes-de-la-base"><span class="header-section-number">5.1</span> Extraire les 10 première lignes de la base</a></li>
  <li><a href="#renommer-les-variables" id="toc-renommer-les-variables" class="nav-link" data-scroll-target="#renommer-les-variables"><span class="header-section-number">5.2</span> Renommer les variables</a></li>
  <li><a href="#nombre-de-lignes-et-de-colonnes-dans-la-base" id="toc-nombre-de-lignes-et-de-colonnes-dans-la-base" class="nav-link" data-scroll-target="#nombre-de-lignes-et-de-colonnes-dans-la-base"><span class="header-section-number">5.3</span> Nombre de lignes et de colonnes dans la base</a></li>
  <li><a href="#afficher-les-noms-des-variables-de-la-base" id="toc-afficher-les-noms-des-variables-de-la-base" class="nav-link" data-scroll-target="#afficher-les-noms-des-variables-de-la-base"><span class="header-section-number">5.4</span> Afficher les noms des variables de la base</a></li>
  <li><a href="#création-de-colonnes-et-de-lignes" id="toc-création-de-colonnes-et-de-lignes" class="nav-link" data-scroll-target="#création-de-colonnes-et-de-lignes"><span class="header-section-number">5.5</span> Création de colonnes et de lignes</a></li>
  <li><a href="#supression-de-colonnes-et-de-lignes" id="toc-supression-de-colonnes-et-de-lignes" class="nav-link" data-scroll-target="#supression-de-colonnes-et-de-lignes"><span class="header-section-number">5.6</span> Supression de colonnes et de lignes</a></li>
  </ul></li>
  <li><a href="#formater-les-modalités-des-valeurs" id="toc-formater-les-modalités-des-valeurs" class="nav-link" data-scroll-target="#formater-les-modalités-des-valeurs"><span class="header-section-number">6</span> Formater les modalités des valeurs</a>
  <ul class="collapse">
  <li><a href="#valeur-discrète" id="toc-valeur-discrète" class="nav-link" data-scroll-target="#valeur-discrète"><span class="header-section-number">6.1</span> Valeur discrète</a></li>
  <li><a href="#valeur-continue" id="toc-valeur-continue" class="nav-link" data-scroll-target="#valeur-continue"><span class="header-section-number">6.2</span> Valeur continue</a></li>
  </ul></li>
  <li><a href="#manipuler-des-lignes-et-des-colonnes" id="toc-manipuler-des-lignes-et-des-colonnes" class="nav-link" data-scroll-target="#manipuler-des-lignes-et-des-colonnes"><span class="header-section-number">7</span> Manipuler des lignes et des colonnes</a>
  <ul class="collapse">
  <li><a href="#sélection-de-colonnes" id="toc-sélection-de-colonnes" class="nav-link" data-scroll-target="#sélection-de-colonnes"><span class="header-section-number">7.1</span> Sélection de colonnes</a></li>
  <li><a href="#selection-de-lignes" id="toc-selection-de-lignes" class="nav-link" data-scroll-target="#selection-de-lignes"><span class="header-section-number">7.2</span> Selection de lignes</a></li>
  </ul></li>
  <li><a href="#manipuler-des-lignes-et-des-colonnes-1" id="toc-manipuler-des-lignes-et-des-colonnes-1" class="nav-link" data-scroll-target="#manipuler-des-lignes-et-des-colonnes-1"><span class="header-section-number">8</span> Manipuler des lignes et des colonnes</a>
  <ul class="collapse">
  <li><a href="#mettre-un-0-devant-un-nombre" id="toc-mettre-un-0-devant-un-nombre" class="nav-link" data-scroll-target="#mettre-un-0-devant-un-nombre"><span class="header-section-number">8.1</span> Mettre un 0 devant un nombre</a></li>
  <li><a href="#réexprimer-en-masse-des-valeurs" id="toc-réexprimer-en-masse-des-valeurs" class="nav-link" data-scroll-target="#réexprimer-en-masse-des-valeurs"><span class="header-section-number">8.2</span> Réexprimer en masse des valeurs</a></li>
  <li><a href="#arrondir-une-valeur-numérique" id="toc-arrondir-une-valeur-numérique" class="nav-link" data-scroll-target="#arrondir-une-valeur-numérique"><span class="header-section-number">8.3</span> Arrondir une valeur numérique</a></li>
  </ul></li>
  <li><a href="#les-tris" id="toc-les-tris" class="nav-link" data-scroll-target="#les-tris"><span class="header-section-number">9</span> Les tris</a>
  <ul class="collapse">
  <li><a href="#trier-par-colonne" id="toc-trier-par-colonne" class="nav-link" data-scroll-target="#trier-par-colonne"><span class="header-section-number">9.1</span> Trier par colonne</a></li>
  <li><a href="#trier-les-lignes-par-ordre-croissant-ou-décroissant" id="toc-trier-les-lignes-par-ordre-croissant-ou-décroissant" class="nav-link" data-scroll-target="#trier-les-lignes-par-ordre-croissant-ou-décroissant"><span class="header-section-number">9.2</span> Trier les lignes par ordre croissant ou décroissant</a></li>
  <li><a href="#incidence-des-valeurs-manquantes-dans-les-tris-différence-entre-sas-et-r" id="toc-incidence-des-valeurs-manquantes-dans-les-tris-différence-entre-sas-et-r" class="nav-link" data-scroll-target="#incidence-des-valeurs-manquantes-dans-les-tris-différence-entre-sas-et-r"><span class="header-section-number">9.3</span> Incidence des valeurs manquantes dans les tris, différence entre SAS et R</a></li>
  </ul></li>
  <li><a href="#manipuler-des-dates" id="toc-manipuler-des-dates" class="nav-link" data-scroll-target="#manipuler-des-dates"><span class="header-section-number">10</span> Manipuler des dates</a>
  <ul class="collapse">
  <li><a href="#créer-une-date" id="toc-créer-une-date" class="nav-link" data-scroll-target="#créer-une-date"><span class="header-section-number">10.1</span> Créer une date</a></li>
  <li><a href="#calculer-des-durées" id="toc-calculer-des-durées" class="nav-link" data-scroll-target="#calculer-des-durées"><span class="header-section-number">10.2</span> Calculer des durées</a></li>
  <li><a href="#ajouter-une-durée-à-une-date" id="toc-ajouter-une-durée-à-une-date" class="nav-link" data-scroll-target="#ajouter-une-durée-à-une-date"><span class="header-section-number">10.3</span> Ajouter une durée à une date</a></li>
  </ul></li>
  <li><a href="#manipuler-des-chaînes-de-caractères" id="toc-manipuler-des-chaînes-de-caractères" class="nav-link" data-scroll-target="#manipuler-des-chaînes-de-caractères"><span class="header-section-number">11</span> Manipuler des chaînes de caractères</a>
  <ul class="collapse">
  <li><a href="#majuscule-minuscule" id="toc-majuscule-minuscule" class="nav-link" data-scroll-target="#majuscule-minuscule"><span class="header-section-number">11.1</span> Majuscule, minuscule</a></li>
  <li><a href="#remplacer-une-chaîne-de-catactère-par-une-autre" id="toc-remplacer-une-chaîne-de-catactère-par-une-autre" class="nav-link" data-scroll-target="#remplacer-une-chaîne-de-catactère-par-une-autre"><span class="header-section-number">11.2</span> Remplacer une chaîne de catactère par une autre</a></li>
  <li><a href="#supprimer-des-blancs" id="toc-supprimer-des-blancs" class="nav-link" data-scroll-target="#supprimer-des-blancs"><span class="header-section-number">11.3</span> Supprimer des blancs</a></li>
  <li><a href="#concaténer-des-chaînes-de-caractères" id="toc-concaténer-des-chaînes-de-caractères" class="nav-link" data-scroll-target="#concaténer-des-chaînes-de-caractères"><span class="header-section-number">11.4</span> Concaténer des chaînes de caractères</a></li>
  <li><a href="#nombre-de-caractères-dans-une-chaîne-de-caractères" id="toc-nombre-de-caractères-dans-une-chaîne-de-caractères" class="nav-link" data-scroll-target="#nombre-de-caractères-dans-une-chaîne-de-caractères"><span class="header-section-number">11.5</span> Nombre de caractères dans une chaîne de caractères</a></li>
  <li><a href="#transformer-plusieurs-caractères-différents" id="toc-transformer-plusieurs-caractères-différents" class="nav-link" data-scroll-target="#transformer-plusieurs-caractères-différents"><span class="header-section-number">11.6</span> Transformer plusieurs caractères différents</a></li>
  </ul></li>
  <li><a href="#gestion-ligne-par-ligne" id="toc-gestion-ligne-par-ligne" class="nav-link" data-scroll-target="#gestion-ligne-par-ligne"><span class="header-section-number">12</span> Gestion ligne par ligne</a>
  <ul class="collapse">
  <li><a href="#numéro-de-lobservation" id="toc-numéro-de-lobservation" class="nav-link" data-scroll-target="#numéro-de-lobservation"><span class="header-section-number">12.1</span> Numéro de l’observation</a></li>
  <li><a href="#trier-des-colonnes" id="toc-trier-des-colonnes" class="nav-link" data-scroll-target="#trier-des-colonnes"><span class="header-section-number">12.2</span> Trier des colonnes</a></li>
  <li><a href="#identifier-le-1er-le-2e-le-dernier-contrat-dun-individu" id="toc-identifier-le-1er-le-2e-le-dernier-contrat-dun-individu" class="nav-link" data-scroll-target="#identifier-le-1er-le-2e-le-dernier-contrat-dun-individu"><span class="header-section-number">12.3</span> Identifier le 1er, le 2e, le dernier contrat d’un individu</a></li>
  <li><a href="#date-de-fin-du-contrat-précédent" id="toc-date-de-fin-du-contrat-précédent" class="nav-link" data-scroll-target="#date-de-fin-du-contrat-précédent"><span class="header-section-number">12.4</span> Date de fin du contrat précédent</a></li>
  <li><a href="#valeur-retardée-lag" id="toc-valeur-retardée-lag" class="nav-link" data-scroll-target="#valeur-retardée-lag"><span class="header-section-number">12.5</span> Valeur retardée (lag)</a></li>
  <li><a href="#transposer-une-base" id="toc-transposer-une-base" class="nav-link" data-scroll-target="#transposer-une-base"><span class="header-section-number">12.6</span> Transposer une base</a></li>
  </ul></li>
  <li><a href="#les-valeurs-manquantes" id="toc-les-valeurs-manquantes" class="nav-link" data-scroll-target="#les-valeurs-manquantes"><span class="header-section-number">13</span> Les valeurs manquantes</a>
  <ul class="collapse">
  <li><a href="#repérer-les-valeurs-manquantes" id="toc-repérer-les-valeurs-manquantes" class="nav-link" data-scroll-target="#repérer-les-valeurs-manquantes"><span class="header-section-number">13.1</span> Repérer les valeurs manquantes</a></li>
  <li><a href="#incidence-des-valeurs-manquantes-différent-entre-sas-et-r" id="toc-incidence-des-valeurs-manquantes-différent-entre-sas-et-r" class="nav-link" data-scroll-target="#incidence-des-valeurs-manquantes-différent-entre-sas-et-r"><span class="header-section-number">13.2</span> Incidence des valeurs manquantes, différent entre SAS et R</a></li>
  </ul></li>
  <li><a href="#les-doublons" id="toc-les-doublons" class="nav-link" data-scroll-target="#les-doublons"><span class="header-section-number">14</span> Les doublons</a>
  <ul class="collapse">
  <li><a href="#repérage-des-doublons" id="toc-repérage-des-doublons" class="nav-link" data-scroll-target="#repérage-des-doublons"><span class="header-section-number">14.1</span> Repérage des doublons</a></li>
  <li><a href="#suppression-des-doublons" id="toc-suppression-des-doublons" class="nav-link" data-scroll-target="#suppression-des-doublons"><span class="header-section-number">14.2</span> Suppression des doublons</a></li>
  </ul></li>
  <li><a href="#les-jointures-de-base" id="toc-les-jointures-de-base" class="nav-link" data-scroll-target="#les-jointures-de-base"><span class="header-section-number">15</span> Les jointures de base</a>
  <ul class="collapse">
  <li><a href="#inner-join-identifiants-communs-aux-bases" id="toc-inner-join-identifiants-communs-aux-bases" class="nav-link" data-scroll-target="#inner-join-identifiants-communs-aux-bases"><span class="header-section-number">15.1</span> Inner Join : identifiants communs aux bases</a></li>
  <li><a href="#left-et-right-join-identifiants-de-lune-des-bases" id="toc-left-et-right-join-identifiants-de-lune-des-bases" class="nav-link" data-scroll-target="#left-et-right-join-identifiants-de-lune-des-bases"><span class="header-section-number">15.2</span> Left et Right Join : identifiants de l’une des bases</a></li>
  <li><a href="#full-join-identifiants-de-lune-ou-lautre-des-bases" id="toc-full-join-identifiants-de-lune-ou-lautre-des-bases" class="nav-link" data-scroll-target="#full-join-identifiants-de-lune-ou-lautre-des-bases"><span class="header-section-number">15.3</span> Full Join : identifiants de l’une ou l’autre des bases</a></li>
  <li><a href="#cross-join-toutes-les-combinaisons-possibles" id="toc-cross-join-toutes-les-combinaisons-possibles" class="nav-link" data-scroll-target="#cross-join-toutes-les-combinaisons-possibles"><span class="header-section-number">15.4</span> Cross Join : toutes les combinaisons possibles</a></li>
  <li><a href="#empiler-les-bases" id="toc-empiler-les-bases" class="nav-link" data-scroll-target="#empiler-les-bases"><span class="header-section-number">15.5</span> Empiler les bases</a></li>
  </ul></li>
  <li><a href="#statistiques-descriptives" id="toc-statistiques-descriptives" class="nav-link" data-scroll-target="#statistiques-descriptives"><span class="header-section-number">16</span> Statistiques descriptives</a>
  <ul class="collapse">
  <li><a href="#somme-moyenne-médiane-minimum-maximum-nombre-de-valeurs" id="toc-somme-moyenne-médiane-minimum-maximum-nombre-de-valeurs" class="nav-link" data-scroll-target="#somme-moyenne-médiane-minimum-maximum-nombre-de-valeurs"><span class="header-section-number">16.1</span> Somme, moyenne, médiane, minimum, maximum, nombre de valeurs</a></li>
  <li><a href="#quantiles" id="toc-quantiles" class="nav-link" data-scroll-target="#quantiles"><span class="header-section-number">16.2</span> Quantiles</a></li>
  <li><a href="#tableaux-de-fréquence-contingence-proc-freq" id="toc-tableaux-de-fréquence-contingence-proc-freq" class="nav-link" data-scroll-target="#tableaux-de-fréquence-contingence-proc-freq"><span class="header-section-number">16.3</span> Tableaux de fréquence / contingence : proc freq</a></li>
  <li><a href="#proportion" id="toc-proportion" class="nav-link" data-scroll-target="#proportion"><span class="header-section-number">16.4</span> Proportion</a></li>
  </ul></li>
  <li><a href="#fonction-macros-sas" id="toc-fonction-macros-sas" class="nav-link" data-scroll-target="#fonction-macros-sas"><span class="header-section-number">17</span> Fonction, macros SAS</a>
  <ul class="collapse">
  <li><a href="#boucles-itérations" id="toc-boucles-itérations" class="nav-link" data-scroll-target="#boucles-itérations"><span class="header-section-number">17.1</span> Boucles, itérations</a></li>
  <li><a href="#créations-automatiques-de-bases-empilements-de-bases" id="toc-créations-automatiques-de-bases-empilements-de-bases" class="nav-link" data-scroll-target="#créations-automatiques-de-bases-empilements-de-bases"><span class="header-section-number">17.2</span> Créations automatiques de bases, empilements de bases</a></li>
  </ul></li>
  <li><a href="#fin-du-programme" id="toc-fin-du-programme" class="nav-link" data-scroll-target="#fin-du-programme"><span class="header-section-number">18</span> Fin du programme</a>
  <ul class="collapse">
  <li><a href="#supprimer-toutes-les-bases-de-la-mémoire-vive-work-ram" id="toc-supprimer-toutes-les-bases-de-la-mémoire-vive-work-ram" class="nav-link" data-scroll-target="#supprimer-toutes-les-bases-de-la-mémoire-vive-work-ram"><span class="header-section-number">18.1</span> Supprimer toutes les bases de la mémoire vive (work RAM)</a></li>
  </ul></li>
  <li><a href="#points-de-vigilance-en-sas" id="toc-points-de-vigilance-en-sas" class="nav-link" data-scroll-target="#points-de-vigilance-en-sas"><span class="header-section-number">19</span> Points de vigilance en SAS</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Aide-mémoire SAS - <code>R</code></h1>
  <div class="quarto-categories">
    <div class="quarto-category">R</div>
    <div class="quarto-category">SAS</div>
  </div>
  </div>

<div>
  <div class="description">
    <p>Un aide-mémoire pour les statisticiens qui connaissent SAS et souhaitent travailler avec <code>R</code>.</p>
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Auteur·rice·s</div>
    <div class="quarto-title-meta-contents">
             <p>Nassab ABDALLAH<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> </p>
             <p>Damien EUZENAT<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> </p>
             <p>Sébastien LI-THIAO-TE<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Date de publication</div>
    <div class="quarto-title-meta-contents">
      <p class="date">15 mars 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>L’aide-mémoire a pour but de fournir des codes écrits en SAS et d’en donner la traduction en R de différentes manières possibles :</p>
<ul>
<li><p>base R</p></li>
<li><p>tidyverse</p></li>
<li><p>data.table</p></li>
<li><p>arrow/duckdb</p></li>
</ul>
<p>Les éléments utilisés sont des codes typiques qui sont appliqués dans la production statistique ou dans la réalisation d’études descriptives.</p>
<p>Ce document s’adresse notamment aux utilisateurs de SAS qui veulent connaître la traduction du code SAS en R, aux utilisateurs de R qui ont besoin de comprendre le code SAS, ainsi qu’aux utilisateurs d’un environnement R qui sont intéressés par la traduction dans un autre environnement R.</p>
<p>Il se veut complémentaire de la documentation en ligne en français Utilit’R, née à l’Insee (<a href="https://www.book.utilitr.org/" class="uri">https://www.book.utilitr.org/</a>). Le lecteur est invité à s’y référer pour obtenir des informations importantes sur l’utilisation de R et qui ne sont pas discutées dans ce document, comme l’importation de données en R (<a href="https://www.book.utilitr.org/03_fiches_thematiques/fiche_import_fichiers_plats" class="uri">https://www.book.utilitr.org/03_fiches_thematiques/fiche_import_fichiers_plats</a>).</p>
<section id="importation-des-packages" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="importation-des-packages"><span class="header-section-number">1</span> Importation des packages</h2>
</section>
<section id="section" class="level2 unnumbered unlisted">
<h2 class="unnumbered unlisted anchored" data-anchor-id="section"></h2>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false"><code>Tidyverse</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false"><code>data.table</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false"><code>arrow/duckdb</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#library(duckdb)</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#library(arrow)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="chemin-vers-le-bureau-et-affichage-de-la-date-et-de-lannée" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="chemin-vers-le-bureau-et-affichage-de-la-date-et-de-lannée"><span class="header-section-number">2</span> Chemin vers le bureau et affichage de la date et de l’année</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false"><code>R base</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Chemin du bureau de l<span class="st">'utilisateur */</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="st">/* On vide la log */</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="st">dm "log; clear; ";</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="st">/* On récupère déjà l'</span>identifiant de l<span class="st">'utilisateur */</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="st">%let user = &amp;sysuserid;</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="st">/* Chemin proprement dit */</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="st">%let bureau = C:\Users\&amp;user.\Desktop;</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="st">libname bur "&amp;bureau.";</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="st">/* Affichage de l'</span>année <span class="sc">*</span><span class="er">/</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="sc">%let an = %</span><span class="fu">sysfunc</span>(<span class="fu">year</span>(%<span class="fu">sysfunc</span>(<span class="fu">today</span>())));</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> <span class="er">&amp;</span> (esperluette) indique à SAS qu<span class="st">'il doit remplacer an par sa valeur définie par le %let */</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="st">%put Année : &amp;an.;</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="st">/* Autre possibilité */</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="st">data _null_;call symput('</span>annee<span class="st">', strip(year(today())));run;</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="st">%put Année (autre méthode) : &amp;annee.;</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="st">/* Année passée */</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="st">%put Année passée : %eval(&amp;an. - 1);</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On récupère déjà l'identifiant de l'utilisateur</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>user <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"USERNAME"</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Chemin d'accès au bureau de l'utilisateur</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>chemin <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"C:/Users"</span>, user, <span class="st">"Desktop"</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Affichage de l'année</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>annee <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">year</span>(<span class="fu">Sys.Date</span>())</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">"Année : %04d"</span>, annee)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">"Année : "</span>, annee))</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>annee_1 <span class="ot">&lt;-</span> annee <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Année passée: "</span>, annee_1)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (annee <span class="sc">&gt;=</span> <span class="dv">2023</span>) {</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"Nous sommes en 2023 ou après"</span>)</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"Nous sommes en 2022 ou avant"</span>)</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Afficher le répertoire de travail et le définir si besoin</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Afficher </span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Le définir si besoin </span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#setwd(dir="nom du répertoire")</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="création-dune-base-de-données" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="création-dune-base-de-données"><span class="header-section-number">3</span> Création d’une base de données</h2>
<p>Données fictives sur des formations</p>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false"><code>tidyverse</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-4" role="tab" aria-controls="tabset-3-4" aria-selected="false"><code>data.table</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-5" role="tab" aria-controls="tabset-3-5" aria-selected="false"><code>arrow/duckdb</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>data Donnees;</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  infile cards dsd dlm<span class="ot">=</span><span class="st">'|'</span>;</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  format Identifiant <span class="sc">$</span><span class="fl">3.</span> Sexe_red <span class="fl">1.</span> CSP <span class="sc">$</span><span class="fl">1.</span> Niveau <span class="sc">$</span><span class="fl">30.</span> Date_naissance ddmmyy10. Date_entree ddmmyy10. Duree Note_Contenu Note_Formateur Note_Moyens Note_Accompagnement Note_Materiel poids_sondage;</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  input Identifiant <span class="sc">$</span> Sexe_red CSP <span class="sc">$</span> Niveau <span class="sc">$</span> Date_naissance <span class="sc">:</span>ddmmyy10. Date_entree <span class="sc">:</span>ddmmyy10. Duree Note_Contenu Note_Formateur Note_Moyens Note_Accompagnement Note_Materiel poids_sondage;</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  cards;</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="dv">173</span><span class="sc">|</span><span class="dv">2</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span>Qualifie<span class="sc">|</span><span class="dv">17</span><span class="sc">/</span><span class="dv">06</span><span class="sc">/</span><span class="dv">1998</span><span class="sc">|</span><span class="dv">01</span><span class="sc">/</span><span class="dv">01</span><span class="sc">/</span><span class="dv">2021</span><span class="sc">|</span><span class="dv">308</span><span class="sc">|</span><span class="dv">12</span><span class="sc">|</span><span class="dv">6</span><span class="sc">|</span><span class="dv">17</span><span class="sc">|</span><span class="dv">4</span><span class="sc">|</span><span class="dv">19</span><span class="sc">|</span><span class="fl">117.1</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="dv">173</span><span class="sc">|</span><span class="dv">2</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span>qualifie<span class="sc">|</span><span class="dv">17</span><span class="sc">/</span><span class="dv">06</span><span class="sc">/</span><span class="dv">1998</span><span class="sc">|</span><span class="dv">01</span><span class="sc">/</span><span class="dv">01</span><span class="sc">/</span><span class="dv">2022</span><span class="sc">|</span><span class="dv">365</span><span class="sc">|</span><span class="dv">6</span><span class="sc">||</span><span class="dv">12</span><span class="sc">|</span><span class="dv">7</span><span class="sc">|</span><span class="dv">14</span><span class="sc">|</span><span class="fl">98.3</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="dv">173</span><span class="sc">|</span><span class="dv">2</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span>qualifie<span class="sc">|</span><span class="dv">17</span><span class="sc">/</span><span class="dv">06</span><span class="sc">/</span><span class="dv">1998</span><span class="sc">|</span><span class="dv">06</span><span class="sc">/</span><span class="dv">01</span><span class="sc">/</span><span class="dv">2022</span><span class="sc">|</span><span class="dv">185</span><span class="sc">|</span><span class="dv">8</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="dv">11</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span><span class="dv">9</span><span class="sc">|</span><span class="fl">214.6</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="dv">173</span><span class="sc">|</span><span class="dv">2</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span>Qualifie<span class="sc">|</span><span class="dv">17</span><span class="sc">/</span><span class="dv">06</span><span class="sc">/</span><span class="dv">1998</span><span class="sc">|</span><span class="dv">02</span><span class="sc">/</span><span class="dv">01</span><span class="sc">/</span><span class="dv">2023</span><span class="sc">|</span><span class="dv">365</span><span class="sc">|</span><span class="dv">14</span><span class="sc">|</span><span class="dv">15</span><span class="sc">|</span><span class="dv">15</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="dv">8</span><span class="sc">|</span><span class="fl">84.7</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="dv">174</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span>qualifie<span class="sc">|</span><span class="dv">08</span><span class="sc">/</span><span class="dv">12</span><span class="sc">/</span><span class="dv">1984</span><span class="sc">|</span><span class="dv">17</span><span class="sc">/</span><span class="dv">08</span><span class="sc">/</span><span class="dv">2021</span><span class="sc">|</span><span class="dv">183</span><span class="sc">|</span><span class="dv">17</span><span class="sc">|</span><span class="dv">18</span><span class="sc">|</span><span class="dv">20</span><span class="sc">|</span><span class="dv">15</span><span class="sc">|</span><span class="dv">12</span><span class="sc">|</span><span class="fl">65.9</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="dv">175</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span>qualifie<span class="sc">|</span><span class="dv">16</span><span class="sc">/</span><span class="dv">09</span><span class="sc">/</span><span class="dv">1989</span><span class="sc">|</span><span class="dv">21</span><span class="sc">/</span><span class="dv">12</span><span class="sc">/</span><span class="dv">2022</span><span class="sc">|</span><span class="dv">730</span><span class="sc">|</span><span class="dv">5</span><span class="sc">|</span><span class="dv">5</span><span class="sc">|</span><span class="dv">8</span><span class="sc">|</span><span class="dv">4</span><span class="sc">|</span><span class="dv">9</span><span class="sc">|</span><span class="fl">148.2</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  <span class="dv">198</span><span class="sc">|</span><span class="dv">2</span><span class="sc">|</span><span class="dv">4</span><span class="sc">|</span>Non qualifie<span class="sc">|</span><span class="dv">17</span><span class="sc">/</span><span class="dv">03</span><span class="sc">/</span><span class="dv">1987</span><span class="sc">|</span><span class="dv">28</span><span class="sc">/</span><span class="dv">07</span><span class="sc">/</span><span class="dv">2022</span><span class="sc">|</span><span class="dv">30</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="dv">16</span><span class="sc">|</span><span class="dv">8</span><span class="sc">|</span><span class="fl">89.6</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  <span class="dv">198</span><span class="sc">|</span><span class="dv">2</span><span class="sc">|</span><span class="dv">4</span><span class="sc">|</span>Qualifie<span class="sc">|</span><span class="dv">17</span><span class="sc">/</span><span class="dv">03</span><span class="sc">/</span><span class="dv">1987</span><span class="sc">|</span><span class="dv">17</span><span class="sc">/</span><span class="dv">11</span><span class="sc">/</span><span class="dv">2022</span><span class="sc">|</span><span class="dv">164</span><span class="sc">|</span><span class="dv">11</span><span class="sc">|</span><span class="dv">7</span><span class="sc">|</span><span class="dv">6</span><span class="sc">|</span><span class="dv">14</span><span class="sc">|</span><span class="dv">13</span><span class="sc">|</span><span class="fl">100.3</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  <span class="dv">198</span><span class="sc">|</span><span class="dv">2</span><span class="sc">|</span><span class="dv">4</span><span class="sc">|</span>Qualifie<span class="sc">|</span><span class="dv">17</span><span class="sc">/</span><span class="dv">03</span><span class="sc">/</span><span class="dv">1987</span><span class="sc">|</span><span class="dv">21</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">2023</span><span class="sc">|</span><span class="dv">365</span><span class="sc">|</span><span class="dv">9</span><span class="sc">|</span><span class="dv">20</span><span class="sc">|</span><span class="dv">3</span><span class="sc">|</span><span class="dv">4</span><span class="sc">|</span><span class="dv">17</span><span class="sc">|</span><span class="fl">49.3</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  <span class="dv">168</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span><span class="dv">2</span><span class="sc">|</span>Qualifie<span class="sc">|</span><span class="dv">30</span><span class="sc">/</span><span class="dv">07</span><span class="sc">/</span><span class="dv">2002</span><span class="sc">|</span><span class="dv">04</span><span class="sc">/</span><span class="dv">09</span><span class="sc">/</span><span class="dv">2019</span><span class="sc">|</span><span class="dv">365</span><span class="sc">|</span><span class="dv">18</span><span class="sc">|</span><span class="dv">11</span><span class="sc">|</span><span class="dv">20</span><span class="sc">|</span><span class="dv">13</span><span class="sc">|</span><span class="dv">15</span><span class="sc">|</span><span class="fl">148.2</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  <span class="dv">211</span><span class="sc">|</span><span class="dv">2</span><span class="sc">|</span><span class="dv">3</span><span class="sc">|</span>Non qualifie<span class="sc">||</span><span class="dv">17</span><span class="sc">/</span><span class="dv">12</span><span class="sc">/</span><span class="dv">2021</span><span class="sc">|</span><span class="dv">135</span><span class="sc">|</span><span class="dv">16</span><span class="sc">|</span><span class="dv">16</span><span class="sc">|</span><span class="dv">15</span><span class="sc">|</span><span class="dv">12</span><span class="sc">|</span><span class="dv">9</span><span class="sc">|</span><span class="fl">86.4</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">278</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span><span class="dv">5</span><span class="sc">|</span>Qualifie<span class="sc">|</span><span class="dv">10</span><span class="sc">/</span><span class="dv">08</span><span class="sc">/</span><span class="dv">1948</span><span class="sc">|</span><span class="dv">07</span><span class="sc">/</span><span class="dv">06</span><span class="sc">/</span><span class="dv">2018</span><span class="sc">|</span><span class="dv">365</span><span class="sc">|</span><span class="dv">14</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="dv">6</span><span class="sc">|</span><span class="dv">8</span><span class="sc">|</span><span class="dv">12</span><span class="sc">|</span><span class="fl">99.2</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>  <span class="dv">347</span><span class="sc">|</span><span class="dv">2</span><span class="sc">|</span><span class="dv">5</span><span class="sc">|</span>Qualifie<span class="sc">|</span><span class="dv">13</span><span class="sc">/</span><span class="dv">09</span><span class="sc">/</span><span class="dv">1955</span><span class="sc">||</span><span class="dv">180</span><span class="sc">|</span><span class="dv">12</span><span class="sc">|</span><span class="dv">5</span><span class="sc">|</span><span class="dv">7</span><span class="sc">|</span><span class="dv">11</span><span class="sc">|</span><span class="dv">12</span><span class="sc">|</span><span class="fl">105.6</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">112</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span><span class="dv">3</span><span class="sc">|</span>Non qualifie<span class="sc">|</span><span class="dv">13</span><span class="sc">/</span><span class="dv">09</span><span class="sc">/</span><span class="dv">2001</span><span class="sc">|</span><span class="dv">02</span><span class="sc">/</span><span class="dv">03</span><span class="sc">/</span><span class="dv">2022</span><span class="sc">|</span><span class="dv">212</span><span class="sc">|</span><span class="dv">3</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="dv">11</span><span class="sc">|</span><span class="dv">9</span><span class="sc">|</span><span class="dv">8</span><span class="sc">|</span><span class="fl">123.1</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">112</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span><span class="dv">3</span><span class="sc">|</span>Non qualifie<span class="sc">|</span><span class="dv">13</span><span class="sc">/</span><span class="dv">09</span><span class="sc">/</span><span class="dv">2001</span><span class="sc">|</span><span class="dv">01</span><span class="sc">/</span><span class="dv">03</span><span class="sc">/</span><span class="dv">2021</span><span class="sc">|</span><span class="dv">365</span><span class="sc">|</span><span class="dv">7</span><span class="sc">|</span><span class="dv">13</span><span class="sc">|</span><span class="dv">8</span><span class="sc">|</span><span class="dv">19</span><span class="sc">|</span><span class="dv">2</span><span class="sc">|</span><span class="fl">137.4</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">112</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span><span class="dv">3</span><span class="sc">|</span>Non qualifie<span class="sc">|</span><span class="dv">13</span><span class="sc">/</span><span class="dv">09</span><span class="sc">/</span><span class="dv">2001</span><span class="sc">|</span><span class="dv">01</span><span class="sc">/</span><span class="dv">12</span><span class="sc">/</span><span class="dv">2023</span><span class="sc">|</span><span class="dv">365</span><span class="sc">||</span><span class="er">||||</span><span class="fl">187.6</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">087</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span><span class="dv">3</span><span class="sc">|</span>Non qualifie<span class="sc">||</span><span class="er">|</span><span class="dv">365</span><span class="sc">||</span><span class="er">||||</span><span class="fl">87.3</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">087</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span><span class="dv">3</span><span class="sc">|</span>Non qualifie<span class="sc">||</span><span class="dv">31</span><span class="sc">/</span><span class="dv">10</span><span class="sc">/</span><span class="dv">2020</span><span class="sc">|</span><span class="dv">365</span><span class="sc">||</span><span class="er">||||</span><span class="fl">87.3</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>  <span class="dv">099</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span><span class="dv">3</span><span class="sc">|</span>qualifie<span class="sc">|</span><span class="dv">06</span><span class="sc">/</span><span class="dv">06</span><span class="sc">/</span><span class="dv">1998</span><span class="sc">|</span><span class="dv">01</span><span class="sc">/</span><span class="dv">03</span><span class="sc">/</span><span class="dv">2021</span><span class="sc">|</span><span class="dv">364</span><span class="sc">|</span><span class="dv">12</span><span class="sc">|</span><span class="dv">11</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="dv">12</span><span class="sc">|</span><span class="dv">13</span><span class="sc">|</span><span class="fl">169.3</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>  <span class="dv">099</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span><span class="dv">3</span><span class="sc">|</span>qualifie<span class="sc">|</span><span class="dv">06</span><span class="sc">/</span><span class="dv">06</span><span class="sc">/</span><span class="dv">1998</span><span class="sc">|</span><span class="dv">01</span><span class="sc">/</span><span class="dv">03</span><span class="sc">/</span><span class="dv">2022</span><span class="sc">|</span><span class="dv">364</span><span class="sc">|</span><span class="dv">12</span><span class="sc">|</span><span class="dv">11</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="dv">12</span><span class="sc">|</span><span class="dv">13</span><span class="sc">|</span><span class="fl">169.3</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>  <span class="dv">099</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span><span class="dv">3</span><span class="sc">|</span>qualifie<span class="sc">|</span><span class="dv">06</span><span class="sc">/</span><span class="dv">06</span><span class="sc">/</span><span class="dv">1998</span><span class="sc">|</span><span class="dv">01</span><span class="sc">/</span><span class="dv">03</span><span class="sc">/</span><span class="dv">2023</span><span class="sc">|</span><span class="dv">364</span><span class="sc">|</span><span class="dv">12</span><span class="sc">|</span><span class="dv">11</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="dv">12</span><span class="sc">|</span><span class="dv">13</span><span class="sc">|</span><span class="fl">169.3</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">187</span><span class="sc">|</span><span class="dv">2</span><span class="sc">|</span><span class="dv">2</span><span class="sc">|</span>qualifie<span class="sc">|</span><span class="dv">05</span><span class="sc">/</span><span class="dv">12</span><span class="sc">/</span><span class="dv">1986</span><span class="sc">|</span><span class="dv">01</span><span class="sc">/</span><span class="dv">01</span><span class="sc">/</span><span class="dv">2022</span><span class="sc">|</span><span class="dv">364</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="fl">169.3</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">187</span><span class="sc">|</span><span class="dv">2</span><span class="sc">|</span><span class="dv">2</span><span class="sc">|</span>qualifie<span class="sc">|</span><span class="dv">05</span><span class="sc">/</span><span class="dv">12</span><span class="sc">/</span><span class="dv">1986</span><span class="sc">|</span><span class="dv">01</span><span class="sc">/</span><span class="dv">01</span><span class="sc">/</span><span class="dv">2023</span><span class="sc">|</span><span class="dv">364</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="fl">234.1</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">689</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span><span class="dv">1</span><span class="sc">||</span><span class="dv">01</span><span class="sc">/</span><span class="dv">12</span><span class="sc">/</span><span class="dv">2000</span><span class="sc">|</span><span class="dv">06</span><span class="sc">/</span><span class="dv">11</span><span class="sc">/</span><span class="dv">2017</span><span class="sc">|</span><span class="dv">123</span><span class="sc">|</span><span class="dv">9</span><span class="sc">|</span><span class="dv">7</span><span class="sc">|</span><span class="dv">8</span><span class="sc">|</span><span class="dv">13</span><span class="sc">|</span><span class="dv">16</span><span class="sc">|</span><span class="fl">189.3</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>  <span class="dv">765</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span><span class="dv">4</span><span class="sc">|</span>Non qualifie<span class="sc">|</span><span class="dv">26</span><span class="sc">/</span><span class="dv">12</span><span class="sc">/</span><span class="dv">1995</span><span class="sc">|</span><span class="dv">17</span><span class="sc">/</span><span class="dv">04</span><span class="sc">/</span><span class="dv">2020</span><span class="sc">|</span><span class="dv">160</span><span class="sc">|</span><span class="dv">13</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="dv">12</span><span class="sc">|</span><span class="dv">18</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="fl">45.9</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>  <span class="dv">765</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span><span class="dv">4</span><span class="sc">|</span>Non qualifie<span class="sc">|</span><span class="dv">26</span><span class="sc">/</span><span class="dv">12</span><span class="sc">/</span><span class="dv">1995</span><span class="sc">|</span><span class="dv">17</span><span class="sc">/</span><span class="dv">04</span><span class="sc">/</span><span class="dv">2020</span><span class="sc">|</span><span class="dv">160</span><span class="sc">|</span><span class="dv">13</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="dv">12</span><span class="sc">|</span><span class="dv">18</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="fl">45.9</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>  <span class="dv">765</span><span class="sc">|</span><span class="dv">1</span><span class="sc">|</span><span class="dv">4</span><span class="sc">|</span>Non qualifie<span class="sc">|</span><span class="dv">26</span><span class="sc">/</span><span class="dv">12</span><span class="sc">/</span><span class="dv">1995</span><span class="sc">|</span><span class="dv">17</span><span class="sc">/</span><span class="dv">04</span><span class="sc">/</span><span class="dv">2020</span><span class="sc">|</span><span class="dv">160</span><span class="sc">|</span><span class="dv">13</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="dv">12</span><span class="sc">|</span><span class="dv">18</span><span class="sc">|</span><span class="dv">10</span><span class="sc">|</span><span class="fl">45.9</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>;</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Identifiant =</span> <span class="fu">c</span>(<span class="st">"173"</span>, <span class="st">"173"</span>, <span class="st">"173"</span>, <span class="st">"173"</span>, <span class="st">"174"</span>, <span class="st">"175"</span>, <span class="st">"198"</span>, <span class="st">"198"</span>, <span class="st">"198"</span>, <span class="st">"168"</span>, <span class="st">"211"</span>, <span class="st">"278"</span>, <span class="st">"347"</span>, <span class="st">"112"</span>, <span class="st">"112"</span>, <span class="st">"112"</span>, <span class="st">"087"</span>, <span class="st">"087"</span>, <span class="st">"099"</span>, <span class="st">"099"</span>, <span class="st">"099"</span>, <span class="st">"187"</span>, <span class="st">"187"</span>, <span class="st">"689"</span>, <span class="st">"765"</span>, <span class="st">"765"</span>, <span class="st">"765"</span>),</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Sexe_red =</span> <span class="fu">c</span>(<span class="st">"2"</span>, <span class="st">"2"</span>, <span class="st">"2"</span>, <span class="st">"2"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"2"</span>, <span class="st">"2"</span>, <span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"2"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>),</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">CSP =</span> <span class="fu">c</span>(<span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"4"</span>, <span class="st">"4"</span>, <span class="st">"4"</span>, <span class="st">"2"</span>, <span class="st">"3"</span>, <span class="st">"5"</span>, <span class="st">"5"</span>, <span class="st">"3"</span>, <span class="st">"3"</span>, <span class="st">"3"</span>, <span class="st">"3"</span>, <span class="st">"3"</span>, <span class="st">"3"</span>, <span class="st">"3"</span>, <span class="st">"3"</span>, <span class="st">"2"</span>, <span class="st">"2"</span>, <span class="st">"1"</span>, <span class="st">"4"</span>, <span class="st">"4"</span>, <span class="st">"4"</span>),</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Niveau =</span> <span class="fu">c</span>(<span class="st">"Qualifie"</span>, <span class="st">"qualifie"</span>, <span class="st">"qualifie"</span>, <span class="st">"Non Qualifie"</span>, <span class="st">"qualifie"</span>, <span class="st">"qualifie"</span>, <span class="st">"Non qualifie"</span>, <span class="st">"Qualifie"</span>, <span class="st">"Qualifie"</span>, <span class="st">"Qualifie"</span>, <span class="st">"Non qualifie"</span>, <span class="st">"Qualifie"</span>, <span class="st">"Qualifie"</span>, <span class="st">"Non qualifie"</span>, </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>             <span class="st">"Non qualifie"</span>, <span class="st">"qualifie"</span>, <span class="st">"Non qualifie"</span>, <span class="st">"Non qualifie"</span>, <span class="st">"qualifie"</span>, <span class="st">"qualifie"</span>, <span class="st">"qualifie"</span>, <span class="st">"qualifie"</span>, <span class="st">"qualifie"</span>, <span class="cn">NA</span>, <span class="st">"Non qualifie"</span>, <span class="st">"Non qualifie"</span>, <span class="st">"Non qualifie"</span>),</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">Date_naissance =</span> <span class="fu">c</span>(<span class="st">"17/06/1998"</span>, <span class="st">"17/06/1998"</span>, <span class="st">"17/06/1998"</span>, <span class="st">"17/06/1998"</span>, <span class="st">"08/12/1984"</span>, <span class="st">"16/09/1989"</span>, <span class="st">"17/03/1987"</span>, <span class="st">"17/03/1987"</span>, <span class="st">"17/03/1987"</span>, <span class="st">"30/07/2002"</span>, <span class="cn">NA</span>, <span class="st">"10/08/1948"</span>, </span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"13/09/1955"</span>, <span class="st">"13/09/2001"</span>, <span class="st">"13/09/2001"</span>, <span class="st">"13/09/2001"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"06/06/1998"</span>, <span class="st">"06/06/1998"</span>, <span class="st">"06/06/1998"</span>, <span class="st">"05/12/1986"</span>, <span class="st">"05/12/1986"</span>, <span class="st">"01/12/2000"</span>, <span class="st">"26/12/1995"</span>, <span class="st">"26/12/1995"</span>, <span class="st">"26/12/1995"</span>),</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">Date_entree =</span> <span class="fu">c</span>(<span class="st">"01/01/2021"</span>, <span class="st">"01/01/2022"</span>, <span class="st">"06/01/2022"</span>, <span class="st">"02/01/2023"</span>, <span class="st">"17/08/2021"</span>, <span class="st">"21/12/2022"</span>, <span class="st">"28/07/2022"</span>, <span class="st">"17/11/2022"</span>, <span class="st">"21/02/2023"</span>, <span class="st">"04/09/2019"</span>, <span class="st">"17/12/2021"</span>, <span class="st">"07/06/2018"</span>, <span class="cn">NA</span>, <span class="st">"02/03/2022"</span>, <span class="st">"01/03/2021"</span>, <span class="st">"01/12/2023"</span>, <span class="cn">NA</span>, </span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"31/10/2020"</span>, <span class="st">"01/03/2021"</span>, <span class="st">"01/03/2022"</span>, <span class="st">"01/03/2023"</span>, <span class="st">"01/01/2022"</span>, <span class="st">"01/01/2023"</span>, <span class="st">"06/11/2017"</span>, <span class="st">"17/04/2020"</span>, <span class="st">"17/04/2020"</span>, <span class="st">"17/04/2020"</span>),</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">Duree =</span> <span class="fu">c</span>(<span class="st">"308"</span>, <span class="st">"365"</span>, <span class="st">"185"</span>, <span class="st">"365"</span>, <span class="st">"183"</span>, <span class="st">"730"</span>, <span class="st">"30"</span>, <span class="st">"164"</span>, <span class="st">"365"</span>, <span class="st">"365"</span>, <span class="st">"135"</span>, <span class="st">"365"</span>, <span class="st">"180"</span>, <span class="st">"212"</span>, <span class="st">"365"</span>, <span class="st">"365"</span>, <span class="st">"365"</span>, <span class="st">"365"</span>, <span class="st">"364"</span>, <span class="st">"364"</span>, <span class="st">"364"</span>, <span class="st">"364"</span>, <span class="st">"364"</span>, <span class="st">"123"</span>, <span class="st">"160"</span>, <span class="st">"160"</span>, <span class="st">"160"</span>),</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">Note_Contenu =</span> <span class="fu">c</span>(<span class="st">"12"</span>, <span class="st">"6"</span>, <span class="st">"8"</span>, <span class="st">"14"</span>, <span class="st">"17"</span>, <span class="st">"5"</span>, <span class="st">"10"</span>, <span class="st">"11"</span>, <span class="st">"9"</span>, <span class="st">"18"</span>, <span class="st">"16"</span>, <span class="st">"14"</span>, <span class="st">"12"</span>, <span class="st">"3"</span>, <span class="st">"7"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"12"</span>, <span class="st">"12"</span>, <span class="st">"12"</span>, <span class="st">"10"</span>, <span class="st">"10"</span>, <span class="st">"9"</span>, <span class="st">"13"</span>, <span class="st">"13"</span>, <span class="st">"13"</span>),</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">Note_Formateur =</span> <span class="fu">c</span>(<span class="st">"6"</span>, <span class="cn">NA</span>, <span class="st">"10"</span>, <span class="st">"15"</span>, <span class="st">"18"</span>, <span class="st">"5"</span>, <span class="st">"10"</span>, <span class="st">"7"</span>, <span class="st">"20"</span>, <span class="st">"11"</span>, <span class="st">"16"</span>, <span class="st">"10"</span>, <span class="st">"5"</span>, <span class="st">"10"</span>, <span class="st">"13"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"11"</span>, <span class="st">"11"</span>, <span class="st">"11"</span>, <span class="st">"10"</span>, <span class="st">"10"</span>, <span class="st">"7"</span>, <span class="st">"10"</span>, <span class="st">"10"</span>, <span class="st">"10"</span>),</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">Note_Moyens =</span> <span class="fu">c</span>(<span class="st">"17"</span>, <span class="st">"12"</span>, <span class="st">"11"</span>, <span class="st">"15"</span>, <span class="st">"20"</span>, <span class="st">"8"</span>, <span class="st">"10"</span>, <span class="st">"6"</span>, <span class="st">"3"</span>, <span class="st">"20"</span>, <span class="st">"15"</span>, <span class="st">"6"</span>, <span class="st">"7"</span>, <span class="st">"11"</span>, <span class="st">"8"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"10"</span>, <span class="st">"10"</span>, <span class="st">"10"</span>, <span class="st">"10"</span>, <span class="st">"10"</span>, <span class="st">"8"</span>, <span class="st">"12"</span>, <span class="st">"12"</span>, <span class="st">"12"</span>),</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">Note_Accompagnement =</span> <span class="fu">c</span>(<span class="st">"4"</span>, <span class="st">"7"</span>, <span class="st">"1"</span>, <span class="st">"10"</span>, <span class="st">"15"</span>, <span class="st">"4"</span>, <span class="st">"16"</span>, <span class="st">"14"</span>, <span class="st">"4"</span>, <span class="st">"13"</span>, <span class="st">"12"</span>, <span class="st">"8"</span>, <span class="st">"11"</span>, <span class="st">"9"</span>, <span class="st">"19"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"12"</span>, <span class="st">"12"</span>, <span class="st">"12"</span>, <span class="st">"10"</span>, <span class="st">"10"</span>, <span class="st">"13"</span>, <span class="st">"18"</span>, <span class="st">"18"</span>, <span class="st">"18"</span>),</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">Note_Materiel =</span> <span class="fu">c</span>(<span class="st">"19"</span>, <span class="st">"14"</span>, <span class="st">"9"</span>, <span class="st">"8"</span>, <span class="st">"12"</span>, <span class="st">"9"</span>, <span class="st">"8"</span>, <span class="st">"13"</span>, <span class="st">"17"</span>, <span class="st">"15"</span>, <span class="st">"9"</span>, <span class="st">"12"</span>, <span class="st">"12"</span>, <span class="st">"8"</span>, <span class="st">"2"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"13"</span>, <span class="st">"13"</span>, <span class="st">"13"</span>, <span class="st">"10"</span>, <span class="st">"10"</span>, <span class="st">"16"</span>, <span class="st">"10"</span>, <span class="st">"10"</span>, <span class="st">"10"</span>),</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">poids_sondage =</span> <span class="fu">c</span>(<span class="st">"117.1"</span>, <span class="st">"98.3"</span>, <span class="st">"214.6"</span>, <span class="st">"84.7"</span>, <span class="st">"65.9"</span>, <span class="st">"148.2"</span>, <span class="st">"89.6"</span>, <span class="st">"100.3"</span>, <span class="st">"49.3"</span>, <span class="st">"148.2"</span>, <span class="st">"86.4"</span>, <span class="st">"99.2"</span>, <span class="st">"105.6"</span>, <span class="st">"123.1"</span>, <span class="st">"137.4"</span>, <span class="st">"187.6"</span>, <span class="st">"87.3"</span>, <span class="st">"87.3"</span>, <span class="st">"169.3"</span>, <span class="st">"169.3"</span>, <span class="st">"169.3"</span>, <span class="st">"169.3"</span>, <span class="st">"234.1"</span>, <span class="st">"189.3"</span>, <span class="st">"45.9"</span>, <span class="st">"45.9"</span>, <span class="st">"45.9"</span>)</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="st">"Identifiant|Sexe_red|CSP|Niveau|Date_naissance|Date_entree|Duree|Note_Contenu|Note_Formateur|Note_Moyens|Note_Accompagnement|Note_Materiel|poids_sondage</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="st">173|2|1|Qualifie|17/06/1998|01/01/2021|308|12|6|17|4|19|117.1</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="st">173|2|1|qualifie|17/06/1998|01/01/2022|365|6||12|7|14|98.3</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="st">173|2|1|qualifie|17/06/1998|06/01/2022|185|8|10|11|1|9|214.6</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="st">173|2|1|Qualifie|17/06/1998|02/01/2023|365|14|15|15|10|8|84.7</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="st">174|1|1|qualifie|08/12/1984|17/08/2021|183|17|18|20|15|12|65.9</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="st">175|1|1|qualifie|16/09/1989|21/12/2022|730|5|5|8|4|9|148.2</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="st">198|2|4|Non qualifie|17/03/1987|28/07/2022|30|10|10|10|16|8|89.6</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="st">198|2|4|Qualifie|17/03/1987|17/11/2022|164|11|7|6|14|13|100.3</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="st">198|2|4|Qualifie|17/03/1987|21/02/2023|365|9|20|3|4|17|49.3</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="st">168|1|2|Qualifie|30/07/2002|04/09/2019|365|18|11|20|13|15|148.2</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="st">211|2|3|Non qualifie||17/12/2021|135|16|16|15|12|9|86.4</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="st">278|1|5|Qualifie|10/08/1948|07/06/2018|365|14|10|6|8|12|99.2</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="st">347|2|5|Qualifie|13/09/1955||180|12|5|7|11|12|105.6</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="st">112|1|3|Non qualifie|13/09/2001|02/03/2022|212|3|10|11|9|8|123.1</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="st">112|1|3|Non qualifie|13/09/2001|01/03/2021|365|7|13|8|19|2|137.4</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="st">112|1|3|Non qualifie|13/09/2001|01/12/2023|365||||||187.6</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="st">087|1|3|Non qualifie|||365||||||87.3</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="st">087|1|3|Non qualifie||31/10/2020|365||||||87.3</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="st">099|1|3|qualifie|06/06/1998|01/03/2021|364|12|11|10|12|13|169.3</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="st">099|1|3|qualifie|06/06/1998|01/03/2022|364|12|11|10|12|13|169.3</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="st">099|1|3|qualifie|06/06/1998|01/03/2023|364|12|11|10|12|13|169.3</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="st">187|2|2|qualifie|05/12/1986|01/01/2022|364|10|10|10|10|10|169.3</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="st">187|2|2|qualifie|05/12/1986|01/01/2023|364|10|10|10|10|10|234.1</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a><span class="st">689|1|1||01/12/2000|06/11/2017|123|9|7|8|13|16|189.3</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a><span class="st">765|1|4|Non qualifie|26/12/1995|17/04/2020|160|13|10|12|18|10|45.9</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a><span class="st">765|1|4|Non qualifie|26/12/1995|17/04/2020|160|13|10|12|18|10|45.9</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a><span class="st">765|1|4|Non qualifie|26/12/1995|17/04/2020|160|13|10|12|18|10|45.9"</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#readLines va permettre de créer un objet pour chaque ligne</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">#strsplit va permettre de séparer les textes qui sont entre des "|" </span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span>  <span class="fu">readLines</span>(<span class="fu">textConnection</span>(a)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">strsplit</span>(<span class="at">split=</span><span class="st">'|'</span>,<span class="at">fixed=</span><span class="cn">TRUE</span>) </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">matrix</span>(<span class="fu">unlist</span>(a), <span class="at">nrow=</span><span class="fu">length</span>(a), <span class="at">byrow=</span><span class="cn">TRUE</span>))</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co">#La première ligne donne le nom des colonnes</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> janitor<span class="sc">::</span><span class="fu">row_to_names</span>(<span class="at">row_number =</span> <span class="dv">1</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co">#On remplace les valeurs qui sont des espaces par des "NA" dans toute </span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co">#la base de données </span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> <span class="fu">mutate_all</span>(na_if,<span class="st">""</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-3-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>donnees_datatable <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Identifiant =</span> <span class="fu">c</span>(<span class="st">"173"</span>, <span class="st">"173"</span>, <span class="st">"173"</span>, <span class="st">"173"</span>, <span class="st">"174"</span>, <span class="st">"175"</span>, <span class="st">"198"</span>, <span class="st">"198"</span>, <span class="st">"198"</span>, <span class="st">"168"</span>, <span class="st">"211"</span>, <span class="st">"278"</span>, <span class="st">"347"</span>, <span class="st">"112"</span>, <span class="st">"112"</span>, <span class="st">"112"</span>, <span class="st">"087"</span>, <span class="st">"087"</span>, <span class="st">"099"</span>, <span class="st">"099"</span>, <span class="st">"099"</span>, <span class="st">"187"</span>, <span class="st">"187"</span>, <span class="st">"689"</span>, <span class="st">"765"</span>, <span class="st">"765"</span>, <span class="st">"765"</span>),</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Sexe_red =</span> <span class="fu">c</span>(<span class="st">"2"</span>, <span class="st">"2"</span>, <span class="st">"2"</span>, <span class="st">"2"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"2"</span>, <span class="st">"2"</span>, <span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"2"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>),</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">CSP =</span> <span class="fu">c</span>(<span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"1"</span>, <span class="st">"4"</span>, <span class="st">"4"</span>, <span class="st">"4"</span>, <span class="st">"2"</span>, <span class="st">"3"</span>, <span class="st">"5"</span>, <span class="st">"5"</span>, <span class="st">"3"</span>, <span class="st">"3"</span>, <span class="st">"3"</span>, <span class="st">"3"</span>, <span class="st">"3"</span>, <span class="st">"3"</span>, <span class="st">"3"</span>, <span class="st">"3"</span>, <span class="st">"2"</span>, <span class="st">"2"</span>, <span class="st">"1"</span>, <span class="st">"4"</span>, <span class="st">"4"</span>, <span class="st">"4"</span>),</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Niveau =</span> <span class="fu">c</span>(<span class="st">"Qualifie"</span>, <span class="st">"qualifie"</span>, <span class="st">"qualifie"</span>, <span class="st">"Non Qualifie"</span>, <span class="st">"qualifie"</span>, <span class="st">"qualifie"</span>, <span class="st">"Non qualifie"</span>, <span class="st">"Qualifie"</span>, <span class="st">"Qualifie"</span>, <span class="st">"Qualifie"</span>, <span class="st">"Non qualifie"</span>, <span class="st">"Qualifie"</span>, <span class="st">"Qualifie"</span>, <span class="st">"Non qualifie"</span>, </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>             <span class="st">"Non qualifie"</span>, <span class="st">"qualifie"</span>, <span class="st">"Non qualifie"</span>, <span class="st">"Non qualifie"</span>, <span class="st">"qualifie"</span>, <span class="st">"qualifie"</span>, <span class="st">"qualifie"</span>, <span class="st">"qualifie"</span>, <span class="st">"qualifie"</span>, <span class="cn">NA</span>, <span class="st">"Non qualifie"</span>, <span class="st">"Non qualifie"</span>, <span class="st">"Non qualifie"</span>),</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">Date_naissance =</span> <span class="fu">c</span>(<span class="st">"17/06/1998"</span>, <span class="st">"17/06/1998"</span>, <span class="st">"17/06/1998"</span>, <span class="st">"17/06/1998"</span>, <span class="st">"08/12/1984"</span>, <span class="st">"16/09/1989"</span>, <span class="st">"17/03/1987"</span>, <span class="st">"17/03/1987"</span>, <span class="st">"17/03/1987"</span>, <span class="st">"30/07/2002"</span>, <span class="cn">NA</span>, <span class="st">"10/08/1948"</span>, </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"13/09/1955"</span>, <span class="st">"13/09/2001"</span>, <span class="st">"13/09/2001"</span>, <span class="st">"13/09/2001"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"06/06/1998"</span>, <span class="st">"06/06/1998"</span>, <span class="st">"06/06/1998"</span>, <span class="st">"05/12/1986"</span>, <span class="st">"05/12/1986"</span>, <span class="st">"01/12/2000"</span>, <span class="st">"26/12/1995"</span>, <span class="st">"26/12/1995"</span>, <span class="st">"26/12/1995"</span>),</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">Date_entree =</span> <span class="fu">c</span>(<span class="st">"01/01/2021"</span>, <span class="st">"01/01/2022"</span>, <span class="st">"06/01/2022"</span>, <span class="st">"02/01/2023"</span>, <span class="st">"17/08/2021"</span>, <span class="st">"21/12/2022"</span>, <span class="st">"28/07/2022"</span>, <span class="st">"17/11/2022"</span>, <span class="st">"21/02/2023"</span>, <span class="st">"04/09/2019"</span>, <span class="st">"17/12/2021"</span>, <span class="st">"07/06/2018"</span>, <span class="cn">NA</span>, <span class="st">"02/03/2022"</span>, <span class="st">"01/03/2021"</span>, <span class="st">"01/12/2023"</span>, <span class="cn">NA</span>, </span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"31/10/2020"</span>, <span class="st">"01/03/2021"</span>, <span class="st">"01/03/2022"</span>, <span class="st">"01/03/2023"</span>, <span class="st">"01/01/2022"</span>, <span class="st">"01/01/2023"</span>, <span class="st">"06/11/2017"</span>, <span class="st">"17/04/2020"</span>, <span class="st">"17/04/2020"</span>, <span class="st">"17/04/2020"</span>),</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">Duree =</span> <span class="fu">c</span>(<span class="st">"308"</span>, <span class="st">"365"</span>, <span class="st">"185"</span>, <span class="st">"365"</span>, <span class="st">"183"</span>, <span class="st">"730"</span>, <span class="st">"30"</span>, <span class="st">"164"</span>, <span class="st">"365"</span>, <span class="st">"365"</span>, <span class="st">"135"</span>, <span class="st">"365"</span>, <span class="st">"180"</span>, <span class="st">"212"</span>, <span class="st">"365"</span>, <span class="st">"365"</span>, <span class="st">"365"</span>, <span class="st">"365"</span>, <span class="st">"364"</span>, <span class="st">"364"</span>, <span class="st">"364"</span>, <span class="st">"364"</span>, <span class="st">"364"</span>, <span class="st">"123"</span>, <span class="st">"160"</span>, <span class="st">"160"</span>, <span class="st">"160"</span>),</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">Note_Contenu =</span> <span class="fu">c</span>(<span class="st">"12"</span>, <span class="st">"6"</span>, <span class="st">"8"</span>, <span class="st">"14"</span>, <span class="st">"17"</span>, <span class="st">"5"</span>, <span class="st">"10"</span>, <span class="st">"11"</span>, <span class="st">"9"</span>, <span class="st">"18"</span>, <span class="st">"16"</span>, <span class="st">"14"</span>, <span class="st">"12"</span>, <span class="st">"3"</span>, <span class="st">"7"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"12"</span>, <span class="st">"12"</span>, <span class="st">"12"</span>, <span class="st">"10"</span>, <span class="st">"10"</span>, <span class="st">"9"</span>, <span class="st">"13"</span>, <span class="st">"13"</span>, <span class="st">"13"</span>),</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">Note_Formateur =</span> <span class="fu">c</span>(<span class="st">"6"</span>, <span class="cn">NA</span>, <span class="st">"10"</span>, <span class="st">"15"</span>, <span class="st">"18"</span>, <span class="st">"5"</span>, <span class="st">"10"</span>, <span class="st">"7"</span>, <span class="st">"20"</span>, <span class="st">"11"</span>, <span class="st">"16"</span>, <span class="st">"10"</span>, <span class="st">"5"</span>, <span class="st">"10"</span>, <span class="st">"13"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"11"</span>, <span class="st">"11"</span>, <span class="st">"11"</span>, <span class="st">"10"</span>, <span class="st">"10"</span>, <span class="st">"7"</span>, <span class="st">"10"</span>, <span class="st">"10"</span>, <span class="st">"10"</span>),</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">Note_Moyens =</span> <span class="fu">c</span>(<span class="st">"17"</span>, <span class="st">"12"</span>, <span class="st">"11"</span>, <span class="st">"15"</span>, <span class="st">"20"</span>, <span class="st">"8"</span>, <span class="st">"10"</span>, <span class="st">"6"</span>, <span class="st">"3"</span>, <span class="st">"20"</span>, <span class="st">"15"</span>, <span class="st">"6"</span>, <span class="st">"7"</span>, <span class="st">"11"</span>, <span class="st">"8"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"10"</span>, <span class="st">"10"</span>, <span class="st">"10"</span>, <span class="st">"10"</span>, <span class="st">"10"</span>, <span class="st">"8"</span>, <span class="st">"12"</span>, <span class="st">"12"</span>, <span class="st">"12"</span>),</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">Note_Accompagnement =</span> <span class="fu">c</span>(<span class="st">"4"</span>, <span class="st">"7"</span>, <span class="st">"1"</span>, <span class="st">"10"</span>, <span class="st">"15"</span>, <span class="st">"4"</span>, <span class="st">"16"</span>, <span class="st">"14"</span>, <span class="st">"4"</span>, <span class="st">"13"</span>, <span class="st">"12"</span>, <span class="st">"8"</span>, <span class="st">"11"</span>, <span class="st">"9"</span>, <span class="st">"19"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"12"</span>, <span class="st">"12"</span>, <span class="st">"12"</span>, <span class="st">"10"</span>, <span class="st">"10"</span>, <span class="st">"13"</span>, <span class="st">"18"</span>, <span class="st">"18"</span>, <span class="st">"18"</span>),</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">Note_Materiel =</span> <span class="fu">c</span>(<span class="st">"19"</span>, <span class="st">"14"</span>, <span class="st">"9"</span>, <span class="st">"8"</span>, <span class="st">"12"</span>, <span class="st">"9"</span>, <span class="st">"8"</span>, <span class="st">"13"</span>, <span class="st">"17"</span>, <span class="st">"15"</span>, <span class="st">"9"</span>, <span class="st">"12"</span>, <span class="st">"12"</span>, <span class="st">"8"</span>, <span class="st">"2"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"13"</span>, <span class="st">"13"</span>, <span class="st">"13"</span>, <span class="st">"10"</span>, <span class="st">"10"</span>, <span class="st">"16"</span>, <span class="st">"10"</span>, <span class="st">"10"</span>, <span class="st">"10"</span>),</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">poids_sondage =</span> <span class="fu">c</span>(<span class="st">"117.1"</span>, <span class="st">"98.3"</span>, <span class="st">"214.6"</span>, <span class="st">"84.7"</span>, <span class="st">"65.9"</span>, <span class="st">"148.2"</span>, <span class="st">"89.6"</span>, <span class="st">"100.3"</span>, <span class="st">"49.3"</span>, <span class="st">"148.2"</span>, <span class="st">"86.4"</span>, <span class="st">"99.2"</span>, <span class="st">"105.6"</span>, <span class="st">"123.1"</span>, <span class="st">"137.4"</span>, <span class="st">"187.6"</span>, <span class="st">"87.3"</span>, <span class="st">"87.3"</span>, <span class="st">"169.3"</span>, <span class="st">"169.3"</span>, <span class="st">"169.3"</span>, <span class="st">"169.3"</span>, <span class="st">"234.1"</span>, <span class="st">"189.3"</span>, <span class="st">"45.9"</span>, <span class="st">"45.9"</span>, <span class="st">"45.9"</span>)</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-3-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-5-tab">
<p>Duckdb fonctionne comme un serveur SQL. Il faut transférer les données vers le serveur SQL.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ouvrir une connexion au serveur duckdb</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbConnect</span>(duckdb<span class="sc">::</span><span class="fu">duckdb</span>()); </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># On "copie" les données dans une table du nom table_duckdb</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>con <span class="sc">%&gt;%</span> duckdb<span class="sc">::</span><span class="fu">duckdb_register</span>(<span class="at">name =</span> <span class="st">"table_duckdb"</span>, <span class="at">df =</span> donnees_tidyverse)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>con <span class="sc">%&gt;%</span> <span class="fu">tbl</span>(<span class="st">"table_duckdb"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;table_duckdb&gt; [?? x 13]
# Database: DuckDB v0.9.2 [unknown@Linux 6.5.0-1016-azure:R 4.2.0/:memory:]
   Identifiant Sexe_red CSP   Niveau       Date_naissance Date_entree Duree
   &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;        &lt;chr&gt;          &lt;chr&gt;       &lt;chr&gt;
 1 173         2        1     Qualifie     17/06/1998     01/01/2021  308  
 2 173         2        1     qualifie     17/06/1998     01/01/2022  365  
 3 173         2        1     qualifie     17/06/1998     06/01/2022  185  
 4 173         2        1     Qualifie     17/06/1998     02/01/2023  365  
 5 174         1        1     qualifie     08/12/1984     17/08/2021  183  
 6 175         1        1     qualifie     16/09/1989     21/12/2022  730  
 7 198         2        4     Non qualifie 17/03/1987     28/07/2022  30   
 8 198         2        4     Qualifie     17/03/1987     17/11/2022  164  
 9 198         2        4     Qualifie     17/03/1987     21/02/2023  365  
10 168         1        2     Qualifie     30/07/2002     04/09/2019  365  
# ℹ more rows
# ℹ 6 more variables: Note_Contenu &lt;chr&gt;, Note_Formateur &lt;chr&gt;,
#   Note_Moyens &lt;chr&gt;, Note_Accompagnement &lt;chr&gt;, Note_Materiel &lt;chr&gt;,
#   poids_sondage &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fermer la connexion au serveur duckdb</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>DBI<span class="sc">::</span><span class="fu">dbDisconnect</span>(con, <span class="at">shutdown =</span> <span class="cn">TRUE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Pour la suite, on suppose que la connexion est ouverte sous le nom <code>con</code>, et que les données sont accessibles par la requête <code>requete_duckdb</code>. Le code modifiera la requete, mais pas la table dans le serveur SQL.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbConnect</span>(duckdb<span class="sc">::</span><span class="fu">duckdb</span>()); </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>con <span class="sc">%&gt;%</span> duckdb<span class="sc">::</span><span class="fu">duckdb_register</span>(<span class="at">name =</span> <span class="st">"table_duckdb"</span>, <span class="at">df =</span> donnees_tidyverse)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="ot">&lt;-</span> con <span class="sc">%&gt;%</span> <span class="fu">tbl</span>(<span class="st">"table_duckdb"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>N.B. Duckdb est envisagé pour des traitements sans charger des données en mémoire, par exemple en lisant directement un fichier <code>.parquet</code> sur le disque dur. Dans ce cas, les opérations sont effectuées à la volée, mais n’affectent pas les fichiers source.</p>
</div>
</div>
</div>
</section>
<section id="préparer-les-données-importées" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="préparer-les-données-importées"><span class="header-section-number">4</span> Préparer les données importées</h2>
<section id="casse-des-noms-des-variables" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="casse-des-noms-des-variables"><span class="header-section-number">4.1</span> Casse des noms des variables</h3>
<p><span style="color:red"><strong>R étant sensible à la casse, ce qui n’est pas le cas de SAS, cette section est donc pertinente pour les codes sous R.</strong></span></p>
<ol type="1">
<li>Extraire les noms des variables de la base</li>
<li>Mettre le nom de la colonne en minuscules</li>
</ol>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false"><code>tidyverse</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" role="tab" aria-controls="tabset-4-3" aria-selected="false"><code>data.table</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-4" role="tab" aria-controls="tabset-4-4" aria-selected="false"><code>arrow/duckdb</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On vérifie déjà que la base importée est bien un data.frame</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.data.frame</span>(donnees_rbase)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>On convertit les colonnes en minuscule</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Renommer les colonnes de la base</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(donnees_rbase) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">colnames</span>(donnees_rbase))</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Autre possibilité</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">setNames</span>(donnees_rbase, <span class="fu">tolower</span>(<span class="fu">names</span>(donnees_rbase)))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  magrittr<span class="sc">::</span><span class="fu">set_colnames</span>(<span class="at">value =</span> <span class="fu">casefold</span>(<span class="fu">colnames</span>(.), <span class="at">upper =</span> <span class="cn">FALSE</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-4-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On convertit la base en format data.table</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Expliquer les différences</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>donnees_datatable <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(donnees_datatable)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="fu">setDT</span>(donnees_datatable)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co"># On vérifie que la base est bien un data.table</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="fu">is.data.table</span>(donnees_datatable)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>On convertit les colonnes en minuscule</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Renommer les colonnes de la base</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(donnees_datatable) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">colnames</span>(donnees_datatable))</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Autre possibilité</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="fu">setNames</span>(donnees_datatable, <span class="fu">tolower</span>(<span class="fu">names</span>(donnees_datatable)))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    identifiant sexe_red    csp       niveau date_naissance date_entree  duree
         &lt;char&gt;   &lt;char&gt; &lt;char&gt;       &lt;char&gt;         &lt;char&gt;      &lt;char&gt; &lt;char&gt;
 1:         173        2      1     Qualifie     17/06/1998  01/01/2021    308
 2:         173        2      1     qualifie     17/06/1998  01/01/2022    365
 3:         173        2      1     qualifie     17/06/1998  06/01/2022    185
 4:         173        2      1 Non Qualifie     17/06/1998  02/01/2023    365
 5:         174        1      1     qualifie     08/12/1984  17/08/2021    183
 6:         175        1      1     qualifie     16/09/1989  21/12/2022    730
 7:         198        2      4 Non qualifie     17/03/1987  28/07/2022     30
 8:         198        2      4     Qualifie     17/03/1987  17/11/2022    164
 9:         198        2      4     Qualifie     17/03/1987  21/02/2023    365
10:         168        1      2     Qualifie     30/07/2002  04/09/2019    365
11:         211        2      3 Non qualifie           &lt;NA&gt;  17/12/2021    135
12:         278        1      5     Qualifie     10/08/1948  07/06/2018    365
13:         347        2      5     Qualifie     13/09/1955        &lt;NA&gt;    180
14:         112        1      3 Non qualifie     13/09/2001  02/03/2022    212
15:         112        1      3 Non qualifie     13/09/2001  01/03/2021    365
16:         112        1      3     qualifie     13/09/2001  01/12/2023    365
17:         087        1      3 Non qualifie           &lt;NA&gt;        &lt;NA&gt;    365
18:         087        1      3 Non qualifie           &lt;NA&gt;  31/10/2020    365
19:         099        1      3     qualifie     06/06/1998  01/03/2021    364
20:         099        1      3     qualifie     06/06/1998  01/03/2022    364
21:         099        1      3     qualifie     06/06/1998  01/03/2023    364
22:         187        2      2     qualifie     05/12/1986  01/01/2022    364
23:         187        2      2     qualifie     05/12/1986  01/01/2023    364
24:         689        1      1         &lt;NA&gt;     01/12/2000  06/11/2017    123
25:         765        1      4 Non qualifie     26/12/1995  17/04/2020    160
26:         765        1      4 Non qualifie     26/12/1995  17/04/2020    160
27:         765        1      4 Non qualifie     26/12/1995  17/04/2020    160
    identifiant sexe_red    csp       niveau date_naissance date_entree  duree
    note_contenu note_formateur note_moyens note_accompagnement note_materiel
          &lt;char&gt;         &lt;char&gt;      &lt;char&gt;              &lt;char&gt;        &lt;char&gt;
 1:           12              6          17                   4            19
 2:            6           &lt;NA&gt;          12                   7            14
 3:            8             10          11                   1             9
 4:           14             15          15                  10             8
 5:           17             18          20                  15            12
 6:            5              5           8                   4             9
 7:           10             10          10                  16             8
 8:           11              7           6                  14            13
 9:            9             20           3                   4            17
10:           18             11          20                  13            15
11:           16             16          15                  12             9
12:           14             10           6                   8            12
13:           12              5           7                  11            12
14:            3             10          11                   9             8
15:            7             13           8                  19             2
16:         &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;                &lt;NA&gt;          &lt;NA&gt;
17:         &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;                &lt;NA&gt;          &lt;NA&gt;
18:         &lt;NA&gt;           &lt;NA&gt;        &lt;NA&gt;                &lt;NA&gt;          &lt;NA&gt;
19:           12             11          10                  12            13
20:           12             11          10                  12            13
21:           12             11          10                  12            13
22:           10             10          10                  10            10
23:           10             10          10                  10            10
24:            9              7           8                  13            16
25:           13             10          12                  18            10
26:           13             10          12                  18            10
27:           13             10          12                  18            10
    note_contenu note_formateur note_moyens note_accompagnement note_materiel
    poids_sondage
           &lt;char&gt;
 1:         117.1
 2:          98.3
 3:         214.6
 4:          84.7
 5:          65.9
 6:         148.2
 7:          89.6
 8:         100.3
 9:          49.3
10:         148.2
11:          86.4
12:          99.2
13:         105.6
14:         123.1
15:         137.4
16:         187.6
17:          87.3
18:          87.3
19:         169.3
20:         169.3
21:         169.3
22:         169.3
23:         234.1
24:         189.3
25:          45.9
26:          45.9
27:          45.9
    poids_sondage</code></pre>
</div>
</div>
</div>
<div id="tabset-4-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span> <span class="fu">colnames</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Identifiant"         "Sexe_red"            "CSP"                
 [4] "Niveau"              "Date_naissance"      "Date_entree"        
 [7] "Duree"               "Note_Contenu"        "Note_Formateur"     
[10] "Note_Moyens"         "Note_Accompagnement" "Note_Materiel"      
[13] "poids_sondage"      </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span> <span class="fu">rename_with</span>(tolower) <span class="sc">%&gt;%</span> <span class="fu">colnames</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "identifiant"         "sexe_red"            "csp"                
 [4] "niveau"              "date_naissance"      "date_entree"        
 [7] "duree"               "note_contenu"        "note_formateur"     
[10] "note_moyens"         "note_accompagnement" "note_materiel"      
[13] "poids_sondage"      </code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="harmoniser-le-format-des-variables" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="harmoniser-le-format-des-variables"><span class="header-section-number">4.2</span> Harmoniser le format des variables</h3>
<p>Convertir certaines variables en format ‘date’, ‘integer’ et ‘numeric’</p>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-3" role="tab" aria-controls="tabset-5-3" aria-selected="false"><code>tidyverse</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-4" role="tab" aria-controls="tabset-5-4" aria-selected="false"><code>data.table</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-5" role="tab" aria-controls="tabset-5-5" aria-selected="false"><code>arrow/duckdb</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>data Donnees_sas;</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  set Donnees_sas;</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  duree_int <span class="ot">=</span> <span class="fu">input</span>(duree, <span class="fl">1.</span>);</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  note_contenu_int <span class="ot">=</span> <span class="fu">input</span>(note_contenu, <span class="fl">1.</span>);</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  note_formateur_int <span class="ot">=</span> <span class="fu">input</span>(note_formateur, <span class="fl">1.</span>);</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  note_moyens_int <span class="ot">=</span> <span class="fu">input</span>(note_moyens, <span class="fl">1.</span>);</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  note_accompagnement_int <span class="ot">=</span> <span class="fu">input</span>(note_accompagnement, <span class="fl">1.</span>);</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>  note_materiel_int <span class="ot">=</span> <span class="fu">input</span>(note_materiel, <span class="fl">1.</span>);</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>  date_naissance_date <span class="ot">=</span> <span class="fu">input</span>(date_naissance, DDMMYY10.);</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  date_entree <span class="ot">=</span> <span class="fu">input</span>(date_entree, DDMMYY10.);</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<p>On a importé toutes les variables en caractère. On convertit certaines variables en format ‘numeric’ et ‘date’</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>enNumerique <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"duree"</span>, <span class="st">"note_contenu"</span>, <span class="st">"note_formateur"</span>, <span class="st">"note_moyens"</span>, <span class="st">"note_accompagnement"</span>, <span class="st">"note_materiel"</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>enDate <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'date_naissance'</span>, <span class="st">'date_entree'</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>donnees_rbase[, enNumerique] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(donnees_rbase[, enNumerique], as.integer)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>donnees_rbase[, enDate] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(donnees_rbase[, enDate], lubridate<span class="sc">::</span>dmy)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Pour une seule variable </span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>poids_sondage <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(donnees_rbase<span class="sc">$</span>poids_sondage)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>On convertit les dates.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On récupère les variables dont le nom débute par le mot "date"</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>varDates <span class="ot">&lt;-</span> <span class="fu">names</span>(donnees_rbase)[<span class="fu">grepl</span>(<span class="st">"date"</span>, <span class="fu">tolower</span>(<span class="fu">names</span>(donnees_rbase)))]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On remplace / par - dans les dates</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co"># donnees_rbase[, varDates] &lt;- lapply(donnees_rbase[, varDates], function(x) gsub("/", "-", x))</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On exprime les dates en format Date</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co"># donnees_rbase[, varDates] &lt;- lapply(donnees_rbase[, varDates], lubridate::dmy)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-5-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>enNumerique <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"duree"</span>, <span class="st">"note_contenu"</span>, <span class="st">"note_formateur"</span>, <span class="st">"note_moyens"</span>, <span class="st">"note_accompagnement"</span>, <span class="st">"note_materiel"</span>)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>enDate <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'date_naissance'</span>, <span class="st">'date_entree'</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span>  </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(enNumerique, as.integer) <span class="sc">%&gt;%</span> </span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">poids_sondage=</span><span class="fu">as.numeric</span>(poids_sondage)) <span class="sc">%&gt;%</span> </span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(enDate, lubridate<span class="sc">::</span>dmy)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-5-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-4-tab">
<p>On a importé toutes les variables en caractère. On convertit certaines variables en format ‘numeric’ et ‘date’</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>enNumerique <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"duree"</span>, <span class="st">"note_contenu"</span>, <span class="st">"note_formateur"</span>, <span class="st">"note_moyens"</span>, <span class="st">"note_accompagnement"</span>, <span class="st">"note_materiel"</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>enDate <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'date_naissance'</span>, <span class="st">'date_entree'</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>donnees_datatable[, <span class="fu">lapply</span>(.SD, as.integer), .SDcols <span class="ot">=</span> enNumerique]</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Autre solution</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (j <span class="cf">in</span> enNumerique) {</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set</span>(donnees_datatable, <span class="at">j =</span> j, <span class="at">value =</span> <span class="fu">as.numeric</span>(donnees_datatable[[j]]))</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>donnees_datatable[, poids_sondage <span class="sc">:</span><span class="er">=</span> <span class="fu">as.numeric</span>(poids_sondage)]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>On convertit les dates.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On récupère les variables dont le nom débute par le mot "date"</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>varDates <span class="ot">&lt;-</span> <span class="fu">names</span>(donnees_datatable)[<span class="fu">grepl</span>(<span class="st">"date"</span>, <span class="fu">tolower</span>(<span class="fu">names</span>(donnees_datatable)))]</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="co"># On remplace / par - dans les dates</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>donnees_datatable[, (varDates) <span class="sc">:</span><span class="er">=</span> <span class="fu">lapply</span>(.SD, <span class="cf">function</span>(x) <span class="fu">gsub</span>(<span class="st">"/"</span>, <span class="st">"-"</span>, x)), .SDcols <span class="ot">=</span> varDates]</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co"># On exprime les dates en format Date</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>donnees_datatable[, (varDates) <span class="sc">:</span><span class="er">=</span> <span class="fu">lapply</span>(.SD, lubridate<span class="sc">::</span>dmy), .SDcols <span class="ot">=</span> varDates]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-5-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-5-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>enNumerique <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Duree"</span>, <span class="st">"Note_Contenu"</span>, <span class="st">"Note_Formateur"</span>, <span class="st">"Note_Moyens"</span>, <span class="st">"Note_Accompagnement"</span>, <span class="st">"Note_Materiel"</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>enDate <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'Date_naissance'</span>, <span class="st">'Date_entree'</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span>  </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(enNumerique, as.integer) <span class="sc">%&gt;%</span> </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">poids_sondage=</span><span class="fu">as.numeric</span>(poids_sondage)) <span class="sc">%&gt;%</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(enDate, <span class="sc">~</span> <span class="fu">as.Date</span>(<span class="fu">strptime</span>(.,<span class="st">'%d/%m/%Y'</span>))) <span class="sc">%&gt;%</span> <span class="co"># strptime est une fonction duckdb</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(enDate, Duree, Note_Contenu)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 4]
# Database: DuckDB v0.9.2 [unknown@Linux 6.5.0-1016-azure:R 4.2.0/:memory:]
   Date_naissance Date_entree Duree Note_Contenu
   &lt;date&gt;         &lt;date&gt;      &lt;int&gt;        &lt;int&gt;
 1 1998-06-17     2021-01-01    308           12
 2 1998-06-17     2022-01-01    365            6
 3 1998-06-17     2022-01-06    185            8
 4 1998-06-17     2023-01-02    365           14
 5 1984-12-08     2021-08-17    183           17
 6 1989-09-16     2022-12-21    730            5
 7 1987-03-17     2022-07-28     30           10
 8 1987-03-17     2022-11-17    164           11
 9 1987-03-17     2023-02-21    365            9
10 2002-07-30     2019-09-04    365           18
# ℹ more rows</code></pre>
</div>
</div>
<p>Note : <code>duckdb</code> fait des conversions de type implicitement, mais seulement les conversions incontestables. Il faudra souvent préciser le type des variables.</p>
</div>
</div>
</div>
</section>
</section>
<section id="information-sur-la-base-de-données" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="information-sur-la-base-de-données"><span class="header-section-number">5</span> Information sur la base de données</h2>
<section id="extraire-les-10-première-lignes-de-la-base" class="level3" data-number="5.1">
<h3 data-number="5.1" class="anchored" data-anchor-id="extraire-les-10-première-lignes-de-la-base"><span class="header-section-number">5.1</span> Extraire les 10 première lignes de la base</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-3" role="tab" aria-controls="tabset-6-3" aria-selected="false"><code>tidyverse</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-4" role="tab" aria-controls="tabset-6-4" aria-selected="false"><code>arrow/duckdb</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Extraire les x premières lignes de la <span class="fu">base</span> (<span class="dv">10</span> par défaut) <span class="sc">*</span><span class="er">/</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>%let x <span class="ot">=</span> <span class="dv">10</span>;</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>proc print data <span class="ot">=</span> <span class="fu">Donnees_sas</span> (<span class="at">firstobs =</span> <span class="dv">1</span> <span class="at">obs =</span> <span class="sc">&amp;</span>x.);run;</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Ou alors <span class="sc">*</span><span class="er">/</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>data Lignes<span class="sc">&amp;</span>x.;set <span class="fu">Donnees_sas</span> (<span class="at">firstobs =</span> <span class="dv">1</span> <span class="at">obs =</span> <span class="sc">&amp;</span>x.);proc print;run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extraire les 10 premières lignes de la base</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, ]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-6-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-6-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-4-tab">
<p>En duckdb, les dix premières lignes sont affichées par défaut. Si on veut les récupérer, par exemple dans une autre variable, il faut faire <code>collect()</code>. Attention, comme il n’y a pas d’ordre en SQL, il faut ordonner les lignes si on veut un résultat reproductible. C’est une opération qui peut être couteuse en temps CPU.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">collect</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 13
   Identifiant Sexe_red CSP   Niveau       Date_naissance Date_entree Duree
   &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;        &lt;chr&gt;          &lt;chr&gt;       &lt;chr&gt;
 1 173         2        1     Qualifie     17/06/1998     01/01/2021  308  
 2 173         2        1     qualifie     17/06/1998     01/01/2022  365  
 3 173         2        1     qualifie     17/06/1998     06/01/2022  185  
 4 173         2        1     Qualifie     17/06/1998     02/01/2023  365  
 5 174         1        1     qualifie     08/12/1984     17/08/2021  183  
 6 175         1        1     qualifie     16/09/1989     21/12/2022  730  
 7 198         2        4     Non qualifie 17/03/1987     28/07/2022  30   
 8 198         2        4     Qualifie     17/03/1987     17/11/2022  164  
 9 198         2        4     Qualifie     17/03/1987     21/02/2023  365  
10 168         1        2     Qualifie     30/07/2002     04/09/2019  365  
# ℹ 6 more variables: Note_Contenu &lt;chr&gt;, Note_Formateur &lt;chr&gt;,
#   Note_Moyens &lt;chr&gt;, Note_Accompagnement &lt;chr&gt;, Note_Materiel &lt;chr&gt;,
#   poids_sondage &lt;chr&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="renommer-les-variables" class="level3" data-number="5.2">
<h3 data-number="5.2" class="anchored" data-anchor-id="renommer-les-variables"><span class="header-section-number">5.2</span> Renommer les variables</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-3" role="tab" aria-controls="tabset-7-3" aria-selected="false"><code>tidyverse</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-4" role="tab" aria-controls="tabset-7-4" aria-selected="false"><code>arrow/duckdb</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> On renomme la variable sexe_red en sexe <span class="sc">*</span><span class="er">/</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>data Donnees_sas;</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  set <span class="fu">Donnees_sas</span> (<span class="at">rename =</span> (<span class="at">sexe_red =</span> sexe));</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On renomme la variable sexe_red en sexe</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>sexe <span class="ot">&lt;-</span> donnees_rbase<span class="sc">$</span>sexe_red</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Attention, lorsqu'on utilise ce code pour renommer la variable, l'ancienne variable reste dans la base de données </span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Supprime sexe_red</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[, <span class="sc">-</span><span class="fu">which</span>(<span class="fu">names</span>(donnees_rbase) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"sexe_red"</span>))]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-7-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On renomme la variable sexe_red en sexe</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="co"># La fonction rename() va écraser l'ancien nom de la variable contrairement au code utilisé dans la section R base</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">sexe=</span>sexe_red)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-7-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On renomme la variable sexe_red en sexe</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="co"># La fonction rename() va écraser l'ancien nom de la variable contrairement au code utilisé dans la section R base</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">sexe=</span>Sexe_red)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 13]
# Database: DuckDB v0.9.2 [unknown@Linux 6.5.0-1016-azure:R 4.2.0/:memory:]
   Identifiant sexe  CSP   Niveau  Date_naissance Date_entree Duree Note_Contenu
   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;          &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;       
 1 173         2     1     Qualif… 17/06/1998     01/01/2021  308   12          
 2 173         2     1     qualif… 17/06/1998     01/01/2022  365   6           
 3 173         2     1     qualif… 17/06/1998     06/01/2022  185   8           
 4 173         2     1     Qualif… 17/06/1998     02/01/2023  365   14          
 5 174         1     1     qualif… 08/12/1984     17/08/2021  183   17          
 6 175         1     1     qualif… 16/09/1989     21/12/2022  730   5           
 7 198         2     4     Non qu… 17/03/1987     28/07/2022  30    10          
 8 198         2     4     Qualif… 17/03/1987     17/11/2022  164   11          
 9 198         2     4     Qualif… 17/03/1987     21/02/2023  365   9           
10 168         1     2     Qualif… 30/07/2002     04/09/2019  365   18          
# ℹ more rows
# ℹ 5 more variables: Note_Formateur &lt;chr&gt;, Note_Moyens &lt;chr&gt;,
#   Note_Accompagnement &lt;chr&gt;, Note_Materiel &lt;chr&gt;, poids_sondage &lt;chr&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="nombre-de-lignes-et-de-colonnes-dans-la-base" class="level3" data-number="5.3">
<h3 data-number="5.3" class="anchored" data-anchor-id="nombre-de-lignes-et-de-colonnes-dans-la-base"><span class="header-section-number">5.3</span> Nombre de lignes et de colonnes dans la base</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-8-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-1" role="tab" aria-controls="tabset-8-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-2" role="tab" aria-controls="tabset-8-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-3" role="tab" aria-controls="tabset-8-3" aria-selected="false"><code>tidyverse</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-4" role="tab" aria-controls="tabset-8-4" aria-selected="false"><code>arrow/duckdb</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-8-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-8-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Nombre de lignes <span class="sc">*</span><span class="er">/</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>proc sql;select <span class="fu">count</span>(<span class="sc">*</span>) as Nb_Lignes from Donnees_sas;quit;</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Nombre de colonnes <span class="sc">*</span><span class="er">/</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>proc sql;select <span class="fu">count</span>(<span class="sc">*</span>) as Nb_Colonnes from Var;quit;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-8-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nombre de lignes et de colonnes dans la base</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">"Nombre de lignes : %d | Nombre de colonnes : %d"</span>, <span class="fu">dim</span>(donnees_rbase)[<span class="dv">1</span>], <span class="fu">dim</span>(donnees_rbase)[<span class="dv">2</span>])</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Nombre de lignes : 27 | Nombre de colonnes : 13"</code></pre>
</div>
</div>
</div>
<div id="tabset-8-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Nombre de lignes</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 27</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Nombre de colonnes</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="sc">%&gt;%</span>  <span class="fu">ncol</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 13</code></pre>
</div>
</div>
</div>
<div id="tabset-8-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-4-tab">
<p>Duckdb/SQL ne connaît pas le nombre de lignes sans un calcul. Il faut faire <code>count()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Nombre de lignes</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span> <span class="fu">nrow</span>() <span class="co"># retourne NA</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span> <span class="fu">count</span>() <span class="co"># retourne 27</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [1 x 1]
# Database: DuckDB v0.9.2 [unknown@Linux 6.5.0-1016-azure:R 4.2.0/:memory:]
      n
  &lt;dbl&gt;
1    27</code></pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Nombre de colonnes</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span>  <span class="fu">ncol</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 13</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="afficher-les-noms-des-variables-de-la-base" class="level3" data-number="5.4">
<h3 data-number="5.4" class="anchored" data-anchor-id="afficher-les-noms-des-variables-de-la-base"><span class="header-section-number">5.4</span> Afficher les noms des variables de la base</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-9-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-1" role="tab" aria-controls="tabset-9-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-2" role="tab" aria-controls="tabset-9-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-3" role="tab" aria-controls="tabset-9-3" aria-selected="false"><code>tidyverse</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-4" role="tab" aria-controls="tabset-9-4" aria-selected="false"><code>arrow/duckdb</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-9-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-9-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>proc contents data<span class="ot">=</span>donnees_sas; run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-9-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>(donnees_rbase)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-9-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="sc">%&gt;%</span> <span class="fu">colnames</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-9-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span> <span class="fu">colnames</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Identifiant"         "Sexe_red"            "CSP"                
 [4] "Niveau"              "Date_naissance"      "Date_entree"        
 [7] "Duree"               "Note_Contenu"        "Note_Formateur"     
[10] "Note_Moyens"         "Note_Accompagnement" "Note_Materiel"      
[13] "poids_sondage"      </code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="création-de-colonnes-et-de-lignes" class="level3" data-number="5.5">
<h3 data-number="5.5" class="anchored" data-anchor-id="création-de-colonnes-et-de-lignes"><span class="header-section-number">5.5</span> Création de colonnes et de lignes</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-10-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-1" role="tab" aria-controls="tabset-10-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-2" role="tab" aria-controls="tabset-10-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-3" role="tab" aria-controls="tabset-10-3" aria-selected="false"><code>tidyverse</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-4" role="tab" aria-controls="tabset-10-4" aria-selected="false"><code>arrow/duckdb</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-10-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-10-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>data Donnees_sas;</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  set Donnees_sas;</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  note2 <span class="ot">=</span> note_contenu <span class="sc">/</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">5</span>;</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>  Age <span class="ot">=</span> <span class="fu">intck</span>(<span class="st">'year'</span>, date_naissance, date_entree);</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-10-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Création de la colonne note2</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>note2 <span class="ot">&lt;-</span> donnees_rbase<span class="sc">$</span>note_contenu <span class="sc">/</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">5</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Création de la colonne age </span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>age <span class="ot">&lt;-</span> <span class="fu">floor</span>(lubridate<span class="sc">::</span><span class="fu">time_length</span>(<span class="fu">difftime</span>(donnees_rbase<span class="sc">$</span>date_entree, donnees_rbase<span class="sc">$</span>date_naissance), <span class="st">"years"</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-10-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Création de la colonne note2</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">note2=</span> note_contenu <span class="sc">/</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">5</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Création de la colonne age </span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">age=</span><span class="fu">as.period</span>(<span class="fu">interval</span>(<span class="at">start =</span> date_naissance, <span class="at">end =</span> date_entree))<span class="sc">$</span>year)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-10-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Création de la colonne note2</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span> </span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">note2 =</span> <span class="fu">as.integer</span>(Note_Contenu) <span class="sc">/</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(note2)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 1]
# Database: DuckDB v0.9.2 [unknown@Linux 6.5.0-1016-azure:R 4.2.0/:memory:]
   note2
   &lt;dbl&gt;
 1  3   
 2  1.5 
 3  2   
 4  3.5 
 5  4.25
 6  1.25
 7  2.5 
 8  2.75
 9  2.25
10  4.5 
# ℹ more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Création de la colonne age </span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span> </span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(enDate, <span class="sc">~</span> <span class="fu">as.Date</span>(<span class="fu">strptime</span>(.,<span class="st">'%d/%m/%Y'</span>))) <span class="sc">%&gt;%</span> <span class="co"># strptime est une fonction duckdb</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age =</span> <span class="fu">year</span>(<span class="fu">age</span>(Date_entree,Date_naissance))) <span class="sc">%&gt;%</span> </span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 1]
# Database: DuckDB v0.9.2 [unknown@Linux 6.5.0-1016-azure:R 4.2.0/:memory:]
     age
   &lt;dbl&gt;
 1    22
 2    23
 3    23
 4    24
 5    36
 6    33
 7    35
 8    35
 9    35
10    17
# ℹ more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="supression-de-colonnes-et-de-lignes" class="level3" data-number="5.6">
<h3 data-number="5.6" class="anchored" data-anchor-id="supression-de-colonnes-et-de-lignes"><span class="header-section-number">5.6</span> Supression de colonnes et de lignes</h3>
<p><em>Suppression de lignes à faire</em></p>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-11-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-1" role="tab" aria-controls="tabset-11-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-2" role="tab" aria-controls="tabset-11-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-3" role="tab" aria-controls="tabset-11-3" aria-selected="false"><code>tidyverse</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-4" role="tab" aria-controls="tabset-11-4" aria-selected="false"><code>arrow/duckdb</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-11-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-11-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>data Donnees_sas;</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  set Donnees_sas;</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>  drop note2;</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-11-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>note2 <span class="ot">&lt;-</span> <span class="cn">NULL</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-11-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>note2)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-11-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span> CSP, <span class="sc">-</span><span class="fu">contains</span>(<span class="st">"Date"</span>), <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"Note"</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 5]
# Database: DuckDB v0.9.2 [unknown@Linux 6.5.0-1016-azure:R 4.2.0/:memory:]
   Identifiant Sexe_red Niveau       Duree poids_sondage
   &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;        
 1 173         2        Qualifie     308   117.1        
 2 173         2        qualifie     365   98.3         
 3 173         2        qualifie     185   214.6        
 4 173         2        Qualifie     365   84.7         
 5 174         1        qualifie     183   65.9         
 6 175         1        qualifie     730   148.2        
 7 198         2        Non qualifie 30    89.6         
 8 198         2        Qualifie     164   100.3        
 9 198         2        Qualifie     365   49.3         
10 168         1        Qualifie     365   148.2        
# ℹ more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="formater-les-modalités-des-valeurs" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="formater-les-modalités-des-valeurs"><span class="header-section-number">6</span> Formater les modalités des valeurs</h2>
<section id="valeur-discrète" class="level3" data-number="6.1">
<h3 data-number="6.1" class="anchored" data-anchor-id="valeur-discrète"><span class="header-section-number">6.1</span> Valeur discrète</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-12-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-1" role="tab" aria-controls="tabset-12-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-2" role="tab" aria-controls="tabset-12-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-3" role="tab" aria-controls="tabset-12-3" aria-selected="false"><code>tidyverse</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-4" role="tab" aria-controls="tabset-12-4" aria-selected="false"><code>arrow/duckdb</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-12-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-12-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>proc format;</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>  value sexef</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span> <span class="ot">=</span> <span class="st">"Homme"</span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span> <span class="ot">=</span> <span class="st">"Femme"</span>;</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>  value <span class="sc">$</span> cspf</span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">'1'</span> <span class="ot">=</span> <span class="st">"Cadre"</span></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">'2'</span> <span class="ot">=</span> <span class="st">"Profession intermédiaire"</span></span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">'3'</span> <span class="ot">=</span> <span class="st">"Employé"</span></span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">'4'</span> <span class="ot">=</span> <span class="st">"Ouvrier"</span></span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">'5'</span> <span class="ot">=</span> <span class="st">"Retraité"</span>;</span>
<span id="cb86-12"><a href="#cb86-12" aria-hidden="true" tabindex="-1"></a>run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-12-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-12-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>sexef <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"1"</span> <span class="ot">=</span> <span class="st">"Homme"</span>, <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"Femme"</span>)</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>cspf <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"1"</span> <span class="ot">=</span> <span class="st">"Cadre"</span>, <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"Profession intermédiaire"</span>, <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"Employé"</span>, <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"Ouvrier"</span>, <span class="st">"5"</span> <span class="ot">=</span> <span class="st">"Retraité"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On exprime CSP et sexe en formaté</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>cspf <span class="ot">&lt;-</span> cspf[donnees_rbase<span class="sc">$</span>csp]</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>sexef <span class="ot">&lt;-</span> sexef[donnees_rbase<span class="sc">$</span>sexe]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-12-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-12-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sexef =</span> <span class="fu">case_when</span>(</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>    sexe<span class="sc">==</span><span class="st">"1"</span> <span class="sc">~</span> <span class="st">"Homme"</span>,</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>    sexe<span class="sc">==</span><span class="st">"2"</span> <span class="sc">~</span> <span class="st">"Femme"</span>,</span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> sexe),</span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">cspf =</span> <span class="fu">case_when</span>(</span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>    csp<span class="sc">==</span><span class="st">"1"</span> <span class="sc">~</span> <span class="st">"Cadre"</span>,</span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>    csp<span class="sc">==</span><span class="st">"2"</span> <span class="sc">~</span> <span class="st">"Profession intermédiaire"</span>,</span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a>    csp<span class="sc">==</span><span class="st">"3"</span> <span class="sc">~</span> <span class="st">"Employé"</span>,</span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a>    csp<span class="sc">==</span><span class="st">"4"</span> <span class="sc">~</span> <span class="st">"Ouvrier"</span>,</span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a>    csp<span class="sc">==</span><span class="st">"5"</span> <span class="sc">~</span> <span class="st">"Retraité"</span>,</span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> csp))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-12-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-12-4-tab">
<p>Préférer <code>case_match</code> quand il s’agit de valeurs déterminées.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span> </span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sexef =</span> <span class="fu">case_when</span>(</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>    Sexe_red<span class="sc">==</span><span class="st">"1"</span> <span class="sc">~</span> <span class="st">"Homme"</span>,</span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>    Sexe_red<span class="sc">==</span><span class="st">"2"</span> <span class="sc">~</span> <span class="st">"Femme"</span>,</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">.default =</span> Sexe_red),</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">cspf =</span> <span class="fu">case_match</span>(CSP,</span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"1"</span> <span class="sc">~</span> <span class="st">"Cadre"</span>,</span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2"</span> <span class="sc">~</span> <span class="st">"Profession intermédiaire"</span>,</span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"3"</span> <span class="sc">~</span> <span class="st">"Employé"</span>,</span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"4"</span> <span class="sc">~</span> <span class="st">"Ouvrier"</span>,</span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"5"</span> <span class="sc">~</span> <span class="st">"Retraité"</span>,</span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">.default =</span> CSP)) <span class="sc">%&gt;%</span> </span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Sexe_red, sexef, CSP, cspf)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 4]
# Database: DuckDB v0.9.2 [unknown@Linux 6.5.0-1016-azure:R 4.2.0/:memory:]
   Sexe_red sexef CSP   cspf                    
   &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;                   
 1 2        Femme 1     Cadre                   
 2 2        Femme 1     Cadre                   
 3 2        Femme 1     Cadre                   
 4 2        Femme 1     Cadre                   
 5 1        Homme 1     Cadre                   
 6 1        Homme 1     Cadre                   
 7 2        Femme 4     Ouvrier                 
 8 2        Femme 4     Ouvrier                 
 9 2        Femme 4     Ouvrier                 
10 1        Homme 2     Profession intermédiaire
# ℹ more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="valeur-continue" class="level3" data-number="6.2">
<h3 data-number="6.2" class="anchored" data-anchor-id="valeur-continue"><span class="header-section-number">6.2</span> Valeur continue</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-13-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-1" role="tab" aria-controls="tabset-13-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-13-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-2" role="tab" aria-controls="tabset-13-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-13-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-3" role="tab" aria-controls="tabset-13-3" aria-selected="false"><code>tidyverse</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-13-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-4" role="tab" aria-controls="tabset-13-4" aria-selected="false"><code>arrow/duckdb</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-13-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-13-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>proc format;</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>  value agef</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>  low<span class="sc">-</span><span class="er">&lt;</span><span class="dv">26</span> <span class="ot">=</span> <span class="st">"1. De 15 à 25 ans"</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>  <span class="dv">26</span><span class="ot">&lt;-</span><span class="er">&lt;</span><span class="dv">50</span> <span class="ot">=</span> <span class="st">"2. De 26 à 49 ans"</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>  <span class="dv">50</span><span class="sc">-</span>high <span class="ot">=</span> <span class="st">"3. 50 ans ou plus"</span>;</span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-13-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-13-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>agef[donnees_rbase<span class="sc">$</span>age <span class="sc">&lt;</span> <span class="dv">26</span>] <span class="ot">&lt;-</span> <span class="st">"1. De 15 à 25 ans"</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 26 &lt;= donnees_rbase$age &lt; 50 ne fonctionne pas, il faut passer en 2 étapes*</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>agef[<span class="dv">26</span> <span class="sc">&lt;=</span> donnees_rbase<span class="sc">$</span>age <span class="sc">&amp;</span> donnees_rbase<span class="sc">$</span>age <span class="sc">&lt;</span> <span class="dv">50</span>] <span class="ot">&lt;-</span> <span class="st">"2. De 26 à 49 ans"</span></span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>agef[donnees_rbase<span class="sc">$</span>age <span class="sc">&gt;=</span> <span class="dv">50</span>] <span class="ot">&lt;-</span> <span class="st">"3. 50 ans ou plus"</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Autre solution</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>agef <span class="ot">&lt;-</span> <span class="fu">cut</span>(donnees_rbase<span class="sc">$</span>age, </span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">25</span>, <span class="dv">49</span>, <span class="cn">Inf</span>),</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">right =</span> <span class="cn">TRUE</span>,</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"1. De 15 à 25 ans"</span>, <span class="st">"2. De 26 à 49 ans"</span>, <span class="st">"3. 50 ans ou plus"</span>), </span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">ordered_result =</span> <span class="cn">TRUE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-13-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-13-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">agef =</span> <span class="fu">case_when</span>(</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&lt;</span> <span class="dv">26</span> <span class="sc">~</span> <span class="st">"1. De 15 à 25 ans"</span>,</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="dv">26</span> <span class="sc">|</span> age <span class="sc">&lt;</span> <span class="dv">50</span> <span class="sc">~</span>  <span class="st">"2. De 26 à 49 ans"</span>,</span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="dv">50</span> <span class="sc">~</span> <span class="st">"3. 50 ans ou plus"</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-13-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-13-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(enDate, <span class="sc">~</span> <span class="fu">as.Date</span>(<span class="fu">strptime</span>(.,<span class="st">'%d/%m/%Y'</span>))) <span class="sc">%&gt;%</span> <span class="co"># strptime est une fonction duckdb</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age =</span> <span class="fu">year</span>(<span class="fu">age</span>(Date_entree,Date_naissance))) <span class="sc">%&gt;%</span> </span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">agef =</span> <span class="fu">case_when</span>(</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&lt;</span> <span class="dv">26</span> <span class="sc">~</span> <span class="st">"1. De 15 à 25 ans"</span>,</span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="dv">26</span> <span class="sc">|</span> age <span class="sc">&lt;</span> <span class="dv">50</span> <span class="sc">~</span>  <span class="st">"2. De 26 à 49 ans"</span>,</span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="dv">50</span> <span class="sc">~</span> <span class="st">"3. 50 ans ou plus"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, agef)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 2]
# Database: DuckDB v0.9.2 [unknown@Linux 6.5.0-1016-azure:R 4.2.0/:memory:]
     age agef             
   &lt;dbl&gt; &lt;chr&gt;            
 1    22 1. De 15 à 25 ans
 2    23 1. De 15 à 25 ans
 3    23 1. De 15 à 25 ans
 4    24 1. De 15 à 25 ans
 5    36 2. De 26 à 49 ans
 6    33 2. De 26 à 49 ans
 7    35 2. De 26 à 49 ans
 8    35 2. De 26 à 49 ans
 9    35 2. De 26 à 49 ans
10    17 1. De 15 à 25 ans
# ℹ more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="manipuler-des-lignes-et-des-colonnes" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="manipuler-des-lignes-et-des-colonnes"><span class="header-section-number">7</span> Manipuler des lignes et des colonnes</h2>
<p><em>A rajouter : la selection basée sur des conditions</em></p>
<section id="sélection-de-colonnes" class="level3" data-number="7.1">
<h3 data-number="7.1" class="anchored" data-anchor-id="sélection-de-colonnes"><span class="header-section-number">7.1</span> Sélection de colonnes</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-14-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-14-1" role="tab" aria-controls="tabset-14-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-14-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-14-2" role="tab" aria-controls="tabset-14-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-14-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-14-3" role="tab" aria-controls="tabset-14-3" aria-selected="false"><code>tidyverse</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-14-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-14-4" role="tab" aria-controls="tabset-14-4" aria-selected="false"><code>arrow/duckdb</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-14-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-14-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>proc sql;</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>  create table work.donnees_col_select_sas as</span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>  select    identifiant, csp, niveau</span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>  from work.donnees_sas;</span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>quit; </span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-14-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-14-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>donnees_col_select_rbase <span class="ot">&lt;-</span> donnees_rbase[, <span class="fu">c</span>(<span class="st">"identifiant"</span>, <span class="st">"csp"</span>, <span class="st">"niveau"</span>)]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-14-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-14-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>donnees_col_select_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(identifiant, csp, niveau)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-14-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-14-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span> <span class="fu">select</span>(Identifiant, CSP, <span class="fu">starts_with</span>(<span class="st">"NI"</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 3]
# Database: DuckDB v0.9.2 [unknown@Linux 6.5.0-1016-azure:R 4.2.0/:memory:]
   Identifiant CSP   Niveau      
   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;       
 1 173         1     Qualifie    
 2 173         1     qualifie    
 3 173         1     qualifie    
 4 173         1     Qualifie    
 5 174         1     qualifie    
 6 175         1     qualifie    
 7 198         4     Non qualifie
 8 198         4     Qualifie    
 9 198         4     Qualifie    
10 168         2     Qualifie    
# ℹ more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="selection-de-lignes" class="level3" data-number="7.2">
<h3 data-number="7.2" class="anchored" data-anchor-id="selection-de-lignes"><span class="header-section-number">7.2</span> Selection de lignes</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-15-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-15-1" role="tab" aria-controls="tabset-15-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-15-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-15-2" role="tab" aria-controls="tabset-15-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-15-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-15-3" role="tab" aria-controls="tabset-15-3" aria-selected="false"><code>tidyverse</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-15-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-15-4" role="tab" aria-controls="tabset-15-4" aria-selected="false"><code>arrow/duckdb</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-15-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-15-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>data donnees_sas; </span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>  set donnees_sas; </span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>  where sexef<span class="ot">=</span><span class="st">"Femme"</span>;</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a> run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-15-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-15-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>donnees_femme_rbase <span class="ot">&lt;-</span> donnees_rbase[donnees_rbase<span class="sc">$</span>sexef<span class="sc">==</span><span class="st">"Femme"</span>, ]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-15-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-15-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>donnees_femme_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sexef<span class="sc">==</span><span class="st">"Femme"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-15-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-15-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Sexe_red<span class="sc">==</span><span class="dv">2</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 13]
# Database: DuckDB v0.9.2 [unknown@Linux 6.5.0-1016-azure:R 4.2.0/:memory:]
   Identifiant Sexe_red CSP   Niveau       Date_naissance Date_entree Duree
   &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;        &lt;chr&gt;          &lt;chr&gt;       &lt;chr&gt;
 1 173         2        1     Qualifie     17/06/1998     01/01/2021  308  
 2 173         2        1     qualifie     17/06/1998     01/01/2022  365  
 3 173         2        1     qualifie     17/06/1998     06/01/2022  185  
 4 173         2        1     Qualifie     17/06/1998     02/01/2023  365  
 5 198         2        4     Non qualifie 17/03/1987     28/07/2022  30   
 6 198         2        4     Qualifie     17/03/1987     17/11/2022  164  
 7 198         2        4     Qualifie     17/03/1987     21/02/2023  365  
 8 211         2        3     Non qualifie &lt;NA&gt;           17/12/2021  135  
 9 347         2        5     Qualifie     13/09/1955     &lt;NA&gt;        180  
10 187         2        2     qualifie     05/12/1986     01/01/2022  364  
# ℹ more rows
# ℹ 6 more variables: Note_Contenu &lt;chr&gt;, Note_Formateur &lt;chr&gt;,
#   Note_Moyens &lt;chr&gt;, Note_Accompagnement &lt;chr&gt;, Note_Materiel &lt;chr&gt;,
#   poids_sondage &lt;chr&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="manipuler-des-lignes-et-des-colonnes-1" class="level2" data-number="8">
<h2 data-number="8" class="anchored" data-anchor-id="manipuler-des-lignes-et-des-colonnes-1"><span class="header-section-number">8</span> Manipuler des lignes et des colonnes</h2>
<section id="mettre-un-0-devant-un-nombre" class="level3" data-number="8.1">
<h3 data-number="8.1" class="anchored" data-anchor-id="mettre-un-0-devant-un-nombre"><span class="header-section-number">8.1</span> Mettre un 0 devant un nombre</h3>
<ol type="1">
<li>Créer la variable <strong>mois</strong></li>
<li>Mettre un 0 devant si le mois est inférieur à 9</li>
</ol>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-16-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-16-1" role="tab" aria-controls="tabset-16-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-16-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-16-2" role="tab" aria-controls="tabset-16-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-16-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-16-3" role="tab" aria-controls="tabset-16-3" aria-selected="false"><code>tidyverse</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-16-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-16-4" role="tab" aria-controls="tabset-16-4" aria-selected="false"><code>arrow/duckdb</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-16-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-16-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Mettre un <span class="dv">0</span> devant un nombre <span class="sc">*</span><span class="er">/</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>data Zero_devant;set <span class="fu">Donnees_sas</span> (<span class="at">keep =</span> date_entree);</span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span><span class="er">*</span> Obtenir le mois et la date <span class="sc">*</span><span class="er">/</span></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>  Mois <span class="ot">=</span> <span class="fu">month</span>(date_entree);</span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span><span class="er">*</span> Mettre le mois sur <span class="dv">2</span> <span class="fu">positions</span> (avec un <span class="dv">0</span> devant si le mois <span class="sc">&lt;=</span> <span class="dv">9</span>) <span class="sc">:</span> format prédéfini z2. <span class="sc">*</span><span class="er">/</span></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>  Mois_a <span class="ot">=</span> <span class="fu">put</span>(Mois, z2.);</span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>  drop Mois;</span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a>  rename Mois_a <span class="ot">=</span> Mois;</span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a>run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-16-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-16-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtenir le mois et la date</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>mois <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">month</span>(donnees_rbase<span class="sc">$</span>date_entree)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mettre le numéro du mois sur 2 positions (avec un 0 devant si le mois &lt;= 9)</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>mois <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"%02d"</span>, donnees_rbase<span class="sc">$</span>mois)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-16-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-16-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mois=</span>lubridate<span class="sc">::</span><span class="fu">month</span>(date_entree),</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">mois=</span><span class="fu">ifelse</span>(<span class="fu">str_length</span>(mois)<span class="sc">&lt;</span><span class="dv">2</span>, <span class="fu">paste0</span>(<span class="st">"0"</span>, mois), mois))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-16-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-16-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span> </span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(enDate, <span class="sc">~</span> <span class="fu">as.Date</span>(<span class="fu">strptime</span>(.,<span class="st">'%d/%m/%Y'</span>))) <span class="sc">%&gt;%</span> <span class="co"># strptime est une fonction duckdb</span></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mois=</span>lubridate<span class="sc">::</span><span class="fu">month</span>(Date_entree),</span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">mois=</span><span class="fu">ifelse</span>(<span class="fu">str_length</span>(mois)<span class="sc">&lt;</span><span class="dv">2</span>, <span class="fu">paste0</span>(<span class="st">"0"</span>, mois), mois)) <span class="sc">%&gt;%</span> </span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(mois, Date_entree)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 2]
# Database: DuckDB v0.9.2 [unknown@Linux 6.5.0-1016-azure:R 4.2.0/:memory:]
   mois  Date_entree
   &lt;chr&gt; &lt;date&gt;     
 1 01    2021-01-01 
 2 01    2022-01-01 
 3 01    2022-01-06 
 4 01    2023-01-02 
 5 08    2021-08-17 
 6 12    2022-12-21 
 7 07    2022-07-28 
 8 11    2022-11-17 
 9 02    2023-02-21 
10 09    2019-09-04 
# ℹ more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="réexprimer-en-masse-des-valeurs" class="level3" data-number="8.2">
<h3 data-number="8.2" class="anchored" data-anchor-id="réexprimer-en-masse-des-valeurs"><span class="header-section-number">8.2</span> Réexprimer en masse des valeurs</h3>
<p>On souhaite rééxprimer les notes sur 100 et non sur 20</p>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-17-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-17-1" role="tab" aria-controls="tabset-17-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-17-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-17-2" role="tab" aria-controls="tabset-17-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-17-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-17-3" role="tab" aria-controls="tabset-17-3" aria-selected="false"><code>tidyverse</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-17-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-17-4" role="tab" aria-controls="tabset-17-4" aria-selected="false"><code>arrow/duckdb</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-17-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-17-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>%let notes <span class="ot">=</span> Note_Contenu   Note_Formateur Note_Moyens     Note_Accompagnement     Note_Materiel;</span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> On supprime les doubles blancs entre les variables <span class="sc">*</span><span class="er">/</span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a><span class="sc">%let notes = %</span><span class="fu">sysfunc</span>(<span class="fu">compbl</span>(<span class="sc">&amp;</span>notes.));</span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>%put <span class="sc">&amp;</span>notes;Mois_a <span class="ot">=</span> Mois;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> <span class="dv">1</span>ère solution <span class="sc">:</span> avec les array <span class="sc">*</span><span class="er">/</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>data Sur100_1;</span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>  set Donnees_sas;</span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a>  array <span class="fu">variables</span> (<span class="sc">*</span>) <span class="sc">&amp;</span>notes.;</span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a>  do increment <span class="ot">=</span> <span class="dv">1</span> to <span class="fu">dim</span>(variables);</span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a>    variables[increment] <span class="ot">=</span> variables[increment] <span class="sc">/</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">100</span>;</span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a>  end; </span>
<span id="cb115-8"><a href="#cb115-8" aria-hidden="true" tabindex="-1"></a>  drop increment;</span>
<span id="cb115-9"><a href="#cb115-9" aria-hidden="true" tabindex="-1"></a>run; </span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> <span class="dv">2</span>e solution <span class="sc">:</span> avec une macro <span class="sc">*</span><span class="er">/</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>data Sur100_2;</span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>  set Donnees;</span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>  %macro Sur100;</span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a>    <span class="sc">%do i = 1 %</span>to %<span class="fu">sysfunc</span>(<span class="fu">countw</span>(<span class="sc">&amp;</span>notes.));</span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a>      <span class="sc">%let note = %</span><span class="fu">scan</span>(<span class="sc">&amp;</span>notes., <span class="sc">&amp;</span>i.);</span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a>      <span class="sc">&amp;</span>note. <span class="ot">=</span> <span class="er">&amp;</span>note. <span class="sc">/</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">100</span>;</span>
<span id="cb116-8"><a href="#cb116-8" aria-hidden="true" tabindex="-1"></a>    %end;</span>
<span id="cb116-9"><a href="#cb116-9" aria-hidden="true" tabindex="-1"></a>  %mend Sur100;</span>
<span id="cb116-10"><a href="#cb116-10" aria-hidden="true" tabindex="-1"></a>  %Sur5;</span>
<span id="cb116-11"><a href="#cb116-11" aria-hidden="true" tabindex="-1"></a>run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> <span class="dv">3</span>e solution <span class="sc">:</span> l<span class="st">'équivalent des list-comprehension de Python en SAS */</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="st">data Sur100_3;</span></span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a><span class="st">  set Donnees_sas;</span></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a><span class="st">  %macro List_comprehension;</span></span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a><span class="st">     %do i = 1 %to %sysfunc(countw(&amp;notes.));</span></span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a><span class="st">       %let j = %scan(&amp;notes., &amp;i.);</span></span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a><span class="st">       &amp;j. = &amp;j. / 20 * 100</span></span>
<span id="cb117-8"><a href="#cb117-8" aria-hidden="true" tabindex="-1"></a><span class="st">     %end;);;</span></span>
<span id="cb117-9"><a href="#cb117-9" aria-hidden="true" tabindex="-1"></a><span class="st">  %mend List_comprehension;</span></span>
<span id="cb117-10"><a href="#cb117-10" aria-hidden="true" tabindex="-1"></a><span class="st">  %List_comprehension;</span></span>
<span id="cb117-11"><a href="#cb117-11" aria-hidden="true" tabindex="-1"></a><span class="st">run;</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-17-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-17-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>notes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"note_contenu"</span>, <span class="st">"note_formateur"</span>, <span class="st">"note_moyens"</span>, <span class="st">"note_accompagnement"</span>, <span class="st">"note_materiel"</span>)</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase[, notes] <span class="ot">&lt;-</span> donnees_rbase[, notes] <span class="sc">/</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">100</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-17-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-17-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">"note"</span>), <span class="sc">~</span> .x<span class="sc">/</span><span class="dv">20</span><span class="sc">*</span><span class="dv">100</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-17-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-17-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span> </span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">"Note"</span>), <span class="sc">~</span> <span class="fu">as.numeric</span>(.x)<span class="sc">/</span><span class="dv">20</span><span class="sc">*</span><span class="dv">100</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"Note"</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 5]
# Database: DuckDB v0.9.2 [unknown@Linux 6.5.0-1016-azure:R 4.2.0/:memory:]
   Note_Contenu Note_Formateur Note_Moyens Note_Accompagnement Note_Materiel
          &lt;dbl&gt;          &lt;dbl&gt;       &lt;dbl&gt;               &lt;dbl&gt;         &lt;dbl&gt;
 1           60             30          85                  20            95
 2           30             NA          60                  35            70
 3           40             50          55                   5            45
 4           70             75          75                  50            40
 5           85             90         100                  75            60
 6           25             25          40                  20            45
 7           50             50          50                  80            40
 8           55             35          30                  70            65
 9           45            100          15                  20            85
10           90             55         100                  65            75
# ℹ more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="arrondir-une-valeur-numérique" class="level3" data-number="8.3">
<h3 data-number="8.3" class="anchored" data-anchor-id="arrondir-une-valeur-numérique"><span class="header-section-number">8.3</span> Arrondir une valeur numérique</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-18-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-18-1" role="tab" aria-controls="tabset-18-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-18-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-18-2" role="tab" aria-controls="tabset-18-2" aria-selected="false">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-18-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-18-3" role="tab" aria-controls="tabset-18-3" aria-selected="false">tidyverse</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-18-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-18-4" role="tab" aria-controls="tabset-18-4" aria-selected="false"><code>arrow/duckdb</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-18-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-18-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Arrondir une valeur numérique <span class="sc">*</span><span class="er">/</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>data Arrondis;set <span class="fu">donnees_sas</span> (<span class="at">keep =</span> poids_sondage);</span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span><span class="er">*</span> Arrondi à l<span class="st">'entier le plus proche */</span></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a><span class="st">  poids_arrondi_0 = round(poids_sondage, 0.0);</span></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a><span class="st">  /* Arrondi à 1 chiffre après la virgule */</span></span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a><span class="st">  poids_arrondi_1 = round(poids_sondage, 0.1);</span></span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a><span class="st">  /* Arrondi à 2 chiffre après la virgule */</span></span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a><span class="st">  poids_arrondi_2 = round(poids_sondage, 0.2);</span></span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a><span class="st">  /* Arrondi à l'</span>entier inférieur <span class="sc">*</span><span class="er">/</span></span>
<span id="cb122-10"><a href="#cb122-10" aria-hidden="true" tabindex="-1"></a>  poids_inf <span class="ot">=</span> <span class="fu">floor</span>(poids_sondage);</span>
<span id="cb122-11"><a href="#cb122-11" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span><span class="er">*</span> Arrondi à l<span class="st">'entier supérieur */</span></span>
<span id="cb122-12"><a href="#cb122-12" aria-hidden="true" tabindex="-1"></a><span class="st">  poids_inf = ceil(poids_sondage);  </span></span>
<span id="cb122-13"><a href="#cb122-13" aria-hidden="true" tabindex="-1"></a><span class="st">run;</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-18-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-18-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrondi à l'entier le plus proche</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>poids_arrondi_0 <span class="ot">&lt;-</span> <span class="fu">round</span>(donnees_rbase<span class="sc">$</span>poids, <span class="dv">0</span>)</span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrondi à 1 chiffre après la virgule</span></span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a>poids_arrondi_1 <span class="ot">&lt;-</span> <span class="fu">round</span>(donnees_rbase<span class="sc">$</span>poids, <span class="dv">1</span>)</span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrondi à 2 chiffre après la virgule</span></span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a>poids_arrondi_2 <span class="ot">&lt;-</span> <span class="fu">round</span>(donnees_rbase<span class="sc">$</span>poids, <span class="dv">2</span>)</span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrondi à l'entier inférieur</span></span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a>poids_inf <span class="ot">&lt;-</span> <span class="fu">floor</span>(donnees_rbase<span class="sc">$</span>poids)</span>
<span id="cb123-9"><a href="#cb123-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrondi à l'entier inférieur</span></span>
<span id="cb123-10"><a href="#cb123-10" aria-hidden="true" tabindex="-1"></a>poids_inf <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(donnees_rbase<span class="sc">$</span>poids)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-18-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-18-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">poids_arrondi_0 =</span> <span class="fu">round</span>(poids_sondage,<span class="dv">0</span>), <span class="co"># Arrondi à l'entier le plus proche</span></span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">poids_arrondi_1 =</span> <span class="fu">round</span>(poids_sondage,<span class="dv">1</span>), <span class="co"># Arrondi à 1 chiffre après la virgule</span></span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">poids_arrondi_2 =</span> <span class="fu">round</span>(poids_sondage,<span class="dv">2</span>), <span class="co"># Arrondi à 2 chiffre après la virgule</span></span>
<span id="cb124-6"><a href="#cb124-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">poids_floor =</span> <span class="fu">floor</span>(poids_sondage), <span class="co"># Arrondi à l'entier inférieur</span></span>
<span id="cb124-7"><a href="#cb124-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">poids_ceiling =</span> <span class="fu">ceiling</span>(poids_sondage), <span class="co"># Arrondi à l'entier inférieur</span></span>
<span id="cb124-8"><a href="#cb124-8" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb124-9"><a href="#cb124-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"poids"</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   poids_sondage poids_arrondi_0 poids_arrondi_1 poids_arrondi_2 poids_floor
2          117.1             117           117.1           117.1         117
3           98.3              98            98.3            98.3          98
4          214.6             215           214.6           214.6         214
5           84.7              85            84.7            84.7          84
6           65.9              66            65.9            65.9          65
7          148.2             148           148.2           148.2         148
8           89.6              90            89.6            89.6          89
9          100.3             100           100.3           100.3         100
10          49.3              49            49.3            49.3          49
11         148.2             148           148.2           148.2         148
12          86.4              86            86.4            86.4          86
13          99.2              99            99.2            99.2          99
14         105.6             106           105.6           105.6         105
15         123.1             123           123.1           123.1         123
16         137.4             137           137.4           137.4         137
17         187.6             188           187.6           187.6         187
18          87.3              87            87.3            87.3          87
19          87.3              87            87.3            87.3          87
20         169.3             169           169.3           169.3         169
21         169.3             169           169.3           169.3         169
22         169.3             169           169.3           169.3         169
23         169.3             169           169.3           169.3         169
24         234.1             234           234.1           234.1         234
25         189.3             189           189.3           189.3         189
26          45.9              46            45.9            45.9          45
27          45.9              46            45.9            45.9          45
28          45.9              46            45.9            45.9          45
   poids_ceiling
2            118
3             99
4            215
5             85
6             66
7            149
8             90
9            101
10            50
11           149
12            87
13           100
14           106
15           124
16           138
17           188
18            88
19            88
20           170
21           170
22           170
23           170
24           235
25           190
26            46
27            46
28            46</code></pre>
</div>
</div>
</div>
<div id="tabset-18-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-18-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span> </span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>( <span class="co"># la fonction round de duckdb ne prend pas l'argument digits, mais la traduction fonctionne</span></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">poids_arrondi_0 =</span> <span class="fu">round</span>(<span class="fu">as.numeric</span>(poids_sondage),<span class="dv">0</span>),</span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">poids_arrondi_1 =</span> <span class="fu">round</span>(<span class="fu">as.numeric</span>(poids_sondage),<span class="dv">1</span>),</span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">poids_arrondi_2 =</span> <span class="fu">round</span>(<span class="fu">as.numeric</span>(poids_sondage),<span class="sc">-</span><span class="dv">1</span>),</span>
<span id="cb126-6"><a href="#cb126-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">poids_floor =</span> <span class="fu">floor</span>(<span class="fu">as.numeric</span>(poids_sondage)),</span>
<span id="cb126-7"><a href="#cb126-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">poids_ceiling =</span> <span class="fu">ceiling</span>(<span class="fu">as.numeric</span>(poids_sondage)),</span>
<span id="cb126-8"><a href="#cb126-8" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb126-9"><a href="#cb126-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"poids"</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 6]
# Database: DuckDB v0.9.2 [unknown@Linux 6.5.0-1016-azure:R 4.2.0/:memory:]
   poids_sondage poids_arrondi_0 poids_arrondi_1 poids_arrondi_2 poids_floor
   &lt;chr&gt;                   &lt;dbl&gt;           &lt;dbl&gt;           &lt;dbl&gt;       &lt;dbl&gt;
 1 117.1                     117           117.              120         117
 2 98.3                       98            98.3             100          98
 3 214.6                     215           215.              210         214
 4 84.7                       85            84.7              80          84
 5 65.9                       66            65.9              70          65
 6 148.2                     148           148.              150         148
 7 89.6                       90            89.6              90          89
 8 100.3                     100           100.              100         100
 9 49.3                       49            49.3              50          49
10 148.2                     148           148.              150         148
# ℹ more rows
# ℹ 1 more variable: poids_ceiling &lt;dbl&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="les-tris" class="level2" data-number="9">
<h2 data-number="9" class="anchored" data-anchor-id="les-tris"><span class="header-section-number">9</span> Les tris</h2>
<section id="trier-par-colonne" class="level3" data-number="9.1">
<h3 data-number="9.1" class="anchored" data-anchor-id="trier-par-colonne"><span class="header-section-number">9.1</span> Trier par colonne</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-19-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-19-1" role="tab" aria-controls="tabset-19-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-19-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-19-2" role="tab" aria-controls="tabset-19-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-19-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-19-3" role="tab" aria-controls="tabset-19-3" aria-selected="false"><code>tidyverse</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-19-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-19-4" role="tab" aria-controls="tabset-19-4" aria-selected="false"><code>arrow/duckdb</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-19-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-19-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> On met identifiant date_entree et date_sortie au début de la base <span class="sc">*</span><span class="er">/</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a>%let colTri <span class="ot">=</span> identifiant date_entree;</span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a>data Donnees_sas;</span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a>  retain <span class="sc">&amp;</span>colTri.;</span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a>  set Donnees_sas;</span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a>run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Autre solution <span class="sc">*</span><span class="er">/</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>proc sql;</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>  create table Donnees_sas as </span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span><span class="er">*</span> On remplace les blancs entre les mots par des virgules pour la proc SQL <span class="sc">*</span><span class="er">/</span></span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a>  <span class="er">/*</span> Dans la proc SQL, les variables doivent être séparées par des virgules <span class="sc">*</span><span class="er">/</span></span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a>  select <span class="sc">%sysfunc(tranwrd(&amp;colTri., %</span><span class="fu">str</span>( ), %<span class="fu">str</span>(, )<span class="er">))</span>, <span class="sc">*</span> from Donnees_sas;</span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a>quit;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-19-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-19-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On met identifiant date_entree et date_sortie au début</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>colTri <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"identifiant"</span>, <span class="st">"date_entree"</span>)</span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>donnees_rbase[, <span class="fu">c</span>(colTri, <span class="fu">colnames</span>(donnees_rbase)[<span class="sc">!</span> <span class="fu">colnames</span>(donnees_rbase) <span class="sc">%in%</span> colTri])]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-19-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-19-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On met identifiant date_entree au début</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(identifiant, date_entree, <span class="fu">everything</span>())</span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(identifiant, date_entree)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-19-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-19-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On met identifiant date_entree au début</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span> </span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(enDate, <span class="sc">~</span> <span class="fu">as.Date</span>(<span class="fu">strptime</span>(.,<span class="st">'%d/%m/%Y'</span>))) <span class="sc">%&gt;%</span> <span class="co"># strptime est une fonction duckdb</span></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Identifiant, Date_entree, <span class="fu">everything</span>())</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 13]
# Database: DuckDB v0.9.2 [unknown@Linux 6.5.0-1016-azure:R 4.2.0/:memory:]
   Identifiant Date_entree Sexe_red CSP   Niveau       Date_naissance Duree
   &lt;chr&gt;       &lt;date&gt;      &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;        &lt;date&gt;         &lt;chr&gt;
 1 173         2021-01-01  2        1     Qualifie     1998-06-17     308  
 2 173         2022-01-01  2        1     qualifie     1998-06-17     365  
 3 173         2022-01-06  2        1     qualifie     1998-06-17     185  
 4 173         2023-01-02  2        1     Qualifie     1998-06-17     365  
 5 174         2021-08-17  1        1     qualifie     1984-12-08     183  
 6 175         2022-12-21  1        1     qualifie     1989-09-16     730  
 7 198         2022-07-28  2        4     Non qualifie 1987-03-17     30   
 8 198         2022-11-17  2        4     Qualifie     1987-03-17     164  
 9 198         2023-02-21  2        4     Qualifie     1987-03-17     365  
10 168         2019-09-04  1        2     Qualifie     2002-07-30     365  
# ℹ more rows
# ℹ 6 more variables: Note_Contenu &lt;chr&gt;, Note_Formateur &lt;chr&gt;,
#   Note_Moyens &lt;chr&gt;, Note_Accompagnement &lt;chr&gt;, Note_Materiel &lt;chr&gt;,
#   poids_sondage &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span> </span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(enDate, <span class="sc">~</span> <span class="fu">as.Date</span>(<span class="fu">strptime</span>(.,<span class="st">'%d/%m/%Y'</span>))) <span class="sc">%&gt;%</span> <span class="co"># strptime est une fonction duckdb</span></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(Identifiant, Date_entree)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 13]
# Database: DuckDB v0.9.2 [unknown@Linux 6.5.0-1016-azure:R 4.2.0/:memory:]
   Identifiant Date_entree Sexe_red CSP   Niveau       Date_naissance Duree
   &lt;chr&gt;       &lt;date&gt;      &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;        &lt;date&gt;         &lt;chr&gt;
 1 173         2021-01-01  2        1     Qualifie     1998-06-17     308  
 2 173         2022-01-01  2        1     qualifie     1998-06-17     365  
 3 173         2022-01-06  2        1     qualifie     1998-06-17     185  
 4 173         2023-01-02  2        1     Qualifie     1998-06-17     365  
 5 174         2021-08-17  1        1     qualifie     1984-12-08     183  
 6 175         2022-12-21  1        1     qualifie     1989-09-16     730  
 7 198         2022-07-28  2        4     Non qualifie 1987-03-17     30   
 8 198         2022-11-17  2        4     Qualifie     1987-03-17     164  
 9 198         2023-02-21  2        4     Qualifie     1987-03-17     365  
10 168         2019-09-04  1        2     Qualifie     2002-07-30     365  
# ℹ more rows
# ℹ 6 more variables: Note_Contenu &lt;chr&gt;, Note_Formateur &lt;chr&gt;,
#   Note_Moyens &lt;chr&gt;, Note_Accompagnement &lt;chr&gt;, Note_Materiel &lt;chr&gt;,
#   poids_sondage &lt;chr&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="trier-les-lignes-par-ordre-croissant-ou-décroissant" class="level3" data-number="9.2">
<h3 data-number="9.2" class="anchored" data-anchor-id="trier-les-lignes-par-ordre-croissant-ou-décroissant"><span class="header-section-number">9.2</span> Trier les lignes par ordre croissant ou décroissant</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-20-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-20-1" role="tab" aria-controls="tabset-20-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-20-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-20-2" role="tab" aria-controls="tabset-20-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-20-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-20-3" role="tab" aria-controls="tabset-20-3" aria-selected="false"><code>tidyverse</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-20-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-20-4" role="tab" aria-controls="tabset-20-4" aria-selected="false"><code>arrow/duckdb</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-20-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-20-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Trier la base par <span class="fu">ligne</span> (individu et date de début de la formation) par ordre décroissant <span class="sc">:</span> <span class="dv">2</span> possibilités <span class="sc">*</span><span class="er">/</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>proc sort data <span class="ot">=</span> Donnees_sas;by Identifiant Date_entree;run;</span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>proc sql;create table Donnes as select <span class="sc">*</span> from Donnees_sas order by Identifiant, Date_entree;quit;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Idem par ordre croissant d<span class="st">'identifiant et ordre décroissant de date d'</span>entrée<span class="sc">*</span><span class="er">/</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>proc sort data <span class="ot">=</span> Donnees_sas;by Identifiant Date_entree descending;run;</span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>proc sql;create table Donnes as select <span class="sc">*</span> from Donnees_sas order by Identifiant, desc Date_entree;quit;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-20-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-20-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Trier la base par ligne (individu et date de début de la formation) par ordre croissant</span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="co"># L'option na.last = FALSE (resp. TRUE) indique que les valeurs manquantes doivent figurer à la fin (resp. au début) du tri, que le tri</span></span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a><span class="co"># soit croissant ou décroissant</span></span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">order</span>(donnees_rbase<span class="sc">$</span>identifiant, donnees_rbase<span class="sc">$</span>date_entree, <span class="at">na.last =</span> <span class="cn">FALSE</span>), ]</span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-6"><a href="#cb138-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Tri par ordre croissant de identifiant et décroissant de date_entree (- avant le nom de la variable)</span></span>
<span id="cb138-7"><a href="#cb138-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-8"><a href="#cb138-8" aria-hidden="true" tabindex="-1"></a><span class="co">#donnees_rbase &lt;- donnees_rbase[order(donnees_rbase$identifiant, -donnees_rbase$date_entree, na.last = FALSE), ]</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-20-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-20-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Trier la base par ligne (individu et date de début de la formation) par ordre croissant</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(identifiant, date_entree)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tri par ordre croissant de identifiant et décroissant de date_entree </span></span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(identifiant, <span class="fu">desc</span>(date_entree))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-20-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-20-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Trier la base par ligne (individu et date de début de la formation) par ordre croissant</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span> </span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(enDate, <span class="sc">~</span> <span class="fu">as.Date</span>(<span class="fu">strptime</span>(.,<span class="st">'%d/%m/%Y'</span>))) <span class="sc">%&gt;%</span> <span class="co"># strptime est une fonction duckdb</span></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Identifiant, Date_entree) <span class="sc">%&gt;%</span> <span class="fu">select</span>(Identifiant, Date_entree, Note_Contenu)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:     SQL [?? x 3]
# Database:   DuckDB v0.9.2 [unknown@Linux 6.5.0-1016-azure:R 4.2.0/:memory:]
# Ordered by: Identifiant, Date_entree
   Identifiant Date_entree Note_Contenu
   &lt;chr&gt;       &lt;date&gt;      &lt;chr&gt;       
 1 087         2020-10-31  &lt;NA&gt;        
 2 087         NA          &lt;NA&gt;        
 3 099         2021-03-01  12          
 4 099         2022-03-01  12          
 5 099         2023-03-01  12          
 6 112         2021-03-01  7           
 7 112         2022-03-02  3           
 8 112         2023-12-01  &lt;NA&gt;        
 9 168         2019-09-04  18          
10 173         2021-01-01  12          
# ℹ more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tri par ordre croissant de identifiant et décroissant de date_entree </span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span> </span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(enDate, <span class="sc">~</span> <span class="fu">as.Date</span>(<span class="fu">strptime</span>(.,<span class="st">'%d/%m/%Y'</span>))) <span class="sc">%&gt;%</span> <span class="co"># strptime est une fonction duckdb</span></span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Identifiant, <span class="fu">desc</span>(Date_entree)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(Identifiant, Date_entree, Note_Contenu)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:     SQL [?? x 3]
# Database:   DuckDB v0.9.2 [unknown@Linux 6.5.0-1016-azure:R 4.2.0/:memory:]
# Ordered by: Identifiant, desc(Date_entree)
   Identifiant Date_entree Note_Contenu
   &lt;chr&gt;       &lt;date&gt;      &lt;chr&gt;       
 1 087         2020-10-31  &lt;NA&gt;        
 2 087         NA          &lt;NA&gt;        
 3 099         2023-03-01  12          
 4 099         2022-03-01  12          
 5 099         2021-03-01  12          
 6 112         2023-12-01  &lt;NA&gt;        
 7 112         2022-03-02  3           
 8 112         2021-03-01  7           
 9 168         2019-09-04  18          
10 173         2023-01-02  14          
# ℹ more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="incidence-des-valeurs-manquantes-dans-les-tris-différence-entre-sas-et-r" class="level3" data-number="9.3">
<h3 data-number="9.3" class="anchored" data-anchor-id="incidence-des-valeurs-manquantes-dans-les-tris-différence-entre-sas-et-r"><span class="header-section-number">9.3</span> Incidence des valeurs manquantes dans les tris, différence entre SAS et R</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-21-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-21-1" role="tab" aria-controls="tabset-21-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-21-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-21-2" role="tab" aria-controls="tabset-21-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-21-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-21-3" role="tab" aria-controls="tabset-21-3" aria-selected="false"><code>tidyverse</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-21-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-21-4" role="tab" aria-controls="tabset-21-4" aria-selected="false"><code>arrow/duckdb</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-21-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-21-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>proc sort data <span class="ot">=</span> Donnees_sas;by identifiant date_entree;run;</span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>proc print;run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> ... et en dernier selon un tri par ordre décroissant<span class="sc">*</span><span class="er">/</span></span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>proc sort data <span class="ot">=</span> Donnees_sas;</span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a>  by identifiant descending date_entree;</span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true" tabindex="-1"></a>run;</span>
<span id="cb146-5"><a href="#cb146-5" aria-hidden="true" tabindex="-1"></a>proc print;run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>En effet, les valeurs manquantes sont considérées comme des valeurs négatives</p>
</div>
<div id="tabset-21-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-21-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Les valeurs manquantes sont situées en dernier dans un tri par ordre croissant ou décroissant (car par défaut l'option na.last = TRUE) ...</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">order</span>(donnees_rbase<span class="sc">$</span>identifiant, donnees_rbase<span class="sc">$</span>date_entree), ]</span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour mimer le tri SAS, il faut écrire :</span></span>
<span id="cb147-5"><a href="#cb147-5" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">order</span>(donnees_rbase<span class="sc">$</span>identifiant, donnees_rbase<span class="sc">$</span>date_entree, <span class="at">na.last =</span> <span class="cn">FALSE</span>), ]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-21-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-21-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Les valeurs manquantes sont situées en dernier dans un tri par ordre croissant ou décroissant (car par défaut l'option na.last = TRUE) ...</span></span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(identifiant, date_entree)</span>
<span id="cb148-4"><a href="#cb148-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-5"><a href="#cb148-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour mimer le tri SAS, il faut écrire :</span></span>
<span id="cb148-6"><a href="#cb148-6" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb148-7"><a href="#cb148-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(identifiant, <span class="sc">!</span><span class="fu">is.na</span>(date_entree), date_entree)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-21-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-21-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Les valeurs manquantes sont situées en dernier dans un tri par ordre croissant ou décroissant (car par défaut l'option na.last = TRUE) ...</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Identifiant, Note_Contenu) <span class="sc">%&gt;%</span> <span class="fu">select</span>(Identifiant, Note_Contenu)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:     SQL [?? x 2]
# Database:   DuckDB v0.9.2 [unknown@Linux 6.5.0-1016-azure:R 4.2.0/:memory:]
# Ordered by: Identifiant, Note_Contenu
   Identifiant Note_Contenu
   &lt;chr&gt;       &lt;chr&gt;       
 1 087         &lt;NA&gt;        
 2 087         &lt;NA&gt;        
 3 099         12          
 4 099         12          
 5 099         12          
 6 112         3           
 7 112         7           
 8 112         &lt;NA&gt;        
 9 168         18          
10 173         12          
# ℹ more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour mimer le tri SAS, il faut écrire :</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Note : il faut faire select d'abord, sinon il y a une erreur quand "! is.na()" est dans la liste des colonnes</span></span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>requete_duckdb <span class="sc">%&gt;%</span> <span class="fu">select</span>(Identifiant, Note_Contenu) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Identifiant, <span class="sc">!</span> <span class="fu">is.na</span>(Note_Contenu), Note_Contenu) </span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:     SQL [?? x 2]
# Database:   DuckDB v0.9.2 [unknown@Linux 6.5.0-1016-azure:R 4.2.0/:memory:]
# Ordered by: Identifiant, !is.na(Note_Contenu), Note_Contenu
   Identifiant Note_Contenu
   &lt;chr&gt;       &lt;chr&gt;       
 1 087         &lt;NA&gt;        
 2 087         &lt;NA&gt;        
 3 099         12          
 4 099         12          
 5 099         12          
 6 112         &lt;NA&gt;        
 7 112         3           
 8 112         7           
 9 168         18          
10 173         12          
# ℹ more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="manipuler-des-dates" class="level2" data-number="10">
<h2 data-number="10" class="anchored" data-anchor-id="manipuler-des-dates"><span class="header-section-number">10</span> Manipuler des dates</h2>
<section id="créer-une-date" class="level3" data-number="10.1">
<h3 data-number="10.1" class="anchored" data-anchor-id="créer-une-date"><span class="header-section-number">10.1</span> Créer une date</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-22-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-22-1" role="tab" aria-controls="tabset-22-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-22-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-22-2" role="tab" aria-controls="tabset-22-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-22-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-22-3" role="tab" aria-controls="tabset-22-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-22-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-22-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>data Donnees;</span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>  set Donnees;</span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span><span class="er">*</span> Date de sortie du dispositif <span class="sc">:</span> ajout de la durée à la date d<span class="st">'entrée */</span></span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a><span class="st">  format date_sortie ddmmyy10.;</span></span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a><span class="st">  date_sortie = intnx('</span>day<span class="st">', date_entree, duree);</span></span>
<span id="cb153-6"><a href="#cb153-6" aria-hidden="true" tabindex="-1"></a><span class="st">run;</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-22-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-22-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Date de sortie du dispositif</span></span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>date_sortie <span class="ot">&lt;-</span> donnees_rbase<span class="sc">$</span>date_entree <span class="sc">+</span> lubridate<span class="sc">::</span><span class="fu">days</span>(donnees_rbase<span class="sc">$</span>duree)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-22-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-22-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Date de sortie du dispositif</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date_sortie =</span> date_entree <span class="sc">+</span> lubridate<span class="sc">::</span><span class="fu">days</span>(duree))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="calculer-des-durées" class="level3" data-number="10.2">
<h3 data-number="10.2" class="anchored" data-anchor-id="calculer-des-durées"><span class="header-section-number">10.2</span> Calculer des durées</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-23-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-23-1" role="tab" aria-controls="tabset-23-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-23-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-23-2" role="tab" aria-controls="tabset-23-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-23-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-23-3" role="tab" aria-controls="tabset-23-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-23-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-23-1-tab">

</div>
<div id="tabset-23-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-23-2-tab">

</div>
<div id="tabset-23-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-23-3-tab">

</div>
</div>
</div>
</section>
<section id="ajouter-une-durée-à-une-date" class="level3" data-number="10.3">
<h3 data-number="10.3" class="anchored" data-anchor-id="ajouter-une-durée-à-une-date"><span class="header-section-number">10.3</span> Ajouter une durée à une date</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-24-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-24-1" role="tab" aria-controls="tabset-24-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-24-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-24-2" role="tab" aria-controls="tabset-24-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-24-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-24-3" role="tab" aria-controls="tabset-24-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-24-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-24-1-tab">

</div>
<div id="tabset-24-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-24-2-tab">

</div>
<div id="tabset-24-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-24-3-tab">

</div>
</div>
</div>
</section>
</section>
<section id="manipuler-des-chaînes-de-caractères" class="level2" data-number="11">
<h2 data-number="11" class="anchored" data-anchor-id="manipuler-des-chaînes-de-caractères"><span class="header-section-number">11</span> Manipuler des chaînes de caractères</h2>
<section id="majuscule-minuscule" class="level3" data-number="11.1">
<h3 data-number="11.1" class="anchored" data-anchor-id="majuscule-minuscule"><span class="header-section-number">11.1</span> Majuscule, minuscule</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-25-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-25-1" role="tab" aria-controls="tabset-25-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-25-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-25-2" role="tab" aria-controls="tabset-25-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-25-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-25-3" role="tab" aria-controls="tabset-25-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-25-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-25-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span>Première lettre en majuscule<span class="sc">*</span><span class="er">/</span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a>data Donnees_sas;</span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a>  set Donnees_sas;</span>
<span id="cb156-4"><a href="#cb156-4" aria-hidden="true" tabindex="-1"></a>  Niveau <span class="ot">=</span> <span class="fu">propcase</span>(Niveau);</span>
<span id="cb156-5"><a href="#cb156-5" aria-hidden="true" tabindex="-1"></a>run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span>Majuscule<span class="sc">*</span><span class="er">/</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>data Donnees_sas;</span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>  set Donnees_sas;</span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a>  CSP_majuscule <span class="ot">=</span> <span class="fu">upcase</span>(CSPF);</span>
<span id="cb157-5"><a href="#cb157-5" aria-hidden="true" tabindex="-1"></a>run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span>Minuscule<span class="sc">*</span><span class="er">/</span></span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>data Donnees_sas;</span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a>  set Donnees_sas;</span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a>  CSP_minuscule <span class="ot">=</span> <span class="fu">lowcase</span>(CSPF);</span>
<span id="cb158-5"><a href="#cb158-5" aria-hidden="true" tabindex="-1"></a>run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-25-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-25-2-tab">
<ul>
<li>Première lettre en majuscule</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>niveau <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">toupper</span>(<span class="fu">substr</span>(donnees_rbase<span class="sc">$</span>niveau, <span class="dv">1</span>, <span class="dv">1</span>)), <span class="fu">tolower</span>(<span class="fu">substr</span>(donnees_rbase<span class="sc">$</span>niveau, <span class="dv">2</span>, <span class="fu">length</span>(donnees_rbase<span class="sc">$</span>niveau))))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Majuscule</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>csp_maj <span class="ot">&lt;-</span> <span class="fu">toupper</span>(donnees_rbase<span class="sc">$</span>cspf)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Minuscule</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>csp_maj <span class="ot">&lt;-</span> <span class="fu">tolower</span>(donnees_rbase<span class="sc">$</span>cspf)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-25-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-25-3-tab">
<ul>
<li>Première lettre en majuscule</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span>  </span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">niveau=</span><span class="fu">str_to_title</span>(niveau))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Majuscule</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">csp_maj=</span><span class="fu">toupper</span>(cspf))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Minuscule</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">csp_maj=</span><span class="fu">tolower</span>(cspf))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="remplacer-une-chaîne-de-catactère-par-une-autre" class="level3" data-number="11.2">
<h3 data-number="11.2" class="anchored" data-anchor-id="remplacer-une-chaîne-de-catactère-par-une-autre"><span class="header-section-number">11.2</span> Remplacer une chaîne de catactère par une autre</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-26-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-26-1" role="tab" aria-controls="tabset-26-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-26-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-26-2" role="tab" aria-controls="tabset-26-2" aria-selected="false"><code>R base</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-26-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-26-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span>Minuscule<span class="sc">*</span><span class="er">/</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>data Donnees_sas;</span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a>  set Donnees_sas;</span>
<span id="cb165-4"><a href="#cb165-4" aria-hidden="true" tabindex="-1"></a>  Niveau <span class="ot">=</span> <span class="fu">tranwrd</span>(Niveau, <span class="st">"Qualifie"</span>, <span class="st">"Qualifié"</span>);</span>
<span id="cb165-5"><a href="#cb165-5" aria-hidden="true" tabindex="-1"></a>run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-26-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-26-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Le mot qualifie n'a pas d'accent : on le corrige</span></span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>niveau <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Qualifie"</span>, <span class="st">"Qualifié"</span>, donnees_rbase<span class="sc">$</span>niveau)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="supprimer-des-blancs" class="level3" data-number="11.3">
<h3 data-number="11.3" class="anchored" data-anchor-id="supprimer-des-blancs"><span class="header-section-number">11.3</span> Supprimer des blancs</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-27-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-27-1" role="tab" aria-controls="tabset-27-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-27-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-27-2" role="tab" aria-controls="tabset-27-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-27-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-27-3" role="tab" aria-controls="tabset-27-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-27-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-27-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Manipuler des chaînes de caractères <span class="sc">=&gt;</span> R <span class="ot">=</span> gsub, grepl etc. <span class="sc">*</span><span class="er">/</span></span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>data Exemple_chaines;</span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true" tabindex="-1"></a>Texte <span class="ot">=</span> <span class="st">"              Ce   Texte   mériterait   d être   corrigé                  "</span>;</span>
<span id="cb167-4"><a href="#cb167-4" aria-hidden="true" tabindex="-1"></a>Texte1 <span class="ot">=</span> <span class="st">"Je m'appelle"</span>;</span>
<span id="cb167-5"><a href="#cb167-5" aria-hidden="true" tabindex="-1"></a>Texte2 <span class="ot">=</span> <span class="st">"SAS"</span>;</span>
<span id="cb167-6"><a href="#cb167-6" aria-hidden="true" tabindex="-1"></a>run;</span>
<span id="cb167-7"><a href="#cb167-7" aria-hidden="true" tabindex="-1"></a>data Exemple_chaines;set Exemple_chaines;</span>
<span id="cb167-8"><a href="#cb167-8" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Enlever les blancs au début et à la fin de la chaîne de caractère <span class="sc">*</span><span class="er">/</span></span>
<span id="cb167-9"><a href="#cb167-9" aria-hidden="true" tabindex="-1"></a>Enlever_Blancs_Initiaux <span class="ot">=</span> <span class="fu">strip</span>(Texte);</span>
<span id="cb167-10"><a href="#cb167-10" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Enlever les doubles blancs dans la chaîne de caractères <span class="sc">*</span><span class="er">/</span></span>
<span id="cb167-11"><a href="#cb167-11" aria-hidden="true" tabindex="-1"></a>Enlever_Blancs_Entre <span class="ot">=</span> <span class="fu">compbl</span>(Enlever_Blancs_Initiaux);</span>
<span id="cb167-12"><a href="#cb167-12" aria-hidden="true" tabindex="-1"></a>run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-27-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-27-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>texte_rbsase <span class="ot">&lt;-</span> <span class="st">"              Ce   Texte   mériterait   d être   corrigé                  "</span></span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a>texte_rbase_1 <span class="ot">&lt;-</span> <span class="st">"Je m'appelle"</span></span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true" tabindex="-1"></a>texte_rbase_2 <span class="ot">&lt;-</span> <span class="st">"R"</span></span>
<span id="cb168-4"><a href="#cb168-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-5"><a href="#cb168-5" aria-hidden="true" tabindex="-1"></a><span class="co"># trimws enlève les espaces au début et à la fin d'une chaîne de caractère</span></span>
<span id="cb168-6"><a href="#cb168-6" aria-hidden="true" tabindex="-1"></a>texte_rbase <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">s+"</span>, <span class="st">" "</span>, <span class="fu">trimws</span>(texte_rbsase))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-27-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-27-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>texte_tidyverse <span class="ot">&lt;-</span> <span class="st">"              Ce   Texte   mériterait   d être   corrigé                  "</span></span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a>texte_tidyverse_1 <span class="ot">&lt;-</span> <span class="st">"Je m'appelle"</span></span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a>texte_tidyverse_2 <span class="ot">&lt;-</span> <span class="st">"R"</span></span>
<span id="cb169-4"><a href="#cb169-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-5"><a href="#cb169-5" aria-hidden="true" tabindex="-1"></a><span class="co"># str_squish() supprime les espaces blancs au début et à la fin, et remplace tous les espaces blancs internes par un seul espace</span></span>
<span id="cb169-6"><a href="#cb169-6" aria-hidden="true" tabindex="-1"></a>texte_tidyverse <span class="ot">&lt;-</span> <span class="fu">str_squish</span>(texte_tidyverse)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="concaténer-des-chaînes-de-caractères" class="level3" data-number="11.4">
<h3 data-number="11.4" class="anchored" data-anchor-id="concaténer-des-chaînes-de-caractères"><span class="header-section-number">11.4</span> Concaténer des chaînes de caractères</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-28-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-28-1" role="tab" aria-controls="tabset-28-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-28-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-28-2" role="tab" aria-controls="tabset-28-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-28-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-28-3" role="tab" aria-controls="tabset-28-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-28-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-28-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Trois méthodes pour concaténer des chaînes de caractères <span class="sc">*</span><span class="er">/</span></span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a>Concatener  <span class="ot">=</span> Texte1<span class="sc">||</span><span class="st">" "</span><span class="sc">||</span>Texte2;</span>
<span id="cb170-3"><a href="#cb170-3" aria-hidden="true" tabindex="-1"></a>Concatener2 <span class="ot">=</span> Texte1<span class="sc">!!</span><span class="st">" "</span><span class="sc">!!</span>Texte2;</span>
<span id="cb170-4"><a href="#cb170-4" aria-hidden="true" tabindex="-1"></a>Concatener3 <span class="ot">=</span> <span class="fu">catx</span>(<span class="st">" "</span>, Texte1, Texte2);</span>
<span id="cb170-5"><a href="#cb170-5" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Extraire les <span class="dv">2</span>e, <span class="dv">3</span>e et <span class="dv">4</span>e caractères de Concatener <span class="sc">*</span><span class="er">/</span></span>
<span id="cb170-6"><a href="#cb170-6" aria-hidden="true" tabindex="-1"></a><span class="er">/*</span> <span class="dv">2</span> correspond à la position du <span class="dv">1</span>er caractère à récupérer, <span class="dv">3</span> le nombre total de caractères à partir du point de départ <span class="sc">*</span><span class="er">/</span></span>
<span id="cb170-7"><a href="#cb170-7" aria-hidden="true" tabindex="-1"></a>extrait <span class="ot">=</span> <span class="fu">substr</span>(Concatener, <span class="dv">2</span>, <span class="dv">3</span>);</span>
<span id="cb170-8"><a href="#cb170-8" aria-hidden="true" tabindex="-1"></a>run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-28-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-28-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Concaténer des chaînes de caractères</span></span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(texte_rbase_1, texte_rbase_2, <span class="at">sep =</span> <span class="st">" "</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Je m'appelle R"</code></pre>
</div>
</div>
</div>
<div id="tabset-28-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-28-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Concaténer des chaînes de caractères</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-3"><a href="#cb173-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(texte_tidyverse_1, texte_tidyverse_2, <span class="at">sep =</span> <span class="st">" "</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Je m'appelle R"</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="nombre-de-caractères-dans-une-chaîne-de-caractères" class="level3" data-number="11.5">
<h3 data-number="11.5" class="anchored" data-anchor-id="nombre-de-caractères-dans-une-chaîne-de-caractères"><span class="header-section-number">11.5</span> Nombre de caractères dans une chaîne de caractères</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-29-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-29-1" role="tab" aria-controls="tabset-29-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-29-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-29-2" role="tab" aria-controls="tabset-29-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-29-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-29-3" role="tab" aria-controls="tabset-29-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-29-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-29-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>data Donnees;</span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a>set Donnees;</span>
<span id="cb175-3"><a href="#cb175-3" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Nombre de caractères dans une chaîne de caractères<span class="sc">*</span><span class="er">/</span></span>
<span id="cb175-4"><a href="#cb175-4" aria-hidden="true" tabindex="-1"></a>taille_id <span class="ot">=</span> <span class="fu">length</span>(identifiant);</span>
<span id="cb175-5"><a href="#cb175-5" aria-hidden="true" tabindex="-1"></a>run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-29-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-29-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nombre de caractères dans une chaîne de caractères</span></span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>taille_id <span class="ot">&lt;-</span> <span class="fu">nchar</span>(donnees_rbase<span class="sc">$</span>identifiant)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-29-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-29-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nombre de caractères dans une chaîne de caractères</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">taille_id =</span> <span class="fu">str_split</span>(identifiant, <span class="st">''</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a>              lengths)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="transformer-plusieurs-caractères-différents" class="level3" data-number="11.6">
<h3 data-number="11.6" class="anchored" data-anchor-id="transformer-plusieurs-caractères-différents"><span class="header-section-number">11.6</span> Transformer plusieurs caractères différents</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-30-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-30-1" role="tab" aria-controls="tabset-30-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-30-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-30-2" role="tab" aria-controls="tabset-30-2" aria-selected="false"><code>R base</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-30-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-30-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Transformer plusieurs caractères différents <span class="sc">*</span><span class="er">/</span></span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a>chaine <span class="ot">=</span> <span class="st">"éèêëàâçîô"</span>;</span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> On transforme le é en e, le â en a, le î en i, ... <span class="sc">*</span><span class="er">/</span></span>
<span id="cb178-4"><a href="#cb178-4" aria-hidden="true" tabindex="-1"></a>chaine_sans_accent <span class="ot">=</span> <span class="fu">translate</span>(chaine, <span class="st">"eeeeaacio"</span>, <span class="st">"éèêëàâçîô"</span>);</span>
<span id="cb178-5"><a href="#cb178-5" aria-hidden="true" tabindex="-1"></a>run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-30-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-30-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformer plusieurs caractères différents</span></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>chaine <span class="ot">&lt;-</span> <span class="st">"éèêëàâçîô"</span></span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a><span class="fu">chartr</span>(<span class="st">"éèêëàâçîô"</span>, <span class="st">"eeeeaacio"</span>, chaine)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="gestion-ligne-par-ligne" class="level2" data-number="12">
<h2 data-number="12" class="anchored" data-anchor-id="gestion-ligne-par-ligne"><span class="header-section-number">12</span> Gestion ligne par ligne</h2>
<section id="numéro-de-lobservation" class="level3" data-number="12.1">
<h3 data-number="12.1" class="anchored" data-anchor-id="numéro-de-lobservation"><span class="header-section-number">12.1</span> Numéro de l’observation</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-31-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-31-1" role="tab" aria-controls="tabset-31-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-31-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-31-2" role="tab" aria-controls="tabset-31-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-31-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-31-3" role="tab" aria-controls="tabset-31-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-31-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-31-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Numéro de l<span class="st">'observation */</span></span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a><span class="st">data Donnees;set Donnees;</span></span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a><span class="st">Num_observation = _n_;</span></span>
<span id="cb180-4"><a href="#cb180-4" aria-hidden="true" tabindex="-1"></a><span class="st">run;</span></span>
<span id="cb180-5"><a href="#cb180-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-6"><a href="#cb180-6" aria-hidden="true" tabindex="-1"></a><span class="st">/* Autre solution */</span></span>
<span id="cb180-7"><a href="#cb180-7" aria-hidden="true" tabindex="-1"></a><span class="st">proc sql noprint;select count(*) into :nbLignes from Donnees;quit;</span></span>
<span id="cb180-8"><a href="#cb180-8" aria-hidden="true" tabindex="-1"></a><span class="st">data numLigne;do Num_observation = 1 to &amp;nbLignes.;output;end;run;</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-31-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-31-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Numéro de l'observation : 2 manières différentes</span></span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>num_observation <span class="ot">&lt;-</span> <span class="fu">row.names</span>(donnees_rbase)</span>
<span id="cb181-4"><a href="#cb181-4" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>num_observation <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span> <span class="sc">:</span> <span class="fu">nrow</span>(donnees_rbase))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-31-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-31-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb182-2"><a href="#cb182-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">num_observation=</span> <span class="fu">row_number</span>())</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="trier-des-colonnes" class="level3" data-number="12.2">
<h3 data-number="12.2" class="anchored" data-anchor-id="trier-des-colonnes"><span class="header-section-number">12.2</span> Trier des colonnes</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-32-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-32-1" role="tab" aria-controls="tabset-32-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-32-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-32-2" role="tab" aria-controls="tabset-32-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-32-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-32-3" role="tab" aria-controls="tabset-32-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-32-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-32-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Numéro du contrat de chaque individu, contrat trié par date de survenue <span class="sc">*</span><span class="er">/</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>proc sort data <span class="ot">=</span> Donnees;by identifiant date_entree;run;</span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a>data Donnees;set Donnees;</span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a>by identifiant date_entree;</span>
<span id="cb183-5"><a href="#cb183-5" aria-hidden="true" tabindex="-1"></a>retain numero_contrat <span class="dv">0</span>;</span>
<span id="cb183-6"><a href="#cb183-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> first.identifiant then numero_contrat <span class="ot">=</span> <span class="dv">1</span>;</span>
<span id="cb183-7"><a href="#cb183-7" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span> numero_contrat <span class="ot">=</span> numero_contrat <span class="sc">+</span> <span class="dv">1</span>;</span>
<span id="cb183-8"><a href="#cb183-8" aria-hidden="true" tabindex="-1"></a>run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-32-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-32-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Numéro du contrat de chaque individu, contrat trié par date de survenue</span></span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">order</span>(donnees_rbase<span class="sc">$</span>identifiant, donnees_rbase<span class="sc">$</span>date_entre, <span class="at">na.last =</span> <span class="cn">FALSE</span>), ]</span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>a <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>numero_contrat <span class="ot">&lt;-</span> <span class="fu">ave</span>(donnees_rbase<span class="sc">$</span>a, donnees_rbase<span class="sc">$</span>identifiant, <span class="at">FUN =</span> cumsum)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour trier les colonnes</span></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>tri <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"identifiant"</span>, <span class="st">"date_entree"</span>, <span class="st">"numero_contrat"</span>, <span class="st">"num_observation"</span>)</span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a>donnees_rbase_tri <span class="ot">&lt;-</span> donnees_rbase[, <span class="fu">c</span>(tri, <span class="fu">colnames</span>(donnees_rbase)[<span class="sc">!</span> <span class="fu">colnames</span>(donnees_rbase) <span class="sc">%in%</span> tri])]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-32-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-32-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Numéro du contrat de chaque individu, contrat trié par date de survenue </span></span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb186-4"><a href="#cb186-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(identifiant) <span class="sc">%&gt;%</span> </span>
<span id="cb186-5"><a href="#cb186-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(identifiant, date_entree) <span class="sc">%&gt;%</span> </span>
<span id="cb186-6"><a href="#cb186-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">numero_contrat=</span><span class="fu">row_number</span>())</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour trier les colonnes</span></span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse_tri <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb187-4"><a href="#cb187-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(identifiant, date_entree, numero_contrat, num_observation, <span class="fu">everything</span>())</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="identifier-le-1er-le-2e-le-dernier-contrat-dun-individu" class="level3" data-number="12.3">
<h3 data-number="12.3" class="anchored" data-anchor-id="identifier-le-1er-le-2e-le-dernier-contrat-dun-individu"><span class="header-section-number">12.3</span> Identifier le 1er, le 2e, le dernier contrat d’un individu</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-33-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-33-1" role="tab" aria-controls="tabset-33-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-33-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-33-2" role="tab" aria-controls="tabset-33-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-33-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-33-3" role="tab" aria-controls="tabset-33-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-33-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-33-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a>  <span class="sc">/</span><span class="er">*</span> <span class="dv">2</span>e contrat de l<span class="st">'individu (et rien si l'</span>individu a fait <span class="dv">1</span> seul contrat <span class="sc">*</span><span class="er">/</span></span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a>  data Deuxieme_Contrat;set Donnees;<span class="cf">if</span> numero_contrat <span class="ot">=</span> <span class="dv">2</span>;run;</span>
<span id="cb188-3"><a href="#cb188-3" aria-hidden="true" tabindex="-1"></a>  data Deuxieme_Contrat;set <span class="fu">Donnees</span> (<span class="at">where =</span> (<span class="at">numero_contrat =</span> <span class="dv">2</span>));run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-33-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-33-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtre sur le deuxième contrat </span></span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a>deuxieme_contrat_rbase <span class="ot">&lt;-</span> donnees_rbase[donnees_rbase<span class="sc">$</span>numero_contrat <span class="sc">==</span> <span class="dv">2</span>, ]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Créer une base avec les seuls premiers contrats, et une base avec les seuls derniers contrats</span></span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">order</span>(donnees_rbase<span class="sc">$</span>identifiant, donnees_rbase<span class="sc">$</span>date_entre, <span class="at">na.last =</span> <span class="cn">FALSE</span>), ]</span>
<span id="cb190-3"><a href="#cb190-3" aria-hidden="true" tabindex="-1"></a>premier_contrat_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="sc">!</span><span class="fu">duplicated</span>(donnees_rbase<span class="sc">$</span>identifiant, <span class="at">fromLast =</span> <span class="cn">FALSE</span>), ]</span>
<span id="cb190-4"><a href="#cb190-4" aria-hidden="true" tabindex="-1"></a>dernier_contrat_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="sc">!</span><span class="fu">duplicated</span>(donnees_rbase<span class="sc">$</span>identifiant, <span class="at">fromLast =</span> <span class="cn">TRUE</span>), ]</span>
<span id="cb190-5"><a href="#cb190-5" aria-hidden="true" tabindex="-1"></a>ni_prem_ni_der_rbase  <span class="ot">&lt;-</span> donnees_rbase[<span class="sc">!</span> (<span class="sc">!</span><span class="fu">duplicated</span>(donnees_rbase<span class="sc">$</span>identifiant, <span class="at">fromLast =</span> <span class="cn">FALSE</span>) <span class="sc">|</span> <span class="sc">!</span><span class="fu">duplicated</span>(donnees_rbase<span class="sc">$</span>identifiant, <span class="at">fromLast =</span> <span class="cn">TRUE</span>)), ]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-33-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-33-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtre sur le deuxième contrat </span></span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-3"><a href="#cb191-3" aria-hidden="true" tabindex="-1"></a>deuxieme_contrat_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb191-4"><a href="#cb191-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(numero_contrat <span class="sc">==</span> <span class="dv">2</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Créer une base avec les seuls premiers contrats, et une base avec les seuls derniers contrats</span></span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb192-3"><a href="#cb192-3" aria-hidden="true" tabindex="-1"></a>premier_contrat_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb192-4"><a href="#cb192-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(numero_contrat<span class="sc">==</span><span class="dv">1</span>)</span>
<span id="cb192-5"><a href="#cb192-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb192-6"><a href="#cb192-6" aria-hidden="true" tabindex="-1"></a>dernier_contrat_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb192-7"><a href="#cb192-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(identifiant) <span class="sc">%&gt;%</span> </span>
<span id="cb192-8"><a href="#cb192-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(numero_contrat<span class="sc">==</span><span class="fu">max</span>(numero_contrat)) <span class="sc">%&gt;%</span> </span>
<span id="cb192-9"><a href="#cb192-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb192-10"><a href="#cb192-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb192-11"><a href="#cb192-11" aria-hidden="true" tabindex="-1"></a>ni_prem_ni_der_tidyverse  <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb192-12"><a href="#cb192-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(identifiant) <span class="sc">%&gt;%</span> </span>
<span id="cb192-13"><a href="#cb192-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(numero_contrat<span class="sc">!=</span><span class="dv">1</span> <span class="sc">&amp;</span> numero_contrat <span class="sc">!=</span> <span class="fu">max</span>(numero_contrat)) <span class="sc">%&gt;%</span> </span>
<span id="cb192-14"><a href="#cb192-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="date-de-fin-du-contrat-précédent" class="level3" data-number="12.4">
<h3 data-number="12.4" class="anchored" data-anchor-id="date-de-fin-du-contrat-précédent"><span class="header-section-number">12.4</span> Date de fin du contrat précédent</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-34-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-34-1" role="tab" aria-controls="tabset-34-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-34-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-34-2" role="tab" aria-controls="tabset-34-2" aria-selected="false"><code>R base</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-34-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-34-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> La date de fin du contrat précédent <span class="sc">*</span><span class="er">/</span></span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a>proc sort data <span class="ot">=</span> Donnees;by identifiant date_entree;run;</span>
<span id="cb193-3"><a href="#cb193-3" aria-hidden="true" tabindex="-1"></a>data DonneesBon;set Donnees;</span>
<span id="cb193-4"><a href="#cb193-4" aria-hidden="true" tabindex="-1"></a>by identifiant date_entree;</span>
<span id="cb193-5"><a href="#cb193-5" aria-hidden="true" tabindex="-1"></a>format Date_fin_1 ddmmyy10.;</span>
<span id="cb193-6"><a href="#cb193-6" aria-hidden="true" tabindex="-1"></a>Date_fin_1 <span class="ot">=</span> <span class="fu">lag</span>(Date_sortie);</span>
<span id="cb193-7"><a href="#cb193-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> first.identifiant then Date_fin_1 <span class="ot">=</span> .;</span>
<span id="cb193-8"><a href="#cb193-8" aria-hidden="true" tabindex="-1"></a>run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-34-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-34-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">order</span>(donnees_rbase<span class="sc">$</span>identifiant, donnees_rbase<span class="sc">$</span>date_entre, <span class="at">na.last =</span> <span class="cn">FALSE</span>), ]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Il faut soit utiliser un package, soit utiliser cette astuce car il n'existe pas de fonction lag dans le R de base (à notre connaissance)</span></span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>date_sortie_1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">as.Date</span>(<span class="cn">NA</span>), donnees_rbase<span class="sc">$</span>date_sortie[ <span class="dv">1</span><span class="sc">:</span>(<span class="fu">length</span>(donnees_rbase<span class="sc">$</span>date_sortie) <span class="sc">-</span> <span class="dv">1</span>)])</span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>date_sortie_1[<span class="sc">!</span><span class="fu">duplicated</span>(donnees_rbase<span class="sc">$</span>identifiant, <span class="at">fromLast =</span> <span class="cn">FALSE</span>)] <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="cn">NA</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="valeur-retardée-lag" class="level3" data-number="12.5">
<h3 data-number="12.5" class="anchored" data-anchor-id="valeur-retardée-lag"><span class="header-section-number">12.5</span> Valeur retardée (lag)</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-35-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-35-1" role="tab" aria-controls="tabset-35-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-35-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-35-2" role="tab" aria-controls="tabset-35-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-35-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-35-3" role="tab" aria-controls="tabset-35-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-35-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-35-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> ATTENTION au lag DANS UNE CONDITION <span class="fu">IF</span> (cf. document) <span class="sc">*</span><span class="er">/</span></span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a>proc sort data <span class="ot">=</span> Donnees;by identifiant date_entree;run;</span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a>data Lag_Bon;set <span class="fu">Donnees</span> (<span class="at">keep =</span> identifiant date_entree date_sortie);</span>
<span id="cb196-4"><a href="#cb196-4" aria-hidden="true" tabindex="-1"></a>format date_sortie_1 lag_faux lag_bon ddmmyy10.;</span>
<span id="cb196-5"><a href="#cb196-5" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Erreur <span class="sc">*</span><span class="er">/</span></span>
<span id="cb196-6"><a href="#cb196-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> date_entree <span class="ot">=</span> <span class="fu">lag</span>(date_sortie) <span class="sc">+</span> <span class="dv">1</span> then lag_faux <span class="ot">=</span> <span class="fu">lag</span>(date_sortie) <span class="sc">+</span> <span class="dv">1</span>;</span>
<span id="cb196-7"><a href="#cb196-7" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Bonne écriture <span class="sc">*</span><span class="er">/</span></span>
<span id="cb196-8"><a href="#cb196-8" aria-hidden="true" tabindex="-1"></a>date_sortie_1 <span class="ot">=</span> <span class="fu">lag</span>(date_sortie);</span>
<span id="cb196-9"><a href="#cb196-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> date_entree <span class="ot">=</span> date_sortie_1 <span class="sc">+</span> <span class="dv">1</span> then lag_bon <span class="ot">=</span> date_sortie_1 <span class="sc">+</span> <span class="dv">1</span>;</span>
<span id="cb196-10"><a href="#cb196-10" aria-hidden="true" tabindex="-1"></a>run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-35-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-35-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Il n'existe pas de fonction lag dans le R de base (à notre connaissance)</span></span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Il faut soit utiliser un package, soit utiliser cette astuce</span></span>
<span id="cb197-3"><a href="#cb197-3" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>date_sortie_1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">as.Date</span>(<span class="cn">NA</span>), donnees_rbase<span class="sc">$</span>date_sortie[ <span class="dv">1</span><span class="sc">:</span>(<span class="fu">length</span>(donnees_rbase<span class="sc">$</span>date_sortie) <span class="sc">-</span> <span class="dv">1</span>)])</span>
<span id="cb197-4"><a href="#cb197-4" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>date_sortie_1[<span class="sc">!</span><span class="fu">duplicated</span>(donnees_rbase<span class="sc">$</span>identifiant, <span class="at">fromLast =</span> <span class="cn">FALSE</span>)] <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="cn">NA</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-35-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-35-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date_sortie_1 =</span> <span class="fu">lag</span>(date_sortie))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="transposer-une-base" class="level3" data-number="12.6">
<h3 data-number="12.6" class="anchored" data-anchor-id="transposer-une-base"><span class="header-section-number">12.6</span> Transposer une base</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-36-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-36-1" role="tab" aria-controls="tabset-36-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-36-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-36-2" role="tab" aria-controls="tabset-36-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-36-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-36-3" role="tab" aria-controls="tabset-36-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-36-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-36-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Transposer une base <span class="sc">*</span><span class="er">/</span></span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a>proc freq data <span class="ot">=</span> Donnees;table Sexef <span class="sc">*</span> cspf <span class="sc">/</span> out <span class="ot">=</span> Nb;run;</span>
<span id="cb199-3"><a href="#cb199-3" aria-hidden="true" tabindex="-1"></a>proc sort data <span class="ot">=</span> Nb;by cspf Sexef;run;</span>
<span id="cb199-4"><a href="#cb199-4" aria-hidden="true" tabindex="-1"></a>proc print data <span class="ot">=</span> Nb;run;</span>
<span id="cb199-5"><a href="#cb199-5" aria-hidden="true" tabindex="-1"></a>proc transpose data <span class="ot">=</span> Nb out <span class="ot">=</span> transpose;by cspf;var count;id Sexef;run;</span>
<span id="cb199-6"><a href="#cb199-6" aria-hidden="true" tabindex="-1"></a>data transpose;set <span class="fu">transpose</span> (<span class="at">drop =</span> _name_ _label_);run;</span>
<span id="cb199-7"><a href="#cb199-7" aria-hidden="true" tabindex="-1"></a>proc print data <span class="ot">=</span> transpose;run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-36-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-36-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="co"># as.data.frame.matrix est nécessaire, car le résultat de xtabs est un array</span></span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a>nb_rbase <span class="ot">&lt;-</span> <span class="fu">as.data.frame.matrix</span>(<span class="fu">xtabs</span>( <span class="sc">~</span> cspf <span class="sc">+</span> sexef, <span class="at">data =</span> donnees_rbase))</span>
<span id="cb200-3"><a href="#cb200-3" aria-hidden="true" tabindex="-1"></a>nb_transpose_rbase <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(nb_rbase))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-36-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-36-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a>nb_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> janitor<span class="sc">::</span><span class="fu">tabyl</span>(cspf, sexef) <span class="sc">%&gt;%</span> </span>
<span id="cb201-2"><a href="#cb201-2" aria-hidden="true" tabindex="-1"></a>                <span class="co"># colonne cspf comme nom de ligne</span></span>
<span id="cb201-3"><a href="#cb201-3" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">column_to_rownames</span>(<span class="at">var=</span><span class="st">"cspf"</span>)</span>
<span id="cb201-4"><a href="#cb201-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-5"><a href="#cb201-5" aria-hidden="true" tabindex="-1"></a>nb_transpose_tridyverse <span class="ot">&lt;-</span> nb_tidyverse <span class="sc">%&gt;%</span> sjmisc<span class="sc">::</span><span class="fu">rotate_df</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="les-valeurs-manquantes" class="level2" data-number="13">
<h2 data-number="13" class="anchored" data-anchor-id="les-valeurs-manquantes"><span class="header-section-number">13</span> Les valeurs manquantes</h2>
<section id="repérer-les-valeurs-manquantes" class="level3" data-number="13.1">
<h3 data-number="13.1" class="anchored" data-anchor-id="repérer-les-valeurs-manquantes"><span class="header-section-number">13.1</span> Repérer les valeurs manquantes</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-37-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-37-1" role="tab" aria-controls="tabset-37-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-37-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-37-2" role="tab" aria-controls="tabset-37-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-37-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-37-3" role="tab" aria-controls="tabset-37-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-37-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-37-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> Repérer les valeurs manquantes <span class="sc">*</span><span class="er">/</span></span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a>data Missing;set Donnees;</span>
<span id="cb202-3"><a href="#cb202-3" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">*</span> <span class="dv">1</span>ère solution <span class="sc">*</span><span class="er">/</span></span>
<span id="cb202-4"><a href="#cb202-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="fu">missing</span>(age) or <span class="fu">missing</span>(Niveau) then missing1 <span class="ot">=</span> <span class="dv">1</span>;<span class="cf">else</span> missing1 <span class="ot">=</span> <span class="dv">0</span>;</span>
<span id="cb202-5"><a href="#cb202-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> age <span class="ot">=</span> . or Niveau <span class="ot">=</span> <span class="st">''</span> then missing2 <span class="ot">=</span> <span class="dv">1</span>;<span class="cf">else</span> missing2 <span class="ot">=</span> <span class="dv">0</span>;</span>
<span id="cb202-6"><a href="#cb202-6" aria-hidden="true" tabindex="-1"></a>keep Age Niveau Missing1 Missing2;</span>
<span id="cb202-7"><a href="#cb202-7" aria-hidden="true" tabindex="-1"></a>run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-37-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-37-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>missing <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(donnees_rbase<span class="sc">$</span>age) <span class="sc">|</span> <span class="fu">is.na</span>(donnees_rbase<span class="sc">$</span>niveau), <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a>ageManquant_rbase_faux <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">is.na</span>(donnees_rbase<span class="sc">$</span>age),  ] <span class="co"># Faux : crée une basse de données avec que des NA</span></span>
<span id="cb203-3"><a href="#cb203-3" aria-hidden="true" tabindex="-1"></a>ageManquant_rbase_correct <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">is.na</span>(donnees_rbase<span class="sc">$</span>age), ] <span class="co"># Correct</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-37-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-37-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb204-2"><a href="#cb204-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">missing =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(age) <span class="sc">|</span> <span class="fu">is.na</span>(niveau), <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb204-3"><a href="#cb204-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-4"><a href="#cb204-4" aria-hidden="true" tabindex="-1"></a>ageManquant_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb204-5"><a href="#cb204-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(age))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="incidence-des-valeurs-manquantes-différent-entre-sas-et-r" class="level3" data-number="13.2">
<h3 data-number="13.2" class="anchored" data-anchor-id="incidence-des-valeurs-manquantes-différent-entre-sas-et-r"><span class="header-section-number">13.2</span> Incidence des valeurs manquantes, différent entre SAS et R</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-38-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-38-1" role="tab" aria-controls="tabset-38-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-38-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-38-2" role="tab" aria-controls="tabset-38-2" aria-selected="false"><code>R base</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-38-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-38-1-tab">

</div>
<div id="tabset-38-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-38-2-tab">
<section id="opérations" class="level4" data-number="13.2.1">
<h4 data-number="13.2.1" class="anchored" data-anchor-id="opérations"><span class="header-section-number">13.2.1</span> Opérations</h4>
<p>Il suffit de rajouter l’argument <em>na.rm=TRUE</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb205"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(donnees_rbase<span class="sc">$</span>note_formateur) <span class="co"># s'il existe un seul NA et que l'on ne précise rien, la fonction retournera NA</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Il faut donc rajouter l'argument na.rm=TRUE (remove NA) afin de calculer la moyenne sans prendre en compte les NA</span></span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-3"><a href="#cb206-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(donnees_rbase<span class="sc">$</span>note_formateur, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="tris" class="level4" data-number="13.2.2">
<h4 data-number="13.2.2" class="anchored" data-anchor-id="tris"><span class="header-section-number">13.2.2</span> Tris</h4>
</section>
</div>
</div>
</div>
</section>
</section>
<section id="les-doublons" class="level2" data-number="14">
<h2 data-number="14" class="anchored" data-anchor-id="les-doublons"><span class="header-section-number">14</span> Les doublons</h2>
<section id="repérage-des-doublons" class="level3" data-number="14.1">
<h3 data-number="14.1" class="anchored" data-anchor-id="repérage-des-doublons"><span class="header-section-number">14.1</span> Repérage des doublons</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-39-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-39-1" role="tab" aria-controls="tabset-39-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-39-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-39-2" role="tab" aria-controls="tabset-39-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-39-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-39-3" role="tab" aria-controls="tabset-39-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-39-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-39-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb207"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">*</span> On récupère déjà la dernière variable de la <span class="fu">base</span> (on en aura besoin plus loin) <span class="sc">*</span><span class="er">/</span></span>
<span id="cb207-2"><a href="#cb207-2" aria-hidden="true" tabindex="-1"></a>    proc contents data <span class="ot">=</span> Donnees out <span class="ot">=</span> Var noprint;run;</span>
<span id="cb207-3"><a href="#cb207-3" aria-hidden="true" tabindex="-1"></a>    proc sql noprint;select name into <span class="sc">:</span>derniere_var from Var where varnum <span class="ot">=</span> (select <span class="fu">max</span>(varnum) from Var);quit;</span>
<span id="cb207-4"><a href="#cb207-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-5"><a href="#cb207-5" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">*</span> <span class="dv">1</span>ère méthode <span class="sc">*</span><span class="er">/</span></span>
<span id="cb207-6"><a href="#cb207-6" aria-hidden="true" tabindex="-1"></a>    proc sort data <span class="ot">=</span> Donnees;by <span class="sc">&amp;</span>nom_col.;run;</span>
<span id="cb207-7"><a href="#cb207-7" aria-hidden="true" tabindex="-1"></a>    data Doublons;set Donnees;by <span class="sc">&amp;</span>nom_col.;</span>
<span id="cb207-8"><a href="#cb207-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> first.<span class="sc">&amp;</span>derniere_var. <span class="ot">=</span> <span class="dv">0</span> or last.<span class="sc">&amp;</span>derniere_var. <span class="ot">=</span> <span class="dv">0</span>;</span>
<span id="cb207-9"><a href="#cb207-9" aria-hidden="true" tabindex="-1"></a>    run;</span>
<span id="cb207-10"><a href="#cb207-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-11"><a href="#cb207-11" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">*</span> <span class="dv">2</span>e méthode <span class="sc">*</span><span class="er">/</span></span>
<span id="cb207-12"><a href="#cb207-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-13"><a href="#cb207-13" aria-hidden="true" tabindex="-1"></a>    <span class="er">/*</span> On remplace les blancs entre les mots par des virgules pour la proc sql <span class="sc">*</span><span class="er">/</span></span>
<span id="cb207-14"><a href="#cb207-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-15"><a href="#cb207-15" aria-hidden="true" tabindex="-1"></a>    <span class="er">/*</span> Dans la proc SQL, les variables doivent être séparées par des virgules <span class="sc">*</span><span class="er">/</span></span>
<span id="cb207-16"><a href="#cb207-16" aria-hidden="true" tabindex="-1"></a>    <span class="sc">%let nom_col_sql = %</span><span class="fu">sysfunc</span>(<span class="fu">tranwrd</span>(<span class="sc">&amp;</span>nom_col., <span class="sc">%str( ), %</span><span class="fu">str</span>(, )));</span>
<span id="cb207-17"><a href="#cb207-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-18"><a href="#cb207-18" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">*</span> On groupe par toutes les colonnes, et si on aboutit à strictement plus qu<span class="st">'une ligne, c'</span>est un doublon <span class="sc">*</span><span class="er">/</span></span>
<span id="cb207-19"><a href="#cb207-19" aria-hidden="true" tabindex="-1"></a>    proc sql;create table Doublons as select <span class="sc">*</span> from Donnees group by <span class="sc">&amp;</span>nom_col_sql. having <span class="fu">count</span>(<span class="sc">*</span>) <span class="sc">&gt;</span> <span class="dv">1</span>;quit;</span>
<span id="cb207-20"><a href="#cb207-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-21"><a href="#cb207-21" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">*</span> Suppression des doublons <span class="sc">*</span><span class="er">/</span></span>
<span id="cb207-22"><a href="#cb207-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-23"><a href="#cb207-23" aria-hidden="true" tabindex="-1"></a>    <span class="er">/*</span> <span class="dv">1</span>ère méthode <span class="sc">*</span><span class="er">/</span></span>
<span id="cb207-24"><a href="#cb207-24" aria-hidden="true" tabindex="-1"></a>    proc sort data <span class="ot">=</span> Donnees nodupkey;by <span class="sc">&amp;</span>nom_col.;run;</span>
<span id="cb207-25"><a href="#cb207-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-26"><a href="#cb207-26" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">*</span> <span class="dv">2</span>e méthode, avec first. et <span class="fu">last.</span> (cf. infra) <span class="sc">*</span><span class="er">/</span></span>
<span id="cb207-27"><a href="#cb207-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-28"><a href="#cb207-28" aria-hidden="true" tabindex="-1"></a>    <span class="er">/*</span> On récupère déjà la dernière variable de la <span class="fu">base</span> (on en aura besoin plus loin) <span class="sc">*</span><span class="er">/</span></span>
<span id="cb207-29"><a href="#cb207-29" aria-hidden="true" tabindex="-1"></a>    proc contents data <span class="ot">=</span> Donnees out <span class="ot">=</span> Var noprint;run;</span>
<span id="cb207-30"><a href="#cb207-30" aria-hidden="true" tabindex="-1"></a>    proc sql noprint;select name into <span class="sc">:</span>derniere_var from Var where varnum <span class="ot">=</span> (select <span class="fu">max</span>(varnum) from Var);quit;</span>
<span id="cb207-31"><a href="#cb207-31" aria-hidden="true" tabindex="-1"></a>    proc sql noprint;select name into <span class="sc">:</span>nom_col separated by <span class="st">" "</span> from Var order by varnum;quit;</span>
<span id="cb207-32"><a href="#cb207-32" aria-hidden="true" tabindex="-1"></a>    %put Dernière variable de la base <span class="sc">:</span> <span class="er">&amp;</span>derniere_var.;</span>
<span id="cb207-33"><a href="#cb207-33" aria-hidden="true" tabindex="-1"></a>    %put <span class="sc">&amp;</span>nom_col.;</span>
<span id="cb207-34"><a href="#cb207-34" aria-hidden="true" tabindex="-1"></a>    proc sort data <span class="ot">=</span> Donnees;by <span class="sc">&amp;</span>nom_col.;run;</span>
<span id="cb207-35"><a href="#cb207-35" aria-hidden="true" tabindex="-1"></a>    data Donnees;set Donnees;by <span class="sc">&amp;</span>nom_col.;<span class="cf">if</span> first.<span class="sc">&amp;</span>derniere_var.;run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-39-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-39-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Repérage</span></span>
<span id="cb208-2"><a href="#cb208-2" aria-hidden="true" tabindex="-1"></a>doublons_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">duplicated</span>(donnees_rbase), ]</span>
<span id="cb208-3"><a href="#cb208-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-4"><a href="#cb208-4" aria-hidden="true" tabindex="-1"></a><span class="co">#doublons ici : toute la ligne est identique avec une autre ligne </span></span>
<span id="cb208-5"><a href="#cb208-5" aria-hidden="true" tabindex="-1"></a><span class="co">#avec cette commande, s'il y existe des doublons i.e. deux observations qui ont les mêmes observations pour toutes les variables, la base doublons_rbase stockera uniquement un des doublons mais pas toutes les lignes qui sont identiques </span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-39-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-39-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Repérage</span></span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a>doublons_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span>  </span>
<span id="cb209-3"><a href="#cb209-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(identifiant, sexe) <span class="sc">%&gt;%</span> </span>
<span id="cb209-4"><a href="#cb209-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>)</span>
<span id="cb209-5"><a href="#cb209-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-6"><a href="#cb209-6" aria-hidden="true" tabindex="-1"></a><span class="co">#doublons ici : les observations qui ont le même identifiant et le même sexe </span></span>
<span id="cb209-7"><a href="#cb209-7" aria-hidden="true" tabindex="-1"></a><span class="co">#avec cette commande, la base doublons_tidyverse va stocker toutes les observations qui sont en doubles i.e. qui ont le même identifiant et le même sexe </span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="suppression-des-doublons" class="level3" data-number="14.2">
<h3 data-number="14.2" class="anchored" data-anchor-id="suppression-des-doublons"><span class="header-section-number">14.2</span> Suppression des doublons</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-40-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-40-1" role="tab" aria-controls="tabset-40-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-40-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-40-2" role="tab" aria-controls="tabset-40-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-40-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-40-3" role="tab" aria-controls="tabset-40-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-40-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-40-1-tab">

</div>
<div id="tabset-40-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-40-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb210"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="sc">!</span> <span class="fu">duplicated</span>(donnees_rbase), ]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Autre solution (solution first. de SAS)</span></span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">order</span>(<span class="fu">colnames</span>(donnees_rbase), <span class="at">na.last =</span> <span class="cn">FALSE</span>), ]</span>
<span id="cb211-3"><a href="#cb211-3" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="sc">!</span><span class="fu">duplicated</span>(donnees_rbase[, <span class="fu">colnames</span>(donnees_rbase)], <span class="at">fromLast =</span> <span class="cn">TRUE</span>), ]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-40-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-40-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb212-2"><a href="#cb212-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="les-jointures-de-base" class="level2" data-number="15">
<h2 data-number="15" class="anchored" data-anchor-id="les-jointures-de-base"><span class="header-section-number">15</span> Les jointures de base</h2>
<section id="inner-join-identifiants-communs-aux-bases" class="level3" data-number="15.1">
<h3 data-number="15.1" class="anchored" data-anchor-id="inner-join-identifiants-communs-aux-bases"><span class="header-section-number">15.1</span> Inner Join : identifiants communs aux bases</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-41-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-41-1" role="tab" aria-controls="tabset-41-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-41-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-41-2" role="tab" aria-controls="tabset-41-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-41-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-41-3" role="tab" aria-controls="tabset-41-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-41-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-41-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">*</span> On suppose que l<span class="st">'on dispose d'</span>une base supplémentaire avec les diplômes des personnes <span class="sc">*</span><span class="er">/</span></span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a>    data Diplome;</span>
<span id="cb213-3"><a href="#cb213-3" aria-hidden="true" tabindex="-1"></a>    infile cards dsd dlm<span class="ot">=</span><span class="st">'|'</span>;</span>
<span id="cb213-4"><a href="#cb213-4" aria-hidden="true" tabindex="-1"></a>    format Identifiant <span class="sc">$</span><span class="fl">3.</span> Diplome <span class="sc">$</span><span class="fl">50.</span>;</span>
<span id="cb213-5"><a href="#cb213-5" aria-hidden="true" tabindex="-1"></a>    input Identifiant <span class="sc">$</span> Diplome <span class="sc">$</span>;</span>
<span id="cb213-6"><a href="#cb213-6" aria-hidden="true" tabindex="-1"></a>    cards;</span>
<span id="cb213-7"><a href="#cb213-7" aria-hidden="true" tabindex="-1"></a>    <span class="dv">173</span><span class="sc">|</span>Bac</span>
<span id="cb213-8"><a href="#cb213-8" aria-hidden="true" tabindex="-1"></a>    <span class="dv">168</span><span class="sc">|</span>Bep<span class="sc">-</span>Cap</span>
<span id="cb213-9"><a href="#cb213-9" aria-hidden="true" tabindex="-1"></a>    <span class="dv">112</span><span class="sc">|</span>Bep<span class="sc">-</span>Cap</span>
<span id="cb213-10"><a href="#cb213-10" aria-hidden="true" tabindex="-1"></a>    <span class="dv">087</span><span class="sc">|</span>Bac<span class="sc">+</span><span class="dv">2</span></span>
<span id="cb213-11"><a href="#cb213-11" aria-hidden="true" tabindex="-1"></a>    <span class="dv">689</span><span class="sc">|</span>Bac<span class="sc">+</span><span class="dv">2</span></span>
<span id="cb213-12"><a href="#cb213-12" aria-hidden="true" tabindex="-1"></a>    <span class="dv">765</span><span class="sc">|</span>Pas de diplôme</span>
<span id="cb213-13"><a href="#cb213-13" aria-hidden="true" tabindex="-1"></a>    <span class="dv">112</span><span class="sc">|</span>Bac</span>
<span id="cb213-14"><a href="#cb213-14" aria-hidden="true" tabindex="-1"></a>    <span class="dv">999</span><span class="sc">|</span>Bac</span>
<span id="cb213-15"><a href="#cb213-15" aria-hidden="true" tabindex="-1"></a>    <span class="dv">554</span><span class="sc">|</span>Bep<span class="sc">-</span>Cap</span>
<span id="cb213-16"><a href="#cb213-16" aria-hidden="true" tabindex="-1"></a>    ;</span>
<span id="cb213-17"><a href="#cb213-17" aria-hidden="true" tabindex="-1"></a>    run;</span>
<span id="cb213-18"><a href="#cb213-18" aria-hidden="true" tabindex="-1"></a>    data Jointure;set <span class="fu">Donnees</span> (<span class="at">keep =</span> Identifiant Sexe Age);run;</span>
<span id="cb213-19"><a href="#cb213-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-20"><a href="#cb213-20" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">*</span> Le tri préalable des bases de données à joindre par la variable de jointure est nécessaire avec la stratégie merge <span class="sc">*</span><span class="er">/</span></span>
<span id="cb213-21"><a href="#cb213-21" aria-hidden="true" tabindex="-1"></a>    proc sort data <span class="ot">=</span> Diplome;by identifiant;run;</span>
<span id="cb213-22"><a href="#cb213-22" aria-hidden="true" tabindex="-1"></a>    proc sort data <span class="ot">=</span> Jointure;by identifiant;run;</span>
<span id="cb213-23"><a href="#cb213-23" aria-hidden="true" tabindex="-1"></a>    data Inner_Join1;</span>
<span id="cb213-24"><a href="#cb213-24" aria-hidden="true" tabindex="-1"></a>    merge <span class="fu">Jointure</span> (<span class="at">in =</span> a) <span class="fu">Diplome</span> (<span class="at">in =</span> b);</span>
<span id="cb213-25"><a href="#cb213-25" aria-hidden="true" tabindex="-1"></a>    by identifiant;</span>
<span id="cb213-26"><a href="#cb213-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> a and b;</span>
<span id="cb213-27"><a href="#cb213-27" aria-hidden="true" tabindex="-1"></a>    run;</span>
<span id="cb213-28"><a href="#cb213-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-29"><a href="#cb213-29" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">*</span> Le tri préalable des bases de données à joindre n<span class="st">'est pas nécessaire avec la jointure SQL */</span></span>
<span id="cb213-30"><a href="#cb213-30" aria-hidden="true" tabindex="-1"></a><span class="st">    proc sql;</span></span>
<span id="cb213-31"><a href="#cb213-31" aria-hidden="true" tabindex="-1"></a><span class="st">    create table Inner_Join2 as</span></span>
<span id="cb213-32"><a href="#cb213-32" aria-hidden="true" tabindex="-1"></a><span class="st">    select * from Jointure a inner join Diplome b on a.identifiant = b.identifiant</span></span>
<span id="cb213-33"><a href="#cb213-33" aria-hidden="true" tabindex="-1"></a><span class="st">    order by a.identifiant;</span></span>
<span id="cb213-34"><a href="#cb213-34" aria-hidden="true" tabindex="-1"></a><span class="st">    quit;</span></span>
<span id="cb213-35"><a href="#cb213-35" aria-hidden="true" tabindex="-1"></a><span class="st">    proc print data = Inner_Join1;run;</span></span>
<span id="cb213-36"><a href="#cb213-36" aria-hidden="true" tabindex="-1"></a><span class="st">    proc sql;select count(*) from Inner_Join1;quit;</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-41-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-41-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb214"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On suppose que l'on dispose d'une base supplémentaire avec les diplômes des personnes</span></span>
<span id="cb214-2"><a href="#cb214-2" aria-hidden="true" tabindex="-1"></a>diplome_rbase <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">identifiant_i =</span> <span class="fu">c</span>(<span class="st">"173"</span>, <span class="st">"168"</span>, <span class="st">"112"</span>, <span class="st">"087"</span>, <span class="st">"689"</span>, <span class="st">"765"</span>, <span class="st">"112"</span>, <span class="st">"999"</span>, <span class="st">"554"</span>),</span>
<span id="cb214-3"><a href="#cb214-3" aria-hidden="true" tabindex="-1"></a><span class="at">diplome=</span> <span class="fu">c</span>(<span class="st">"Bac"</span>, <span class="st">"Bep-Cap"</span>, <span class="st">"Bep-Cap"</span>, <span class="st">"Bac+2"</span>, <span class="st">"Bac+2"</span>, <span class="st">"Pas de diplôme"</span>, <span class="st">"Bac"</span>, <span class="st">"Bac"</span>, <span class="st">"Bep-Cap"</span>),</span>
<span id="cb214-4"><a href="#cb214-4" aria-hidden="true" tabindex="-1"></a><span class="at">age_dip =</span> <span class="fu">c</span>(<span class="dv">22</span>, <span class="dv">27</span>, <span class="dv">18</span>, <span class="dv">23</span>, <span class="dv">21</span>, <span class="dv">15</span>, <span class="dv">21</span>, <span class="dv">18</span>, <span class="dv">20</span>)</span>
<span id="cb214-5"><a href="#cb214-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Inner join : les seuls identifiants communs aux deux bases</span></span>
<span id="cb215-2"><a href="#cb215-2" aria-hidden="true" tabindex="-1"></a>jointure_rbase <span class="ot">&lt;-</span> donnees_rbase[, <span class="fu">c</span>(<span class="st">"identifiant"</span>, <span class="st">"sexe"</span>, <span class="st">"age"</span>)]</span>
<span id="cb215-3"><a href="#cb215-3" aria-hidden="true" tabindex="-1"></a>innerJoin_rbase <span class="ot">&lt;-</span> <span class="fu">merge</span>(jointure_rbase, diplome_rbase, <span class="at">by.x =</span> <span class="st">"identifiant"</span>, <span class="at">by.y =</span> <span class="st">"identifiant_i"</span>)</span>
<span id="cb215-4"><a href="#cb215-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(innerJoin_rbase)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-41-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-41-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb216"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On suppose que l'on dispose d'une base supplémentaire avec les diplômes des personnes</span></span>
<span id="cb216-2"><a href="#cb216-2" aria-hidden="true" tabindex="-1"></a>diplome_tidyverse <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">identifiant=</span> <span class="fu">c</span>(<span class="st">"173"</span>, <span class="st">"168"</span>, <span class="st">"112"</span>, <span class="st">"087"</span>, <span class="st">"689"</span>, <span class="st">"765"</span>, <span class="st">"112"</span>, <span class="st">"999"</span>, <span class="st">"554"</span>),</span>
<span id="cb216-3"><a href="#cb216-3" aria-hidden="true" tabindex="-1"></a><span class="at">diplome=</span> <span class="fu">c</span>(<span class="st">"Bac"</span>, <span class="st">"Bep-Cap"</span>, <span class="st">"Bep-Cap"</span>, <span class="st">"Bac+2"</span>, <span class="st">"Bac+2"</span>, <span class="st">"Pas de diplôme"</span>, <span class="st">"Bac"</span>, <span class="st">"Bac"</span>, <span class="st">"Bep-Cap"</span>),</span>
<span id="cb216-4"><a href="#cb216-4" aria-hidden="true" tabindex="-1"></a><span class="at">age_dip =</span> <span class="fu">c</span>(<span class="dv">22</span>, <span class="dv">27</span>, <span class="dv">18</span>, <span class="dv">23</span>, <span class="dv">21</span>, <span class="dv">15</span>, <span class="dv">21</span>, <span class="dv">18</span>, <span class="dv">20</span>)</span>
<span id="cb216-5"><a href="#cb216-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb217"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Inner join : les seuls identifiants communs aux deux bases</span></span>
<span id="cb217-2"><a href="#cb217-2" aria-hidden="true" tabindex="-1"></a>jointure_tidyverse<span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb217-3"><a href="#cb217-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(identifiant, sexe, age)</span>
<span id="cb217-4"><a href="#cb217-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-5"><a href="#cb217-5" aria-hidden="true" tabindex="-1"></a>innerJoin_tidyverse <span class="ot">&lt;-</span> jointure_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb217-6"><a href="#cb217-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(diplome_tidyverse, <span class="at">by=</span><span class="st">"identifiant"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="left-et-right-join-identifiants-de-lune-des-bases" class="level3" data-number="15.2">
<h3 data-number="15.2" class="anchored" data-anchor-id="left-et-right-join-identifiants-de-lune-des-bases"><span class="header-section-number">15.2</span> Left et Right Join : identifiants de l’une des bases</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-42-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-42-1" role="tab" aria-controls="tabset-42-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-42-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-42-2" role="tab" aria-controls="tabset-42-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-42-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-42-3" role="tab" aria-controls="tabset-42-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-42-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-42-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb218"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">*</span> Le tri préalable des bases de données à joindre par la variable de jointure est nécessaire avec la stratégie merge <span class="sc">*</span><span class="er">/</span></span>
<span id="cb218-2"><a href="#cb218-2" aria-hidden="true" tabindex="-1"></a>    proc sort data <span class="ot">=</span> Diplome;by identifiant;run;</span>
<span id="cb218-3"><a href="#cb218-3" aria-hidden="true" tabindex="-1"></a>    proc sort data <span class="ot">=</span> Jointure;by identifiant;run;</span>
<span id="cb218-4"><a href="#cb218-4" aria-hidden="true" tabindex="-1"></a>    data Left_Join1;</span>
<span id="cb218-5"><a href="#cb218-5" aria-hidden="true" tabindex="-1"></a>    merge <span class="fu">Jointure</span> (<span class="at">in =</span> a) <span class="fu">Diplome</span> (<span class="at">in =</span> b);</span>
<span id="cb218-6"><a href="#cb218-6" aria-hidden="true" tabindex="-1"></a>    by identifiant;</span>
<span id="cb218-7"><a href="#cb218-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> a;</span>
<span id="cb218-8"><a href="#cb218-8" aria-hidden="true" tabindex="-1"></a>    run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-42-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-42-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb219"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Left join : les identifiants de la base de gauche</span></span>
<span id="cb219-2"><a href="#cb219-2" aria-hidden="true" tabindex="-1"></a>leftJoin_rbase <span class="ot">&lt;-</span> <span class="fu">merge</span>(jointure_rbase, diplome_rbase, <span class="at">by.x =</span> <span class="st">"identifiant"</span>, <span class="at">by.y =</span> <span class="st">"identifiant_i"</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span>)</span>
<span id="cb219-3"><a href="#cb219-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(leftJoin_rbase)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-42-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-42-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb220"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Left join : les identifiants de la base de gauche</span></span>
<span id="cb220-2"><a href="#cb220-2" aria-hidden="true" tabindex="-1"></a>leftJoin_tidyverse <span class="ot">&lt;-</span> jointure_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb220-3"><a href="#cb220-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(diplome_tidyverse, <span class="at">by=</span><span class="st">"identifiant"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="full-join-identifiants-de-lune-ou-lautre-des-bases" class="level3" data-number="15.3">
<h3 data-number="15.3" class="anchored" data-anchor-id="full-join-identifiants-de-lune-ou-lautre-des-bases"><span class="header-section-number">15.3</span> Full Join : identifiants de l’une ou l’autre des bases</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-43-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-43-1" role="tab" aria-controls="tabset-43-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-43-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-43-2" role="tab" aria-controls="tabset-43-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-43-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-43-3" role="tab" aria-controls="tabset-43-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-43-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-43-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb221"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">*</span> Le tri préalable des bases de données à joindre par la variable de jointure est nécessaire avec la stratégie merge <span class="sc">*</span><span class="er">/</span></span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a>    proc sort data <span class="ot">=</span> Diplome;by identifiant;run;</span>
<span id="cb221-3"><a href="#cb221-3" aria-hidden="true" tabindex="-1"></a>    proc sort data <span class="ot">=</span> Jointure;by identifiant;run;</span>
<span id="cb221-4"><a href="#cb221-4" aria-hidden="true" tabindex="-1"></a>    data Full_Join1;</span>
<span id="cb221-5"><a href="#cb221-5" aria-hidden="true" tabindex="-1"></a>    merge <span class="fu">Jointure</span> (<span class="at">in =</span> a) <span class="fu">Diplome</span> (<span class="at">in =</span> b);</span>
<span id="cb221-6"><a href="#cb221-6" aria-hidden="true" tabindex="-1"></a>    by identifiant;</span>
<span id="cb221-7"><a href="#cb221-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> a or b;</span>
<span id="cb221-8"><a href="#cb221-8" aria-hidden="true" tabindex="-1"></a>    run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-43-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-43-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb222"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Full join : les identifiants des deux bases</span></span>
<span id="cb222-2"><a href="#cb222-2" aria-hidden="true" tabindex="-1"></a>fullJoin_rbase <span class="ot">&lt;-</span> <span class="fu">merge</span>(jointure_rbase, diplome_rbase, <span class="at">by.x =</span> <span class="st">"identifiant"</span>, <span class="at">by.y =</span> <span class="st">"identifiant_i"</span>, <span class="at">all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb222-3"><a href="#cb222-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(fullJoin_rbase)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-43-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-43-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb223"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Full join : les identifiants des deux bases</span></span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true" tabindex="-1"></a>fullJoin_tidyverse <span class="ot">&lt;-</span> jointure_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb223-3"><a href="#cb223-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(diplome_tidyverse)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="cross-join-toutes-les-combinaisons-possibles" class="level3" data-number="15.4">
<h3 data-number="15.4" class="anchored" data-anchor-id="cross-join-toutes-les-combinaisons-possibles"><span class="header-section-number">15.4</span> Cross Join : toutes les combinaisons possibles</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-44-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-44-1" role="tab" aria-controls="tabset-44-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-44-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-44-2" role="tab" aria-controls="tabset-44-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-44-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-44-3" role="tab" aria-controls="tabset-44-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-44-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-44-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb224"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">*</span> <span class="fl">4.</span> Cross join <span class="sc">:</span> toutes les combinaisons possibles de CSP, sexe et Diplome <span class="sc">*</span><span class="er">/</span></span>
<span id="cb224-2"><a href="#cb224-2" aria-hidden="true" tabindex="-1"></a>    proc sql;</span>
<span id="cb224-3"><a href="#cb224-3" aria-hidden="true" tabindex="-1"></a>    select <span class="sc">*</span></span>
<span id="cb224-4"><a href="#cb224-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">from</span> (select distinct CSPF from Donnees) cross <span class="fu">join</span> (select distinct Sexef from Donnees) cross <span class="fu">join</span> (select distinct Diplome from Diplome)</span>
<span id="cb224-5"><a href="#cb224-5" aria-hidden="true" tabindex="-1"></a>    order by CSPF, Sexef, Diplome;</span>
<span id="cb224-6"><a href="#cb224-6" aria-hidden="true" tabindex="-1"></a>    quit;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-44-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-44-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb225"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Cross join : toutes les combinaisons possibles de CSP, sexe et Diplome</span></span>
<span id="cb225-2"><a href="#cb225-2" aria-hidden="true" tabindex="-1"></a>crossJoin_rbase <span class="ot">&lt;-</span> <span class="fu">unique</span>(<span class="fu">expand.grid</span>(donnees_rbase<span class="sc">$</span>cspf, donnees_rbase<span class="sc">$</span>sexef, diplome_rbase<span class="sc">$</span>diplome))</span>
<span id="cb225-3"><a href="#cb225-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(crossJoin_rbase) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"cspf"</span>, <span class="st">"sexef"</span>, <span class="st">"diplome"</span>)</span>
<span id="cb225-4"><a href="#cb225-4" aria-hidden="true" tabindex="-1"></a>crossJoin_rbase</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-44-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-44-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb226"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Cross join </span></span>
<span id="cb226-2"><a href="#cb226-2" aria-hidden="true" tabindex="-1"></a>crossJoin_tidyverse <span class="ot">&lt;-</span> <span class="fu">cross_join</span>(jointure_tidyverse, diplome_tidyverse) <span class="co">#à refaire</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="empiler-les-bases" class="level3" data-number="15.5">
<h3 data-number="15.5" class="anchored" data-anchor-id="empiler-les-bases"><span class="header-section-number">15.5</span> Empiler les bases</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-45-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-45-1" role="tab" aria-controls="tabset-45-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-45-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-45-2" role="tab" aria-controls="tabset-45-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-45-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-45-3" role="tab" aria-controls="tabset-45-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-45-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-45-1-tab">

</div>
<div id="tabset-45-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-45-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb227"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lorsque les variables ne correspondent pas, on les crée avec des valeurs manquantes, via setdiff</span></span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true" tabindex="-1"></a>empilement_rbase <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb227-3"><a href="#cb227-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="fu">c</span>(donnees_rbase, <span class="fu">sapply</span>(<span class="fu">setdiff</span>(<span class="fu">names</span>(diplome_rbase), <span class="fu">names</span>(donnees_rbase)), <span class="cf">function</span>(x) <span class="cn">NA</span>))),</span>
<span id="cb227-4"><a href="#cb227-4" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="fu">c</span>(diplome_rbase, <span class="fu">sapply</span>(<span class="fu">setdiff</span>(<span class="fu">names</span>(donnees_rbase), <span class="fu">names</span>(diplome_rbase)), <span class="cf">function</span>(x) <span class="cn">NA</span>)))</span>
<span id="cb227-5"><a href="#cb227-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-45-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-45-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="co"># bind_rows permet d'empiler les deux bases de données quel que soit l'ordre et le nombre respectif de colonnes alors que rbind ne fonctionnera pas si les bases de données n'ont pas les mêmes colonnes dans le même ordre. </span></span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-3"><a href="#cb228-3" aria-hidden="true" tabindex="-1"></a>empilement_tidyverse <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(donnees_tidyverse, diplome_tidyverse)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="statistiques-descriptives" class="level2" data-number="16">
<h2 data-number="16" class="anchored" data-anchor-id="statistiques-descriptives"><span class="header-section-number">16</span> Statistiques descriptives</h2>
<section id="somme-moyenne-médiane-minimum-maximum-nombre-de-valeurs" class="level3" data-number="16.1">
<h3 data-number="16.1" class="anchored" data-anchor-id="somme-moyenne-médiane-minimum-maximum-nombre-de-valeurs"><span class="header-section-number">16.1</span> Somme, moyenne, médiane, minimum, maximum, nombre de valeurs</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-46-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-46-1" role="tab" aria-controls="tabset-46-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-46-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-46-2" role="tab" aria-controls="tabset-46-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-46-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-46-3" role="tab" aria-controls="tabset-46-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-46-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-46-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb229"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">*</span> Moyenne de chaque note <span class="sc">*</span><span class="er">/</span></span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true" tabindex="-1"></a>    %let notes <span class="ot">=</span> Note_Contenu Note_Formateur Note_Moyens Note_Accompagnement Note_Materiel;</span>
<span id="cb229-3"><a href="#cb229-3" aria-hidden="true" tabindex="-1"></a>    proc means data <span class="ot">=</span> Donnees mean;var <span class="sc">&amp;</span>notes.;run;</span>
<span id="cb229-4"><a href="#cb229-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-5"><a href="#cb229-5" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">*</span> Somme, moyenne, médiane, minimum, maximum, nombre de données <span class="sc">*</span><span class="er">/</span></span>
<span id="cb229-6"><a href="#cb229-6" aria-hidden="true" tabindex="-1"></a>    proc means data <span class="ot">=</span> Donnees sum mean median min max n;var <span class="sc">&amp;</span>notes.;run;</span>
<span id="cb229-7"><a href="#cb229-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-8"><a href="#cb229-8" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">*</span> Notes pondérées (poids de sondage) <span class="sc">*</span><span class="er">/</span></span>
<span id="cb229-9"><a href="#cb229-9" aria-hidden="true" tabindex="-1"></a>    proc means data <span class="ot">=</span> Donnees sum mean median min max n;var <span class="sc">&amp;</span>notes.;weight poids_sondage;run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-46-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-46-2-tab">
<ul>
<li>Moyenne</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb230"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Moyenne de chaque note</span></span>
<span id="cb230-2"><a href="#cb230-2" aria-hidden="true" tabindex="-1"></a>notes_rbase <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">c</span>(<span class="st">"Note_Contenu"</span>, <span class="st">"Note_Formateur"</span>, <span class="st">"Note_Moyens"</span>, <span class="st">"Note_Accompagnement"</span>, <span class="st">"Note_Materiel"</span>))</span>
<span id="cb230-3"><a href="#cb230-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(donnees_rbase[, notes_rbase], mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Moyenne, médiane, maximum, minimum</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb231"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(donnees_rbase[, notes], <span class="cf">function</span>(x) <span class="fu">c</span>(<span class="st">"Somme"</span> <span class="ot">=</span> <span class="fu">sum</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="st">"Moyenne"</span> <span class="ot">=</span> <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb231-2"><a href="#cb231-2" aria-hidden="true" tabindex="-1"></a><span class="st">"Médiane"</span> <span class="ot">=</span> <span class="fu">median</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="st">"Max"</span> <span class="ot">=</span> <span class="fu">max</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb231-3"><a href="#cb231-3" aria-hidden="true" tabindex="-1"></a><span class="st">"Min"</span> <span class="ot">=</span> <span class="fu">min</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Moyenne avec pondération</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb232"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Avec la pondération</span></span>
<span id="cb232-2"><a href="#cb232-2" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(donnees_rbase, <span class="fu">sapply</span>(donnees_rbase[, notes], <span class="cf">function</span>(x) <span class="fu">weighted.mean</span>(x, poids_sondage, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Résumé statistique</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb233"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(donnees_rbase[, notes])</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-46-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-46-3-tab">
<ul>
<li>Moyenne par identifiant</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb234"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a>notes_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span>  </span>
<span id="cb234-2"><a href="#cb234-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"Note"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb234-3"><a href="#cb234-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise_all</span>(<span class="at">.funs =</span> <span class="fu">c</span>(<span class="at">mean=</span><span class="st">"mean"</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Moyenne par identifiant par pondération</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb235"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a>notes_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span>  </span>
<span id="cb235-2"><a href="#cb235-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"Note"</span>), poids_sondage) <span class="sc">%&gt;%</span> </span>
<span id="cb235-3"><a href="#cb235-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(note_contenu<span class="sc">:</span>note_materiel, <span class="sc">~</span><span class="fu">weighted.mean</span>(., <span class="at">w =</span> poids_sondage)))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="quantiles" class="level3" data-number="16.2">
<h3 data-number="16.2" class="anchored" data-anchor-id="quantiles"><span class="header-section-number">16.2</span> Quantiles</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-47-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-47-1" role="tab" aria-controls="tabset-47-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-47-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-47-2" role="tab" aria-controls="tabset-47-2" aria-selected="false">R base</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-47-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-47-3" role="tab" aria-controls="tabset-47-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-47-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-47-1-tab">

</div>
<div id="tabset-47-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-47-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb236"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Déciles et quartiles de la note moyenne</span></span>
<span id="cb236-2"><a href="#cb236-2" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(donnees_rbase<span class="sc">$</span>note_moyens, <span class="at">probs =</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.1</span>), <span class="fl">0.25</span>, <span class="fl">0.75</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-47-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-47-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb237"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb237-2"><a href="#cb237-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(identifiant) <span class="sc">%&gt;%</span>  </span>
<span id="cb237-3"><a href="#cb237-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">quantile =</span> scales<span class="sc">::</span><span class="fu">percent</span>(<span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>)),</span>
<span id="cb237-4"><a href="#cb237-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">note_moyens =</span> <span class="fu">quantile</span>(note_moyens, <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="tableaux-de-fréquence-contingence-proc-freq" class="level3" data-number="16.3">
<h3 data-number="16.3" class="anchored" data-anchor-id="tableaux-de-fréquence-contingence-proc-freq"><span class="header-section-number">16.3</span> Tableaux de fréquence / contingence : proc freq</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-48-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-48-1" role="tab" aria-controls="tabset-48-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-48-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-48-2" role="tab" aria-controls="tabset-48-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-48-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-48-3" role="tab" aria-controls="tabset-48-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-48-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-48-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb238"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">*</span> Tableaux de fréquence <span class="sc">:</span> proc freq <span class="sc">*</span><span class="er">/</span></span>
<span id="cb238-2"><a href="#cb238-2" aria-hidden="true" tabindex="-1"></a>    proc freq data <span class="ot">=</span> Donnees;</span>
<span id="cb238-3"><a href="#cb238-3" aria-hidden="true" tabindex="-1"></a>    tables Sexe CSP <span class="sc">/</span> missing;</span>
<span id="cb238-4"><a href="#cb238-4" aria-hidden="true" tabindex="-1"></a>    format Sexe sexef. CSP <span class="sc">$</span>cspf.;</span>
<span id="cb238-5"><a href="#cb238-5" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">*</span>weight poids_sondage;<span class="sc">*</span><span class="er">/</span></span>
<span id="cb238-6"><a href="#cb238-6" aria-hidden="true" tabindex="-1"></a>    run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-48-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-48-2-tab">
<p>L’équivalent de <em>proc freq</em> sur SAS :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb239"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(donnees_rbase<span class="sc">$</span>sexef, <span class="at">useNA =</span> <span class="st">"always"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-48-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-48-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb240"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a>tableau_contingence <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb240-2"><a href="#cb240-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sexef) <span class="sc">%&gt;%</span> </span>
<span id="cb240-3"><a href="#cb240-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>())</span>
<span id="cb240-4"><a href="#cb240-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-5"><a href="#cb240-5" aria-hidden="true" tabindex="-1"></a>tableau_contingence</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="proportion" class="level3" data-number="16.4">
<h3 data-number="16.4" class="anchored" data-anchor-id="proportion"><span class="header-section-number">16.4</span> Proportion</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-49-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-49-1" role="tab" aria-controls="tabset-49-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-49-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-49-2" role="tab" aria-controls="tabset-49-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-49-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-49-3" role="tab" aria-controls="tabset-49-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-49-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-49-1-tab">

</div>
<div id="tabset-49-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-49-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb241"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(donnees_rbase<span class="sc">$</span>sexef, <span class="at">useNA =</span> <span class="st">"always"</span>)) <span class="sc">*</span> <span class="dv">100</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-49-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-49-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a>proportion <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sexef) <span class="sc">%&gt;%</span> </span>
<span id="cb242-3"><a href="#cb242-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>(),</span>
<span id="cb242-4"><a href="#cb242-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">pourcentage=</span><span class="fu">round</span>(n<span class="sc">/</span><span class="fu">length</span>(donnees_tidyverse<span class="sc">$</span>sexef)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">2</span>))</span>
<span id="cb242-5"><a href="#cb242-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-6"><a href="#cb242-6" aria-hidden="true" tabindex="-1"></a>proportion</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="fonction-macros-sas" class="level2" data-number="17">
<h2 data-number="17" class="anchored" data-anchor-id="fonction-macros-sas"><span class="header-section-number">17</span> Fonction, macros SAS</h2>
<section id="boucles-itérations" class="level3" data-number="17.1">
<h3 data-number="17.1" class="anchored" data-anchor-id="boucles-itérations"><span class="header-section-number">17.1</span> Boucles, itérations</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-50-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-50-1" role="tab" aria-controls="tabset-50-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-50-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-50-2" role="tab" aria-controls="tabset-50-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-50-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-50-3" role="tab" aria-controls="tabset-50-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-50-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-50-1-tab">

</div>
<div id="tabset-50-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-50-2-tab">

</div>
<div id="tabset-50-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-50-3-tab">

</div>
</div>
</div>
</section>
<section id="créations-automatiques-de-bases-empilements-de-bases" class="level3" data-number="17.2">
<h3 data-number="17.2" class="anchored" data-anchor-id="créations-automatiques-de-bases-empilements-de-bases"><span class="header-section-number">17.2</span> Créations automatiques de bases, empilements de bases</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-51-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-51-1" role="tab" aria-controls="tabset-51-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-51-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-51-2" role="tab" aria-controls="tabset-51-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-51-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-51-3" role="tab" aria-controls="tabset-51-3" aria-selected="false"><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-51-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-51-1-tab">

</div>
<div id="tabset-51-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-51-2-tab">

</div>
<div id="tabset-51-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-51-3-tab">

</div>
</div>
</div>
</section>
</section>
<section id="fin-du-programme" class="level2" data-number="18">
<h2 data-number="18" class="anchored" data-anchor-id="fin-du-programme"><span class="header-section-number">18</span> Fin du programme</h2>
<section id="supprimer-toutes-les-bases-de-la-mémoire-vive-work-ram" class="level3" data-number="18.1">
<h3 data-number="18.1" class="anchored" data-anchor-id="supprimer-toutes-les-bases-de-la-mémoire-vive-work-ram"><span class="header-section-number">18.1</span> Supprimer toutes les bases de la mémoire vive (work RAM)</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-52-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-52-1" role="tab" aria-controls="tabset-52-1" aria-selected="true"><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-52-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-52-2" role="tab" aria-controls="tabset-52-2" aria-selected="false"><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-52-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-52-3" role="tab" aria-controls="tabset-52-3" aria-selected="false"><code>Duckdb</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-52-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-52-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb243"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a>    <span class="sc">/</span><span class="er">*</span> Supprimer toutes les bases de la mémoire <span class="fu">vive</span> (la work) <span class="sc">=&gt;</span> <span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()) <span class="sc">*</span><span class="er">/</span></span>
<span id="cb243-2"><a href="#cb243-2" aria-hidden="true" tabindex="-1"></a>    proc datasets lib <span class="ot">=</span> work nolist kill;run;</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-52-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-52-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="co">#rm(list = ls()) #conflit avec cellule d'après sinon </span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-52-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-52-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a>DBI<span class="sc">::</span><span class="fu">dbDisconnect</span>(con, <span class="at">shutdown =</span> <span class="cn">TRUE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="points-de-vigilance-en-sas" class="level2" data-number="19">
<h2 data-number="19" class="anchored" data-anchor-id="points-de-vigilance-en-sas"><span class="header-section-number">19</span> Points de vigilance en SAS</h2>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Notes de bas de page</h2>

<ol>
<li id="fn1"><p>Dares/SCS, nassab.abdallah@travail.gouv.fr<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Dares/DIP, damien.euzenat@travail.gouv.fr<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Dares/DFA, sebastien.li-thiao-te@travail.gouv.fr<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/slithiaote\.github\.io\/aide_memoire_r_sas\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Ce site a été créé avec <a href="https://quarto.org/">Quarto</a></p>
</div>
  </div>
</footer>




</body></html>